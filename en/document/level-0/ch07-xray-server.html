<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.2">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/logo.png"><title>[Chapter 7]Xray Server | Project X</title><meta name="description" content="Official document of Xray">
    <link rel="preload" href="/assets/style-DPNvLHrM.css" as="style"><link rel="stylesheet" href="/assets/style-DPNvLHrM.css">
    <link rel="modulepreload" href="/assets/app-D0UrkztD.js"><link rel="modulepreload" href="/assets/ch07-xray-server.html-C13N5hD6.js"><link rel="modulepreload" href="/assets/ch07-xray-server.html-BL8jxy31.js">
    <link rel="prefetch" href="/assets/index.html-BphzwQOs.js" as="script"><link rel="prefetch" href="/assets/news.html-D2eNDMdM.js" as="script"><link rel="prefetch" href="/assets/index.html-B2ETL5pY.js" as="script"><link rel="prefetch" href="/assets/api.html-5y-QWEO9.js" as="script"><link rel="prefetch" href="/assets/dns.html-BfPt-22g.js" as="script"><link rel="prefetch" href="/assets/fakedns.html-BSHcVJMt.js" as="script"><link rel="prefetch" href="/assets/inbound.html-2Gs5XIZT.js" as="script"><link rel="prefetch" href="/assets/log.html-DOIV41-g.js" as="script"><link rel="prefetch" href="/assets/metrics.html-C1kvghj5.js" as="script"><link rel="prefetch" href="/assets/observatory.html-Dkgoiajw.js" as="script"><link rel="prefetch" href="/assets/outbound.html-C10j64xi.js" as="script"><link rel="prefetch" href="/assets/policy.html-CErsqhDk.js" as="script"><link rel="prefetch" href="/assets/reverse.html-BzUnx5j0.js" as="script"><link rel="prefetch" href="/assets/routing.html-Bx5bopot.js" as="script"><link rel="prefetch" href="/assets/stats.html-DHCl8ess.js" as="script"><link rel="prefetch" href="/assets/transport.html-CnZXw5hX.js" as="script"><link rel="prefetch" href="/assets/index.html-CTbMiGG2.js" as="script"><link rel="prefetch" href="/assets/index.html-CA-WluU-.js" as="script"><link rel="prefetch" href="/assets/command.html-opo_NLX2.js" as="script"><link rel="prefetch" href="/assets/config.html-O0hv2z0b.js" as="script"><link rel="prefetch" href="/assets/document.html-vroedGik.js" as="script"><link rel="prefetch" href="/assets/install.html-CtHiKZjZ.js" as="script"><link rel="prefetch" href="/assets/index.html-Cmmy7Roz.js" as="script"><link rel="prefetch" href="/assets/index.html-CxsArIyl.js" as="script"><link rel="prefetch" href="/assets/browser_dialer.html-DYjgEhDN.js" as="script"><link rel="prefetch" href="/assets/env.html-x3PGFNW0.js" as="script"><link rel="prefetch" href="/assets/fallback.html-BCz8baOr.js" as="script"><link rel="prefetch" href="/assets/multiple.html-CA4IQdBs.js" as="script"><link rel="prefetch" href="/assets/xtls.html-DTQkH1EU.js" as="script"><link rel="prefetch" href="/assets/dokodemo.html-BVzbqjRe.js" as="script"><link rel="prefetch" href="/assets/http.html-BIzz1n6q.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-Bog2IQ_X.js" as="script"><link rel="prefetch" href="/assets/socks.html-B_KFCfGa.js" as="script"><link rel="prefetch" href="/assets/trojan.html-BkQCt-32.js" as="script"><link rel="prefetch" href="/assets/vless.html-CxK3eXqB.js" as="script"><link rel="prefetch" href="/assets/vmess.html-BSAH9EwQ.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-DI0HSIg5.js" as="script"><link rel="prefetch" href="/assets/blackhole.html-C3j-gtFm.js" as="script"><link rel="prefetch" href="/assets/dns.html-R1M3D1VY.js" as="script"><link rel="prefetch" href="/assets/freedom.html-D2k6fcsc.js" as="script"><link rel="prefetch" href="/assets/http.html-CqFywJ_o.js" as="script"><link rel="prefetch" href="/assets/loopback.html-CYltRkS6.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-BdSAub8s.js" as="script"><link rel="prefetch" href="/assets/socks.html-C_Ryg_Zn.js" as="script"><link rel="prefetch" href="/assets/trojan.html-_aC10_zp.js" as="script"><link rel="prefetch" href="/assets/vless.html-sPPpqcW_.js" as="script"><link rel="prefetch" href="/assets/vmess.html-3bHG9IEs.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-DMp0Htsq.js" as="script"><link rel="prefetch" href="/assets/grpc.html-BOwRBc6V.js" as="script"><link rel="prefetch" href="/assets/h2.html-B-_cdxSw.js" as="script"><link rel="prefetch" href="/assets/httpupgrade.html-DNm5DiZb.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-CmaMJX_Q.js" as="script"><link rel="prefetch" href="/assets/splithttp.html-CT8Yo7fX.js" as="script"><link rel="prefetch" href="/assets/tcp.html-tAb-Rdu-.js" as="script"><link rel="prefetch" href="/assets/websocket.html-J4zD0ZXr.js" as="script"><link rel="prefetch" href="/assets/compile.html-C08Er0mK.js" as="script"><link rel="prefetch" href="/assets/design.html-JvR3o2wW.js" as="script"><link rel="prefetch" href="/assets/guide.html-CIw6ZqK-.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-BECLirWp.js" as="script"><link rel="prefetch" href="/assets/muxcool.html-DxsTQuoq.js" as="script"><link rel="prefetch" href="/assets/vless.html-bx0zLtjU.js" as="script"><link rel="prefetch" href="/assets/vmess.html-DH5KSkx4.js" as="script"><link rel="prefetch" href="/assets/index.html-CpLT_ZsY.js" as="script"><link rel="prefetch" href="/assets/ch01-preface.html-DmNJxKif.js" as="script"><link rel="prefetch" href="/assets/ch02-preparation.html-BTKGqj9u.js" as="script"><link rel="prefetch" href="/assets/ch03-ssh.html-Bs4sxOG7.js" as="script"><link rel="prefetch" href="/assets/ch04-security.html-BgZQf6Zy.js" as="script"><link rel="prefetch" href="/assets/ch05-webpage.html-C3ISjTL0.js" as="script"><link rel="prefetch" href="/assets/ch06-certificates.html-g-a588dM.js" as="script"><link rel="prefetch" href="/assets/ch07-xray-server.html-CL7ODUGu.js" as="script"><link rel="prefetch" href="/assets/ch08-xray-clients.html-D0DH-0jR.js" as="script"><link rel="prefetch" href="/assets/ch09-appendix.html-B-sOxmCt.js" as="script"><link rel="prefetch" href="/assets/index.html-Z8xBvZ8J.js" as="script"><link rel="prefetch" href="/assets/fallbacks-lv1.html-Dyr_PhvB.js" as="script"><link rel="prefetch" href="/assets/fallbacks-with-sni.html-V5VzGt_a.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part1.html-C-IzJ3qA.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part2.html-Shikx9Ih.js" as="script"><link rel="prefetch" href="/assets/work.html-CEe4qs2X.js" as="script"><link rel="prefetch" href="/assets/index.html-DC6-KGmE.js" as="script"><link rel="prefetch" href="/assets/iptables_gid.html-BMSyFQlC.js" as="script"><link rel="prefetch" href="/assets/nginx_or_haproxy_tls_tunnel.html-pJln5JiT.js" as="script"><link rel="prefetch" href="/assets/redirect.html-qKHxqUqo.js" as="script"><link rel="prefetch" href="/assets/tproxy.html-ByDe25dh.js" as="script"><link rel="prefetch" href="/assets/tproxy_ipv4_and_ipv6.html-D-5zdr32.js" as="script"><link rel="prefetch" href="/assets/traffic_stats.html-0T5V4GoX.js" as="script"><link rel="prefetch" href="/assets/warp.html-BDXJx2co.js" as="script"><link rel="prefetch" href="/assets/news.html-BqrYRGqh.js" as="script"><link rel="prefetch" href="/assets/index.html-CVcFP_qj.js" as="script"><link rel="prefetch" href="/assets/api.html-Kao4_KiT.js" as="script"><link rel="prefetch" href="/assets/dns.html-CvTCwYNS.js" as="script"><link rel="prefetch" href="/assets/fakedns.html-Dvu3AZyj.js" as="script"><link rel="prefetch" href="/assets/inbound.html-DMVoiGk7.js" as="script"><link rel="prefetch" href="/assets/log.html--3F9JN_2.js" as="script"><link rel="prefetch" href="/assets/metrics.html-BLJ8GVn6.js" as="script"><link rel="prefetch" href="/assets/observatory.html-CcNQ0eYH.js" as="script"><link rel="prefetch" href="/assets/outbound.html-CzOKWWkv.js" as="script"><link rel="prefetch" href="/assets/policy.html-C8ASaUzS.js" as="script"><link rel="prefetch" href="/assets/reverse.html-BnnvxzqT.js" as="script"><link rel="prefetch" href="/assets/routing.html-zaMrIcUV.js" as="script"><link rel="prefetch" href="/assets/stats.html-DGZuatV1.js" as="script"><link rel="prefetch" href="/assets/transport.html-j20KTFMX.js" as="script"><link rel="prefetch" href="/assets/index.html-CFqc6OBy.js" as="script"><link rel="prefetch" href="/assets/index.html-DFwA2xNy.js" as="script"><link rel="prefetch" href="/assets/command.html-CnAfnl0M.js" as="script"><link rel="prefetch" href="/assets/config.html-DrlSKA0W.js" as="script"><link rel="prefetch" href="/assets/document.html-CBY4dmVD.js" as="script"><link rel="prefetch" href="/assets/install.html-Vhx-_q7N.js" as="script"><link rel="prefetch" href="/assets/news.html-D9sjwd9T.js" as="script"><link rel="prefetch" href="/assets/index.html-Br3dj_2c.js" as="script"><link rel="prefetch" href="/assets/api.html-DLDnYtg0.js" as="script"><link rel="prefetch" href="/assets/dns.html-DfoiH0ad.js" as="script"><link rel="prefetch" href="/assets/fakedns.html-DFAPe69C.js" as="script"><link rel="prefetch" href="/assets/inbound.html-7L6d18D5.js" as="script"><link rel="prefetch" href="/assets/log.html-DjmhB4xx.js" as="script"><link rel="prefetch" href="/assets/metrics.html-wNzErJVc.js" as="script"><link rel="prefetch" href="/assets/observatory.html-CQ1B9WMF.js" as="script"><link rel="prefetch" href="/assets/outbound.html-BaSyw3Ug.js" as="script"><link rel="prefetch" href="/assets/policy.html-CZXmUkYI.js" as="script"><link rel="prefetch" href="/assets/reverse.html-B5DaFRsx.js" as="script"><link rel="prefetch" href="/assets/routing.html-DzeMyjIq.js" as="script"><link rel="prefetch" href="/assets/stats.html-CkQuuoBx.js" as="script"><link rel="prefetch" href="/assets/transport.html-DfxqUj3F.js" as="script"><link rel="prefetch" href="/assets/index.html-BBMcLiPC.js" as="script"><link rel="prefetch" href="/assets/index.html-B-J-mqnv.js" as="script"><link rel="prefetch" href="/assets/command.html-DLT-4XC7.js" as="script"><link rel="prefetch" href="/assets/config.html-CpMF1H3m.js" as="script"><link rel="prefetch" href="/assets/document.html-Cv2iGxpB.js" as="script"><link rel="prefetch" href="/assets/install.html-BNPtBqmc.js" as="script"><link rel="prefetch" href="/assets/transparent_proxy.html-DZNi96TQ.js" as="script"><link rel="prefetch" href="/assets/browser_dialer.html-Bdbrov2m.js" as="script"><link rel="prefetch" href="/assets/env.html-kVBaIisu.js" as="script"><link rel="prefetch" href="/assets/fallback.html-Cz26Rtbk.js" as="script"><link rel="prefetch" href="/assets/multiple.html-672DYUik.js" as="script"><link rel="prefetch" href="/assets/xtls.html-enE-oLop.js" as="script"><link rel="prefetch" href="/assets/dokodemo.html-tumWX5uf.js" as="script"><link rel="prefetch" href="/assets/http.html-Dk_GJXk3.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-nKE9-JwE.js" as="script"><link rel="prefetch" href="/assets/socks.html-BYoEVGSJ.js" as="script"><link rel="prefetch" href="/assets/trojan.html-2VAwem9J.js" as="script"><link rel="prefetch" href="/assets/vless.html-BCCfQS7T.js" as="script"><link rel="prefetch" href="/assets/vmess.html-DmF6uMmY.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-BIApe7Jj.js" as="script"><link rel="prefetch" href="/assets/blackhole.html-Cv99Ln_e.js" as="script"><link rel="prefetch" href="/assets/dns.html-B4Qc1gmf.js" as="script"><link rel="prefetch" href="/assets/freedom.html-BQY3OiLK.js" as="script"><link rel="prefetch" href="/assets/http.html-BW71su7G.js" as="script"><link rel="prefetch" href="/assets/loopback.html-DBZDnpde.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-Cfe33M9q.js" as="script"><link rel="prefetch" href="/assets/socks.html-ZsLxpdI_.js" as="script"><link rel="prefetch" href="/assets/trojan.html-C_OdgAQH.js" as="script"><link rel="prefetch" href="/assets/vless.html-DNT9jIbN.js" as="script"><link rel="prefetch" href="/assets/vmess.html-BnKkO-oz.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-B1zHQq-E.js" as="script"><link rel="prefetch" href="/assets/grpc.html-D7nAIvyK.js" as="script"><link rel="prefetch" href="/assets/h2.html-9I7eRGud.js" as="script"><link rel="prefetch" href="/assets/httpupgrade.html-DpYANPWG.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-D1BaSNsx.js" as="script"><link rel="prefetch" href="/assets/splithttp.html-YgSRxFF4.js" as="script"><link rel="prefetch" href="/assets/tcp.html-Dvv-qFsr.js" as="script"><link rel="prefetch" href="/assets/websocket.html-CDgG-JKn.js" as="script"><link rel="prefetch" href="/assets/compile.html-CSlVqiWd.js" as="script"><link rel="prefetch" href="/assets/design.html-CnO0gj1h.js" as="script"><link rel="prefetch" href="/assets/guide.html-C1S7IA49.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-VU4-Z4x2.js" as="script"><link rel="prefetch" href="/assets/muxcool.html-CEJDgOyw.js" as="script"><link rel="prefetch" href="/assets/vless.html-DH9DXlDy.js" as="script"><link rel="prefetch" href="/assets/vmess.html-DRYwVgEC.js" as="script"><link rel="prefetch" href="/assets/index.html-B7FLw-wS.js" as="script"><link rel="prefetch" href="/assets/ch01-preface.html-CpS2RBBO.js" as="script"><link rel="prefetch" href="/assets/ch02-preparation.html-nD3-r55P.js" as="script"><link rel="prefetch" href="/assets/ch03-ssh.html-6Lvt6PUL.js" as="script"><link rel="prefetch" href="/assets/ch04-security.html-B6qoKme-.js" as="script"><link rel="prefetch" href="/assets/ch05-webpage.html-DzsY94d_.js" as="script"><link rel="prefetch" href="/assets/ch06-certificates.html-Ddg6ioji.js" as="script"><link rel="prefetch" href="/assets/ch08-xray-clients.html-DQ22p1_O.js" as="script"><link rel="prefetch" href="/assets/ch09-appendix.html-CgxfJw0n.js" as="script"><link rel="prefetch" href="/assets/index.html-NEtYQEGC.js" as="script"><link rel="prefetch" href="/assets/fallbacks-lv1.html-DzqMpBvO.js" as="script"><link rel="prefetch" href="/assets/fallbacks-with-sni.html--6P9o5e1.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part1.html-CLrmD7am.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part2.html-BeZDTPEs.js" as="script"><link rel="prefetch" href="/assets/work.html-bZWwnav2.js" as="script"><link rel="prefetch" href="/assets/index.html-CL_S8-vB.js" as="script"><link rel="prefetch" href="/assets/iptables_gid.html-C-yflUZU.js" as="script"><link rel="prefetch" href="/assets/nginx_or_haproxy_tls_tunnel.html-Gb-c4jql.js" as="script"><link rel="prefetch" href="/assets/redirect.html-CkD_E0gF.js" as="script"><link rel="prefetch" href="/assets/tproxy.html-BW6K5LzA.js" as="script"><link rel="prefetch" href="/assets/tproxy_ipv4_and_ipv6.html-BQJ6GusY.js" as="script"><link rel="prefetch" href="/assets/traffic_stats.html-DD1S40Up.js" as="script"><link rel="prefetch" href="/assets/warp.html-C4DFBgRI.js" as="script"><link rel="prefetch" href="/assets/browser_dialer.html-DHvZocHd.js" as="script"><link rel="prefetch" href="/assets/env.html-BcRLB4iC.js" as="script"><link rel="prefetch" href="/assets/fallback.html-BtkFw_Xq.js" as="script"><link rel="prefetch" href="/assets/multiple.html-L9QltWwj.js" as="script"><link rel="prefetch" href="/assets/xtls.html-ByQJIYGC.js" as="script"><link rel="prefetch" href="/assets/dokodemo.html-B3AutCKN.js" as="script"><link rel="prefetch" href="/assets/http.html-wmoV0Z5H.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-Dq6vO-NY.js" as="script"><link rel="prefetch" href="/assets/socks.html-HP5cpkrw.js" as="script"><link rel="prefetch" href="/assets/trojan.html-ur2ZEK_x.js" as="script"><link rel="prefetch" href="/assets/vless.html-Dp7gCWtk.js" as="script"><link rel="prefetch" href="/assets/vmess.html-BtGpHvfz.js" as="script"><link rel="prefetch" href="/assets/blackhole.html-DWoVmjiZ.js" as="script"><link rel="prefetch" href="/assets/dns.html-QSFk3MG9.js" as="script"><link rel="prefetch" href="/assets/freedom.html-BSl49yvc.js" as="script"><link rel="prefetch" href="/assets/http.html-o0wpiHQf.js" as="script"><link rel="prefetch" href="/assets/loopback.html-BcZmhFf5.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-S-jhNF8h.js" as="script"><link rel="prefetch" href="/assets/socks.html-zyIZHHJ4.js" as="script"><link rel="prefetch" href="/assets/trojan.html-2ngT_7cs.js" as="script"><link rel="prefetch" href="/assets/vless.html-CNa_dakW.js" as="script"><link rel="prefetch" href="/assets/vmess.html-D5q0vDPy.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-DILhdRFk.js" as="script"><link rel="prefetch" href="/assets/grpc.html-1JoA2je9.js" as="script"><link rel="prefetch" href="/assets/h2.html-BOxtTm8R.js" as="script"><link rel="prefetch" href="/assets/httpupgrade.html-C5iPswVE.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-DILru_l-.js" as="script"><link rel="prefetch" href="/assets/splithttp.html-BsCvuL-p.js" as="script"><link rel="prefetch" href="/assets/tcp.html-BgZgnk7j.js" as="script"><link rel="prefetch" href="/assets/websocket.html-DNoxTZYE.js" as="script"><link rel="prefetch" href="/assets/compile.html-D59MH5rf.js" as="script"><link rel="prefetch" href="/assets/design.html-Ddh8g14z.js" as="script"><link rel="prefetch" href="/assets/guide.html-BdEYZrHF.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-DAmKBEn3.js" as="script"><link rel="prefetch" href="/assets/muxcool.html-mhoEooTk.js" as="script"><link rel="prefetch" href="/assets/vless.html-CkQDajpI.js" as="script"><link rel="prefetch" href="/assets/vmess.html-DtwTJf0_.js" as="script"><link rel="prefetch" href="/assets/index.html-CpXf73_p.js" as="script"><link rel="prefetch" href="/assets/ch01-preface.html-w7EJag-g.js" as="script"><link rel="prefetch" href="/assets/ch02-preparation.html-Dgjcbj9R.js" as="script"><link rel="prefetch" href="/assets/ch03-ssh.html-SW0FgDU9.js" as="script"><link rel="prefetch" href="/assets/ch04-security.html-DMyIYFbc.js" as="script"><link rel="prefetch" href="/assets/ch05-webpage.html-BJ9Dh4eq.js" as="script"><link rel="prefetch" href="/assets/ch06-certificates.html-CYpwWYQK.js" as="script"><link rel="prefetch" href="/assets/ch07-xray-server.html-BMC39V_R.js" as="script"><link rel="prefetch" href="/assets/ch08-xray-clients.html-SOUUSYfz.js" as="script"><link rel="prefetch" href="/assets/ch09-appendix.html-CaY0Q2De.js" as="script"><link rel="prefetch" href="/assets/index.html-DIt_Qwmg.js" as="script"><link rel="prefetch" href="/assets/fallbacks-lv1.html-Cj8_C__Y.js" as="script"><link rel="prefetch" href="/assets/fallbacks-with-sni.html-UrPS3PK0.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part1.html-CrCZge13.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part2.html-BNHKIWxf.js" as="script"><link rel="prefetch" href="/assets/work.html-nNVb3F6P.js" as="script"><link rel="prefetch" href="/assets/index.html-nyT_8_ff.js" as="script"><link rel="prefetch" href="/assets/iptables_gid.html-5z8dtoE5.js" as="script"><link rel="prefetch" href="/assets/nginx_or_haproxy_tls_tunnel.html-CZEav5bi.js" as="script"><link rel="prefetch" href="/assets/redirect.html-IdxcHO8c.js" as="script"><link rel="prefetch" href="/assets/tproxy.html-BHj4GcZZ.js" as="script"><link rel="prefetch" href="/assets/tproxy_ipv4_and_ipv6.html-D9HsaVXj.js" as="script"><link rel="prefetch" href="/assets/traffic_stats.html-D5bPdgjj.js" as="script"><link rel="prefetch" href="/assets/warp.html-Dj49TU1P.js" as="script"><link rel="prefetch" href="/assets/transparent_proxy.html-C4cGXidp.js" as="script"><link rel="prefetch" href="/assets/transparent_proxy.html-CdU0iNrm.js" as="script"><link rel="prefetch" href="/assets/404.html-CnfmQthm.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-CfAIELtr.js" as="script"><link rel="prefetch" href="/assets/index.html-DCcEVmy5.js" as="script"><link rel="prefetch" href="/assets/news.html-Di0NOJQO.js" as="script"><link rel="prefetch" href="/assets/index.html-GL954SMF.js" as="script"><link rel="prefetch" href="/assets/api.html-BhvqJnHW.js" as="script"><link rel="prefetch" href="/assets/dns.html-C4AmC10O.js" as="script"><link rel="prefetch" href="/assets/fakedns.html-Dt_OVf15.js" as="script"><link rel="prefetch" href="/assets/inbound.html-DthuP_GD.js" as="script"><link rel="prefetch" href="/assets/log.html-Ba4JRful.js" as="script"><link rel="prefetch" href="/assets/metrics.html-sU9TKb4w.js" as="script"><link rel="prefetch" href="/assets/observatory.html-DP8_DuwT.js" as="script"><link rel="prefetch" href="/assets/outbound.html-CRHC2_kR.js" as="script"><link rel="prefetch" href="/assets/policy.html-DQJISQQK.js" as="script"><link rel="prefetch" href="/assets/reverse.html-BpoQBPkv.js" as="script"><link rel="prefetch" href="/assets/routing.html-C2UC1mNS.js" as="script"><link rel="prefetch" href="/assets/stats.html-D1kiBVO-.js" as="script"><link rel="prefetch" href="/assets/transport.html-xc1pqX2M.js" as="script"><link rel="prefetch" href="/assets/index.html-Dm2Vh9q7.js" as="script"><link rel="prefetch" href="/assets/index.html-DpmyRGsw.js" as="script"><link rel="prefetch" href="/assets/command.html-Dzy25yVg.js" as="script"><link rel="prefetch" href="/assets/config.html-AEhazt8A.js" as="script"><link rel="prefetch" href="/assets/document.html-D-0WiJfv.js" as="script"><link rel="prefetch" href="/assets/install.html-DsO1o2jt.js" as="script"><link rel="prefetch" href="/assets/index.html--mPxSfMH.js" as="script"><link rel="prefetch" href="/assets/index.html-D5rzCjo4.js" as="script"><link rel="prefetch" href="/assets/browser_dialer.html-Cqx0w9M2.js" as="script"><link rel="prefetch" href="/assets/env.html-fNSLfzoB.js" as="script"><link rel="prefetch" href="/assets/fallback.html-B_QFCyup.js" as="script"><link rel="prefetch" href="/assets/multiple.html-DVxxkf3N.js" as="script"><link rel="prefetch" href="/assets/xtls.html-B_Gpq7DT.js" as="script"><link rel="prefetch" href="/assets/dokodemo.html-B_jK5Hcj.js" as="script"><link rel="prefetch" href="/assets/http.html-BeC4aLeh.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-DKR448d_.js" as="script"><link rel="prefetch" href="/assets/socks.html-CrozJFNr.js" as="script"><link rel="prefetch" href="/assets/trojan.html-xsFveSHZ.js" as="script"><link rel="prefetch" href="/assets/vless.html-1Ds0abQw.js" as="script"><link rel="prefetch" href="/assets/vmess.html-k5l1bHal.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-IeWem0xR.js" as="script"><link rel="prefetch" href="/assets/blackhole.html-iPPR2hLz.js" as="script"><link rel="prefetch" href="/assets/dns.html-Du4-Yz6F.js" as="script"><link rel="prefetch" href="/assets/freedom.html-DRFvW-jC.js" as="script"><link rel="prefetch" href="/assets/http.html-D_V4Vk_C.js" as="script"><link rel="prefetch" href="/assets/loopback.html-ClOZ-9j_.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-Ce7MGHIQ.js" as="script"><link rel="prefetch" href="/assets/socks.html-B7Cekajg.js" as="script"><link rel="prefetch" href="/assets/trojan.html-DarFmV-m.js" as="script"><link rel="prefetch" href="/assets/vless.html-B5WtphtX.js" as="script"><link rel="prefetch" href="/assets/vmess.html-jbtfWIfz.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-BYpkPsMj.js" as="script"><link rel="prefetch" href="/assets/grpc.html-DQJm1VG0.js" as="script"><link rel="prefetch" href="/assets/h2.html-IoTEuvC3.js" as="script"><link rel="prefetch" href="/assets/httpupgrade.html-DlED5dtl.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-DkTyXZpa.js" as="script"><link rel="prefetch" href="/assets/splithttp.html-Cvt0mN66.js" as="script"><link rel="prefetch" href="/assets/tcp.html-DXta8T0S.js" as="script"><link rel="prefetch" href="/assets/websocket.html-NZ9IIjfX.js" as="script"><link rel="prefetch" href="/assets/compile.html-CoT8T1g8.js" as="script"><link rel="prefetch" href="/assets/design.html-D39PMOrw.js" as="script"><link rel="prefetch" href="/assets/guide.html-B9TFLuKR.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-D_ymTUcM.js" as="script"><link rel="prefetch" href="/assets/muxcool.html-Cv1jgL0I.js" as="script"><link rel="prefetch" href="/assets/vless.html-CE176PNs.js" as="script"><link rel="prefetch" href="/assets/vmess.html-C799ZA-s.js" as="script"><link rel="prefetch" href="/assets/index.html-Bi6B2w76.js" as="script"><link rel="prefetch" href="/assets/ch01-preface.html-BprcjZgm.js" as="script"><link rel="prefetch" href="/assets/ch02-preparation.html-n4kyd-h2.js" as="script"><link rel="prefetch" href="/assets/ch03-ssh.html-W8f9sK3d.js" as="script"><link rel="prefetch" href="/assets/ch04-security.html-C1-XqSjf.js" as="script"><link rel="prefetch" href="/assets/ch05-webpage.html-rK45mwK9.js" as="script"><link rel="prefetch" href="/assets/ch06-certificates.html-C-CHhSwb.js" as="script"><link rel="prefetch" href="/assets/ch07-xray-server.html-BAi2NyJS.js" as="script"><link rel="prefetch" href="/assets/ch08-xray-clients.html-CqGtiJmv.js" as="script"><link rel="prefetch" href="/assets/ch09-appendix.html-BNGOx88f.js" as="script"><link rel="prefetch" href="/assets/index.html-BXJo-8CH.js" as="script"><link rel="prefetch" href="/assets/fallbacks-lv1.html-BpIoilMD.js" as="script"><link rel="prefetch" href="/assets/fallbacks-with-sni.html-Beo4Le-3.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part1.html-C0pnqjmP.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part2.html-DoWfHvnX.js" as="script"><link rel="prefetch" href="/assets/work.html-DKt7a1lt.js" as="script"><link rel="prefetch" href="/assets/index.html-C5lX-Qdv.js" as="script"><link rel="prefetch" href="/assets/iptables_gid.html-C-596WSF.js" as="script"><link rel="prefetch" href="/assets/nginx_or_haproxy_tls_tunnel.html-Bdm6E0ym.js" as="script"><link rel="prefetch" href="/assets/redirect.html-BgYqe3VB.js" as="script"><link rel="prefetch" href="/assets/tproxy.html-rznbjRkx.js" as="script"><link rel="prefetch" href="/assets/tproxy_ipv4_and_ipv6.html-B_4SCIVT.js" as="script"><link rel="prefetch" href="/assets/traffic_stats.html-C7Gdxihj.js" as="script"><link rel="prefetch" href="/assets/warp.html-BvJx21yi.js" as="script"><link rel="prefetch" href="/assets/news.html-CqsfreH3.js" as="script"><link rel="prefetch" href="/assets/index.html-BEODn4ZR.js" as="script"><link rel="prefetch" href="/assets/api.html-CYclXg04.js" as="script"><link rel="prefetch" href="/assets/dns.html-Brx8K17O.js" as="script"><link rel="prefetch" href="/assets/fakedns.html-DLEV5EYn.js" as="script"><link rel="prefetch" href="/assets/inbound.html-B2BxKKx4.js" as="script"><link rel="prefetch" href="/assets/log.html-DNB68a5V.js" as="script"><link rel="prefetch" href="/assets/metrics.html-BOvw9ckp.js" as="script"><link rel="prefetch" href="/assets/observatory.html-UkTDJBsW.js" as="script"><link rel="prefetch" href="/assets/outbound.html-IBMqsHd3.js" as="script"><link rel="prefetch" href="/assets/policy.html-D5ShOhXr.js" as="script"><link rel="prefetch" href="/assets/reverse.html-CU-NcXU6.js" as="script"><link rel="prefetch" href="/assets/routing.html-CtPxF-ZE.js" as="script"><link rel="prefetch" href="/assets/stats.html-BT4jxPZm.js" as="script"><link rel="prefetch" href="/assets/transport.html-B_im9atm.js" as="script"><link rel="prefetch" href="/assets/index.html-BuYj01cT.js" as="script"><link rel="prefetch" href="/assets/index.html-CxK6CXje.js" as="script"><link rel="prefetch" href="/assets/command.html-C8_s9EYV.js" as="script"><link rel="prefetch" href="/assets/config.html-BXATVFXz.js" as="script"><link rel="prefetch" href="/assets/document.html-D_854TUo.js" as="script"><link rel="prefetch" href="/assets/install.html-DZ1_te88.js" as="script"><link rel="prefetch" href="/assets/news.html-BpNM7HY0.js" as="script"><link rel="prefetch" href="/assets/index.html-8pCO8NYP.js" as="script"><link rel="prefetch" href="/assets/api.html-MKJHVeGf.js" as="script"><link rel="prefetch" href="/assets/dns.html-yCmciU43.js" as="script"><link rel="prefetch" href="/assets/fakedns.html-C8nY5xo7.js" as="script"><link rel="prefetch" href="/assets/inbound.html-C3LKUJUy.js" as="script"><link rel="prefetch" href="/assets/log.html-CN5KDnUQ.js" as="script"><link rel="prefetch" href="/assets/metrics.html-B1DCs3L0.js" as="script"><link rel="prefetch" href="/assets/observatory.html-OdYOk2HB.js" as="script"><link rel="prefetch" href="/assets/outbound.html-B19wmG8g.js" as="script"><link rel="prefetch" href="/assets/policy.html-2mJu-mF8.js" as="script"><link rel="prefetch" href="/assets/reverse.html-CJwYe2ZP.js" as="script"><link rel="prefetch" href="/assets/routing.html-BNkrRImR.js" as="script"><link rel="prefetch" href="/assets/stats.html-D05G0x-J.js" as="script"><link rel="prefetch" href="/assets/transport.html-Cw52Q08H.js" as="script"><link rel="prefetch" href="/assets/index.html-DujMvdpO.js" as="script"><link rel="prefetch" href="/assets/index.html-C-rm2aw7.js" as="script"><link rel="prefetch" href="/assets/command.html-Cbt1WrCu.js" as="script"><link rel="prefetch" href="/assets/config.html-Vk6vCut0.js" as="script"><link rel="prefetch" href="/assets/document.html-aBUAAXpC.js" as="script"><link rel="prefetch" href="/assets/install.html-Z3JqnOXl.js" as="script"><link rel="prefetch" href="/assets/transparent_proxy.html-ByMrjjJI.js" as="script"><link rel="prefetch" href="/assets/browser_dialer.html-ChYuBCG4.js" as="script"><link rel="prefetch" href="/assets/env.html-CLLhYr6c.js" as="script"><link rel="prefetch" href="/assets/fallback.html-D4tDnF9P.js" as="script"><link rel="prefetch" href="/assets/multiple.html-Cy9O5Sdh.js" as="script"><link rel="prefetch" href="/assets/xtls.html-Bf4LhDHJ.js" as="script"><link rel="prefetch" href="/assets/dokodemo.html-GYVS2vTj.js" as="script"><link rel="prefetch" href="/assets/http.html-DdibWR_L.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-Cqhu2NbZ.js" as="script"><link rel="prefetch" href="/assets/socks.html-heIxflih.js" as="script"><link rel="prefetch" href="/assets/trojan.html-DEep0bFm.js" as="script"><link rel="prefetch" href="/assets/vless.html-DSx3XeQz.js" as="script"><link rel="prefetch" href="/assets/vmess.html-DoKg4YRN.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-MrSOcavM.js" as="script"><link rel="prefetch" href="/assets/blackhole.html-CFQennhJ.js" as="script"><link rel="prefetch" href="/assets/dns.html-Cy8iEiZx.js" as="script"><link rel="prefetch" href="/assets/freedom.html-CtsjQnxk.js" as="script"><link rel="prefetch" href="/assets/http.html-DaChxPV7.js" as="script"><link rel="prefetch" href="/assets/loopback.html-EwdYpMxR.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-D0WVxp3R.js" as="script"><link rel="prefetch" href="/assets/socks.html-C2_XaSvz.js" as="script"><link rel="prefetch" href="/assets/trojan.html-BoUPCxA_.js" as="script"><link rel="prefetch" href="/assets/vless.html-6BJCTZgc.js" as="script"><link rel="prefetch" href="/assets/vmess.html-DEV868i6.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-Ca-mS3CX.js" as="script"><link rel="prefetch" href="/assets/grpc.html-ea1bjRO_.js" as="script"><link rel="prefetch" href="/assets/h2.html-CZRUV2ce.js" as="script"><link rel="prefetch" href="/assets/httpupgrade.html-BiXWcBPG.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-By4jiHwx.js" as="script"><link rel="prefetch" href="/assets/splithttp.html-DkK3pW32.js" as="script"><link rel="prefetch" href="/assets/tcp.html-D4te8CUW.js" as="script"><link rel="prefetch" href="/assets/websocket.html-D_esxx03.js" as="script"><link rel="prefetch" href="/assets/compile.html-Ded9j-u0.js" as="script"><link rel="prefetch" href="/assets/design.html-DkIE5dhe.js" as="script"><link rel="prefetch" href="/assets/guide.html-DrP0PXkV.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-a0NHfB18.js" as="script"><link rel="prefetch" href="/assets/muxcool.html-vyUzo21-.js" as="script"><link rel="prefetch" href="/assets/vless.html-CzDkOXbq.js" as="script"><link rel="prefetch" href="/assets/vmess.html-Dp7NLTdU.js" as="script"><link rel="prefetch" href="/assets/index.html-CP3ve7WB.js" as="script"><link rel="prefetch" href="/assets/ch01-preface.html-DhqYx1PX.js" as="script"><link rel="prefetch" href="/assets/ch02-preparation.html-DSIw2iEj.js" as="script"><link rel="prefetch" href="/assets/ch03-ssh.html-CnvlNJB1.js" as="script"><link rel="prefetch" href="/assets/ch04-security.html-Q21JX195.js" as="script"><link rel="prefetch" href="/assets/ch05-webpage.html-Bx8TsdgJ.js" as="script"><link rel="prefetch" href="/assets/ch06-certificates.html-Bhzf6yLq.js" as="script"><link rel="prefetch" href="/assets/ch08-xray-clients.html-Wo_fkIco.js" as="script"><link rel="prefetch" href="/assets/ch09-appendix.html-xB36q80h.js" as="script"><link rel="prefetch" href="/assets/index.html-D3eDKGcq.js" as="script"><link rel="prefetch" href="/assets/fallbacks-lv1.html-K8S40iYS.js" as="script"><link rel="prefetch" href="/assets/fallbacks-with-sni.html-tui-N2Js.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part1.html-Bj5JLTgs.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part2.html-XjdNrzdu.js" as="script"><link rel="prefetch" href="/assets/work.html-BF1c7e3s.js" as="script"><link rel="prefetch" href="/assets/index.html-fZeLj3dk.js" as="script"><link rel="prefetch" href="/assets/iptables_gid.html-Du2kiIVz.js" as="script"><link rel="prefetch" href="/assets/nginx_or_haproxy_tls_tunnel.html-BGwaThEn.js" as="script"><link rel="prefetch" href="/assets/redirect.html-DAx3BuT8.js" as="script"><link rel="prefetch" href="/assets/tproxy.html-CzuVBZ63.js" as="script"><link rel="prefetch" href="/assets/tproxy_ipv4_and_ipv6.html-CKjqGdS0.js" as="script"><link rel="prefetch" href="/assets/traffic_stats.html-BIF1KYYv.js" as="script"><link rel="prefetch" href="/assets/warp.html-Dl4Evykl.js" as="script"><link rel="prefetch" href="/assets/browser_dialer.html-Uwkci8Lx.js" as="script"><link rel="prefetch" href="/assets/env.html-Bh5C9LY_.js" as="script"><link rel="prefetch" href="/assets/fallback.html-DOkbtV_L.js" as="script"><link rel="prefetch" href="/assets/multiple.html-BUSZRhtQ.js" as="script"><link rel="prefetch" href="/assets/xtls.html-CbcpAEbX.js" as="script"><link rel="prefetch" href="/assets/dokodemo.html-BZQRZgyH.js" as="script"><link rel="prefetch" href="/assets/http.html-Cg6hy1xJ.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-CCbFVRMB.js" as="script"><link rel="prefetch" href="/assets/socks.html-CzmSBWeQ.js" as="script"><link rel="prefetch" href="/assets/trojan.html-4HAl_oGB.js" as="script"><link rel="prefetch" href="/assets/vless.html-DEd0ElCC.js" as="script"><link rel="prefetch" href="/assets/vmess.html-D4PigC6P.js" as="script"><link rel="prefetch" href="/assets/blackhole.html-BAeJhFCG.js" as="script"><link rel="prefetch" href="/assets/dns.html-Cxb_ZPXm.js" as="script"><link rel="prefetch" href="/assets/freedom.html-B5UQjDhg.js" as="script"><link rel="prefetch" href="/assets/http.html-Cl_WNrtZ.js" as="script"><link rel="prefetch" href="/assets/loopback.html-DU0bxJen.js" as="script"><link rel="prefetch" href="/assets/shadowsocks.html-C-ZbxMNs.js" as="script"><link rel="prefetch" href="/assets/socks.html-BsqHE_19.js" as="script"><link rel="prefetch" href="/assets/trojan.html-BC60d0ju.js" as="script"><link rel="prefetch" href="/assets/vless.html-CZsfIHgu.js" as="script"><link rel="prefetch" href="/assets/vmess.html-D7ERFJlZ.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-B8fLtxEj.js" as="script"><link rel="prefetch" href="/assets/grpc.html-CyASmo81.js" as="script"><link rel="prefetch" href="/assets/h2.html-plnh8Wy9.js" as="script"><link rel="prefetch" href="/assets/httpupgrade.html-B61RF-jU.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-BEqzh990.js" as="script"><link rel="prefetch" href="/assets/splithttp.html-CDaIGrjL.js" as="script"><link rel="prefetch" href="/assets/tcp.html-ehYfDVtg.js" as="script"><link rel="prefetch" href="/assets/websocket.html-8JYcDmlp.js" as="script"><link rel="prefetch" href="/assets/compile.html-DZOOraV0.js" as="script"><link rel="prefetch" href="/assets/design.html-C6jiOKH8.js" as="script"><link rel="prefetch" href="/assets/guide.html-_ImLQ5Xb.js" as="script"><link rel="prefetch" href="/assets/mkcp.html-_Of-72iz.js" as="script"><link rel="prefetch" href="/assets/muxcool.html-CS6GAsKW.js" as="script"><link rel="prefetch" href="/assets/vless.html-BarRpMER.js" as="script"><link rel="prefetch" href="/assets/vmess.html-DWMUzrHp.js" as="script"><link rel="prefetch" href="/assets/index.html-BQDu3R2b.js" as="script"><link rel="prefetch" href="/assets/ch01-preface.html-kw9cJUda.js" as="script"><link rel="prefetch" href="/assets/ch02-preparation.html-CO4UTiVk.js" as="script"><link rel="prefetch" href="/assets/ch03-ssh.html-BR_ySGiN.js" as="script"><link rel="prefetch" href="/assets/ch04-security.html-Z_ojYTvR.js" as="script"><link rel="prefetch" href="/assets/ch05-webpage.html-Clic4jXq.js" as="script"><link rel="prefetch" href="/assets/ch06-certificates.html-I4NqXEBS.js" as="script"><link rel="prefetch" href="/assets/ch07-xray-server.html-D8k8v9Yn.js" as="script"><link rel="prefetch" href="/assets/ch08-xray-clients.html-Bjx19F2D.js" as="script"><link rel="prefetch" href="/assets/ch09-appendix.html-BALof5hK.js" as="script"><link rel="prefetch" href="/assets/index.html-B3la3OFh.js" as="script"><link rel="prefetch" href="/assets/fallbacks-lv1.html-DDRf9P-t.js" as="script"><link rel="prefetch" href="/assets/fallbacks-with-sni.html-YPSsHXz_.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part1.html-IOlasHAA.js" as="script"><link rel="prefetch" href="/assets/routing-lv1-part2.html-BavfCPib.js" as="script"><link rel="prefetch" href="/assets/work.html-BuQK8vI0.js" as="script"><link rel="prefetch" href="/assets/index.html-Dt4bI0KS.js" as="script"><link rel="prefetch" href="/assets/iptables_gid.html-C5XFld6Z.js" as="script"><link rel="prefetch" href="/assets/nginx_or_haproxy_tls_tunnel.html-CTqmgISY.js" as="script"><link rel="prefetch" href="/assets/redirect.html-seSevWai.js" as="script"><link rel="prefetch" href="/assets/tproxy.html-CfAd6Dju.js" as="script"><link rel="prefetch" href="/assets/tproxy_ipv4_and_ipv6.html-69dR6W-E.js" as="script"><link rel="prefetch" href="/assets/traffic_stats.html-B417-kqC.js" as="script"><link rel="prefetch" href="/assets/warp.html-B_0Xd7lU.js" as="script"><link rel="prefetch" href="/assets/transparent_proxy.html-DF3OoiLv.js" as="script"><link rel="prefetch" href="/assets/transparent_proxy.html-D5aZpP9q.js" as="script"><link rel="prefetch" href="/assets/404.html-CWjZEujQ.js" as="script"><link rel="prefetch" href="/assets/wireguard.html-gOv205NZ.js" as="script"><link rel="prefetch" href="/assets/Mermaid-DkCb5BcH.js" as="script"><link rel="prefetch" href="/assets/Tab-BzqssOag.js" as="script"><link rel="prefetch" href="/assets/Tabs-BXVgA8N2.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle side bar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/en/" class=""><!----><span class="site-name" aria-hidden="true">Project X</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><a href="/en" class="router-link-active" aria-label="Homepage"><!--[--><!--]--> Homepage <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en/about/news.md" class="" aria-label="Website History"><!--[--><!--]--> Website History <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en/config/" class="" aria-label="Config Reference"><!--[--><!--]--> Config Reference <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en/development/" class="" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en/document/" class="router-link-active" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="English / Change language"><span class="title">🌎 English / Change language</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="English / Change language"><span class="title">🌎 English / Change language</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/document/level-0/ch07-xray-server.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English (WIP)"><!--[--><!--]--> English (WIP) <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ru/document/level-0/ch07-xray-server.html" class="" aria-label="Русский (WIP)"><!--[--><!--]--> Русский (WIP) <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/xtls/xray-core" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new tag</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><a href="/en" class="router-link-active" aria-label="Homepage"><!--[--><!--]--> Homepage <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en/about/news.md" class="" aria-label="Website History"><!--[--><!--]--> Website History <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en/config/" class="" aria-label="Config Reference"><!--[--><!--]--> Config Reference <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en/development/" class="" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en/document/" class="router-link-active" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="English / Change language"><span class="title">🌎 English / Change language</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="English / Change language"><span class="title">🌎 English / Change language</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/document/level-0/ch07-xray-server.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English (WIP)"><!--[--><!--]--> English (WIP) <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ru/document/level-0/ch07-xray-server.html" class="" aria-label="Русский (WIP)"><!--[--><!--]--> Русский (WIP) <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/xtls/xray-core" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new tag</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Quick Start <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/en/document/" class="router-link-active sidebar-item" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a><!----></li><li><a href="/en/document/install.html" class="sidebar-item" aria-label="Download and Install"><!--[--><!--]--> Download and Install <!--[--><!--]--></a><!----></li><li><a href="/en/document/config.html" class="sidebar-item" aria-label="Configure and Run"><!--[--><!--]--> Configure and Run <!--[--><!--]--></a><!----></li><li><a href="/en/document/command.html" class="sidebar-item" aria-label="Command Parameters"><!--[--><!--]--> Command Parameters <!--[--><!--]--></a><!----></li><li><a href="/en/document/document.html" class="sidebar-item" aria-label="Contribute to Project X&#39;s Document"><!--[--><!--]--> Contribute to Project X&#39;s Document <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Beginner Tutorial <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/en/document/level-0/" class="router-link-active sidebar-item" aria-label="Plain and Simple Language"><!--[--><!--]--> Plain and Simple Language <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-0/ch01-preface.html" class="sidebar-item" aria-label="[Chapter 1] Simple and Plain Language"><!--[--><!--]--> [Chapter 1] Simple and Plain Language <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-0/ch02-preparation.html" class="sidebar-item" aria-label="[Chapter 2] Preparation of Raw Materials"><!--[--><!--]--> [Chapter 2] Preparation of Raw Materials <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-0/ch03-ssh.html" class="sidebar-item" aria-label="[Chapter 3] Remote Login"><!--[--><!--]--> [Chapter 3] Remote Login <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-0/ch04-security.html" class="sidebar-item" aria-label="[Chapter 4] Security and Protection"><!--[--><!--]--> [Chapter 4] Security and Protection <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-0/ch05-webpage.html" class="sidebar-item" aria-label="Chapter 5: Website Building"><!--[--><!--]--> Chapter 5: Website Building <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-0/ch06-certificates.html" class="sidebar-item" aria-label="[Chapter 6] Certificate Management"><!--[--><!--]--> [Chapter 6] Certificate Management <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="[Chapter 7]Xray Server"><!--[--><!--]--> [Chapter 7]Xray Server <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html#_7-1-study-broadly-act-decisively" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.1 Study broadly, Act decisively."><!--[--><!--]--> 7.1 Study broadly, Act decisively. <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html#_7-2-install-xray" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2 Install Xray"><!--[--><!--]--> 7.2 Install Xray <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html#_7-3-configure-tls-certificate-for-xray" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.3 Configure TLS certificate for Xray"><!--[--><!--]--> 7.3 Configure TLS certificate for Xray <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html#_7-4-configure-xray" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.4 Configure Xray"><!--[--><!--]--> 7.4 Configure Xray <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html#_7-5-start-xray-service-and-check-the-service-status" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.5 Start Xray service! ! (and check the service status)"><!--[--><!--]--> 7.5 Start Xray service! ! (and check the service status) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html#_7-6-review-systemd-for-basic-service-management" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.6 Review systemd for basic service management"><!--[--><!--]--> 7.6 Review systemd for basic service management <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html#_7-7-server-optimization-1-enable-bbr" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.7 Server Optimization 1: Enable BBR"><!--[--><!--]--> 7.7 Server Optimization 1: Enable BBR <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html#_7-8-server-optimization-2-enable-http-to-automatically-redirect-to-https" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.8 Server Optimization 2: Enable HTTP to automatically redirect to HTTPS"><!--[--><!--]--> 7.8 Server Optimization 2: Enable HTTP to automatically redirect to HTTPS <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html#_7-9-server-optimization-3-more-fallbacks" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.9 Server Optimization 3: More Fallbacks"><!--[--><!--]--> 7.9 Server Optimization 3: More Fallbacks <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html#_7-10-your-progress" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.10 Your progress"><!--[--><!--]--> 7.10 Your progress <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en/document/level-0/ch07-xray-server.html#_7-11-important-errata" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.11 Important errata"><!--[--><!--]--> 7.11 Important errata <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/en/document/level-0/ch08-xray-clients.html" class="sidebar-item" aria-label="【第 8 章】Xray 客户端篇"><!--[--><!--]--> 【第 8 章】Xray 客户端篇 <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-0/ch09-appendix.html" class="sidebar-item" aria-label="【第 9 章】附录"><!--[--><!--]--> 【第 9 章】附录 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Getting Started Tips <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/en/document/level-1/" class="sidebar-item" aria-label="Beginner&#39;s Tips"><!--[--><!--]--> Beginner&#39;s Tips <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-1/fallbacks-lv1.html" class="sidebar-item" aria-label="回落 (fallbacks) 功能简析"><!--[--><!--]--> 回落 (fallbacks) 功能简析 <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-1/routing-lv1-part1.html" class="sidebar-item" aria-label="路由 (routing) 功能简析（上）"><!--[--><!--]--> 路由 (routing) 功能简析（上） <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-1/routing-lv1-part2.html" class="sidebar-item" aria-label="路由 (routing) 功能简析（下）"><!--[--><!--]--> 路由 (routing) 功能简析（下） <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-1/work.html" class="sidebar-item" aria-label="Xray 的工作模式"><!--[--><!--]--> Xray 的工作模式 <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-1/fallbacks-with-sni.html" class="sidebar-item" aria-label="SNI fallback"><!--[--><!--]--> SNI fallback <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Advanced Documentation <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/en/document/level-2/" class="sidebar-item" aria-label="Advanced Documentation"><!--[--><!--]--> Advanced Documentation <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-2/transparent_proxy/transparent_proxy.html" class="sidebar-item" aria-label="透明代理入门"><!--[--><!--]--> 透明代理入门 <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-2/tproxy.html" class="sidebar-item" aria-label="TProxy 透明代理"><!--[--><!--]--> TProxy 透明代理 <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-2/tproxy_ipv4_and_ipv6.html" class="sidebar-item" aria-label="TProxy 透明代理 (ipv4 and ipv6)"><!--[--><!--]--> TProxy 透明代理 (ipv4 and ipv6) <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-2/nginx_or_haproxy_tls_tunnel.html" class="sidebar-item" aria-label="Nginx 或 Haproxy 搭建 TLS 隧道隐藏指纹"><!--[--><!--]--> Nginx 或 Haproxy 搭建 TLS 隧道隐藏指纹 <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-2/iptables_gid.html" class="sidebar-item" aria-label="Transparent proxy via GID"><!--[--><!--]--> Transparent proxy via GID <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-2/redirect.html" class="sidebar-item" aria-label="出站流量重定向"><!--[--><!--]--> 出站流量重定向 <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-2/warp.html" class="sidebar-item" aria-label="Enhancing Proxy Security with Cloudflare Warp"><!--[--><!--]--> Enhancing Proxy Security with Cloudflare Warp <!--[--><!--]--></a><!----></li><li><a href="/en/document/level-2/traffic_stats.html" class="sidebar-item" aria-label="流量统计"><!--[--><!--]--> 流量统计 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><!--v-if--><h1 id="chapter-7-xray-server" tabindex="-1"><a class="header-anchor" href="#chapter-7-xray-server"><span>[Chapter 7]Xray Server</span></a></h1><h2 id="_7-1-study-broadly-act-decisively" tabindex="-1"><a class="header-anchor" href="#_7-1-study-broadly-act-decisively"><span>7.1 Study broadly, Act decisively.</span></a></h2><p>During the writing of this article, the boss joked: Your tutorial has been serialized for 6 chapters and has not yet reached Xray. People who don’t know would think that you are a &quot;hand-in-hand teaching you to build a website&quot; tutorial. (I can&#39;t refute it.jpg!)</p><p>In fact, this structure is my decision after much thinking. After all, only by laying a solid foundation can you quickly surpass others with half the effort. I saw many newcomers in the group who can&#39;t even use <code>nano</code> correctly, nor can they use <code>WinSCP</code>. The <code>config.json</code> edited by remote handwriting is naturally full of errors, and even error checking becomes difficult.</p><div class="custom-container warning"><p class="custom-container-title">Warning</p><p>After the preparation of the first 6 chapters, you have already climbed over several mountains with me, such as basic Linux operations, VPS remote management, web page construction, domain name management, certificate application, etc. Do you think it is actually very simple when you look back? Now that we have such solid preparations, we will have a light feeling of [smooth success] when installing and configuring Xray.</p></div><p>The things to do next are very simple:</p><ol><li>Installation</li><li>Configuration (such as installing TLS certificates, <code>config.json</code>)</li><li>Run</li><li>Optimization (such as updating the kernel, enabling <code>bbr</code>, automatically redirecting <code>http</code> visits to <code>https</code>, etc.)</li></ol><h2 id="_7-2-install-xray" tabindex="-1"><a class="header-anchor" href="#_7-2-install-xray"><span>7.2 Install Xray</span></a></h2><p>First of all, the official carrier of Xray is the binary program generated by the open source project <a href="https://github.com/XTLS/Xray-core" target="_blank" rel="noopener noreferrer">xray-core<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new tag</span></span></a> (Open sourced with License <code>MPL 2.0</code> ). If you put this binary on the server and run it, it is the server side; if you download it to the local computer and run it, it is the client side. The main difference comes from [configuration].</p><p>When installing, it is very simple and direct to use the official installation script directly. It provides a variety of installation options. If you are interested, you can go to the official <a href="https://github.com/XTLS/Xray-install" target="_blank" rel="noopener noreferrer">installation script repository<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new tag</span></span></a> to see the script instructions. <strong>This article uses the [non-root user] installation mode</strong>.</p><p>When writing this article, the installation script had some minor bugs when using a non-root account, so I decided to separate these steps and explain the deletion command under Linux.</p><ol><li><p>Basic Linux commands for beginners:</p><table><thead><tr><th style="text-align:center;">Number</th><th style="text-align:center;">Command name</th><th style="text-align:center;">Command description</th></tr></thead><tbody><tr><td style="text-align:center;"><code>cmd-14</code></td><td style="text-align:center;"><code>rm</code></td><td style="text-align:center;">delete</td></tr></tbody></table></li><li><p>Download the installation script:</p></li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">wget</span> https://github.com/XTLS/Xray-install/raw/main/install-release.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>Execute the installation command</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">bash</span> install-release.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>You can delete the script after use</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">rm</span> ~/install-release.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">Warning</p><p>When you use the <code>rm</code> command to delete files, the default is to delete the files in the current folder. However, <strong>I still wrote the full path</strong>: <code>~/install-release.sh</code>, which is a safety habit I have when using <code>rm</code>, and it is also what I want to emphasize after I divide the installation into several steps. If you have heard some jokes like &quot;Programmers go from deleting libraries to running away&quot;, you probably know why.</p></div><ol start="5"><li>The complete process is demonstrated as follows:</li></ol><p><img src="/assets/ch07-img01-xray-install-6RUithnp.gif" alt="Xray server installation process demonstration"></p><h2 id="_7-3-configure-tls-certificate-for-xray" tabindex="-1"><a class="header-anchor" href="#_7-3-configure-tls-certificate-for-xray"><span>7.3 Configure TLS certificate for Xray</span></a></h2><p>Although we have applied for TLS certificate before, according to the official instructions of <a href="https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E#3-copy%E5%AE%89%E8%A3%85-%E8%AF%81%E4%B9%A6" target="_blank" rel="noopener noreferrer"><code>acme.sh</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new tag</span></span></a>, it is not recommended to use the applied certificate directly. The correct way is to use the <code>--install-cert</code> command to install it for the required program. Let&#39;s install the certificate for <code>xray-core</code> now.</p><ol><li>In order to avoid various potential permission problems of non-root accounts, we create a certificate folder under the vpsadmin account</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> ~/xray_cert
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>Use <code>--install-cert</code> of <code>acme.sh</code> to correctly install (copy) the certificate file</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>acme.sh --install-cert <span class="token parameter variable">-d</span> secondary domain name.your domain name.com <span class="token parameter variable">--ecc</span> <span class="token punctuation">\</span>
--fullchain-file ~/xray_cert/xray.crt <span class="token punctuation">\</span>
--key-file ~/xray_cert/xray.key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>The <code>xray.key</code> file is not readable by other users by default, so it needs to be given readability</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">chmod</span> +r ~/xray_cert/xray.key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>The process is relatively simple, so no animated picture:</li></ol><p><img src="/assets/ch07-img02-xray-cert-install-BVo1KeA2.png" alt="Xray server installation process demonstration"></p><ol start="5"><li><p><code>acme.sh</code> will check the certificate every 60 days and automatically renew the expiring certificate. But as far as I know, it does not automatically install the new certificate to <code>xray-core</code>, so we need to add a system automatic periodic task to complete this step.</p><ol><li><p>Basic Linux commands for beginners:</p><table><thead><tr><th style="text-align:center;">Number</th><th style="text-align:center;">Command name</th><th style="text-align:center;">Command description</th></tr></thead><tbody><tr><td style="text-align:center;"><code>cmd-15</code></td><td style="text-align:center;"><code>crontab -e</code></td><td style="text-align:center;">Edit the current user&#39;s scheduled task</td></tr></tbody></table></li><li><p>Create a script file (<code>xray-cert-renew.sh</code>)</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">nano</span> ~/xray_cert/xray-cert-renew.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Copy the following content, remember to replace your real domain name, then save and exit</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

/home/vpsadmin/.acme.sh/acme.sh --install-cert <span class="token parameter variable">-d</span> a-name.yourdomain.com <span class="token parameter variable">--ecc</span> --fullchain-file /home/vpsadmin/xray_cert/xray.crt --key-file /home/vpsadmin/xray_cert/xray.key
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Xray Certificates Renewed&quot;</span>

<span class="token function">chmod</span> +r /home/vpsadmin/xray_cert/xray.key
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Read Permission Granted for Private Key&quot;</span>

<span class="token function">sudo</span> systemctl restart xray
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Xray Restarted&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><div class="custom-container warning"><p class="custom-container-title">Warning</p><p>As you have reminded, <code>acme.sh</code> has a <code>reloadcmd</code> command that can automatically execute a specific command when the certificate is updated, so you can specify to automatically install the certificate for <code>Xray</code>, but because <code>crontab</code> is a very useful and commonly used function in Linux, this article retains the <code>crontab</code> method to update the <code>Xray</code> certificate. (If you interested in <code>reloadcmd</code> can check out the <a href="https://github.com/acmesh-official/acme.sh" target="_blank" rel="noopener noreferrer">official documentation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new tag</span></span></a> of <code>acme.sh</code>)</p><p>In addition, when recording animated images, the script did not include a command to restart <code>Xray</code> because <code>Xray</code> plans to support the [Certificate Hot Update] function, which means that <code>Xray</code> will automatically identify certificate updates and reload certificates without manual restart. After the function is added, I will modify <code>config.json</code> appropriately to enable this setting and delete the restart command in the script.</p></div><ol start="4"><li><p>Add [executable] permissions to this file</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>chmod +x ~/xray_cert/xray-cert-renew.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Run <code>crontab -e</code> and add an automatic task [Automatically run <code>xray-cert-renew.sh</code> once a month] (Note that you should not add <code>sudo</code>, because we are adding an automatic task for the <code>vpsadmin</code> account. When you run it for the first time, you will be asked to choose an editor. Of course, choose the familiar <code>nano</code>!)</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">crontab</span> <span class="token parameter variable">-e</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Add the following content to the end of the file, save and exit.</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code># 1:00am, 1st day each month, run `xray-cert-renew.sh`
0 1 1 * * bash /home/vpsadmin/xray_cert/xray-cert-renew.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>The complete process is demonstrated as follows:</p><p><img src="/assets/ch07-img03-crontab-cert-renew-B_dwSLtg.gif" alt="Automatically install certificates for Xray every month"></p></li></ol></li></ol><h2 id="_7-4-configure-xray" tabindex="-1"><a class="header-anchor" href="#_7-4-configure-xray"><span>7.4 Configure Xray</span></a></h2><p>First, you can refer to the <a href="https://github.com/XTLS/Xray-examples" target="_blank" rel="noopener noreferrer">official VLESS configuration example<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new tag</span></span></a> for various configurations. This article will configure a simplest method based on the official example: [Single <code>VLESS</code> protocol inbound + <code>80</code> Port fallback], which meets the maximum speed and necessary security of most scenarios.</p><ol><li><p>Generate a legal <code>UUID</code> and save it for backup (<code>UUID</code> can be simply and roughly understood as an ID that is almost never repeated like a fingerprint)</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>xray uuid
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Create log files and folders for backup</p><ol><li><p>Basic Linux commands for beginners:</p><table><thead><tr><th style="text-align:center;">Number</th><th style="text-align:center;">Command name</th><th style="text-align:center;">Command description</th></tr></thead><tbody><tr><td style="text-align:center;"><code>cmd-16</code></td><td style="text-align:center;"><code>touch</code></td><td style="text-align:center;">Create a blank file</td></tr></tbody></table></li><li><p>Create a [log dedicated folder] in the <code>vpsadmin</code> folder</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> ~/xray_log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Generate the two required log files (access log, error log)</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">touch</span> ~/xray_log/access.log <span class="token operator">&amp;&amp;</span> <span class="token function">touch</span> ~/xray_log/error.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><div class="custom-container warning"><p class="custom-container-title">Warning</p><p>This location is not the standard log file location of <code>Xray</code>. It is placed here to avoid permission issues that cause trouble for new users. Once you are familiar with it, it is recommended to return to the default location: <code>/var/log/xray/access.log</code> and <code>/var/log/xray/error.log</code>.</p></div><ol start="4"><li>Because Xray is used by the nobody user by default, we need to allow other users to have &quot;write&quot; permissions (<code>*.log</code> means all files with the suffix <code>log</code>, and the efficiency advantage of the <code>CLI</code> interface gradually appears at this time)<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">chmod</span> a+w ~/xray_log/*.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol></li><li><p>Use <code>nano</code> to create the configuration file of <code>Xray</code></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /usr/local/etc/xray/config.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Copy all the files below and fill in the previously generated <code>UUID</code> into the 61st line <code>&quot;id&quot;: &quot;&quot;,</code>. (After filling in, it will look like <code>&quot;id&quot;: &quot;uuiduuid-uuid-uuid-uuid-uuiduuiduuid&quot;</code> ) This configuration file in this article adds my various verbose comments to help you understand the function of each configuration module.</p></li></ol><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token comment">// REFERENCE:</span>
<span class="token comment">// https://github.com/XTLS/Xray-examples</span>
<span class="token comment">// https://xtls.github.io/config/</span>
<span class="token comment">// Commonly used config files, whether server or client, have 5 parts. Plus Xiao Xiaobai&#39;s interpretation:</span>
<span class="token comment">// ┌─ 1*log Log settings - what to write in the log and where to write (there is evidence when errors occur)</span>
<span class="token comment">// ├─ 2_dns DNS-settings - how to check DNS (anti-DNS pollution, anti-peeping, avoid matching domestic and foreign sites to foreign servers, etc.)</span>
<span class="token comment">// ├─ 3_routing Diversion settings - how to classify and process traffic (whether to filter ads, whether to divert traffic domestically and internationally)</span>
<span class="token comment">// ├─ 4_inbounds Inbound settings - what traffic can flow into Xray</span>
<span class="token comment">// └─ 5_outbounds Outbound settings - where does the traffic out of Xray go</span>
<span class="token punctuation">{</span>
	<span class="token comment">// 1\_Log settings</span>
	<span class="token property">&quot;log&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;loglevel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">,</span> <span class="token comment">// content from less to more: &quot;none&quot;, &quot;error&quot;, &quot;warning&quot;, &quot;info&quot;, &quot;debug&quot;</span>
		<span class="token property">&quot;access&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/home/vpsadmin/xray_log/access.log&quot;</span><span class="token punctuation">,</span> <span class="token comment">// access record</span>
		<span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/home/vpsadmin/xray_log/error.log&quot;</span> <span class="token comment">// Error log</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 2_DNS settings</span>
	<span class="token property">&quot;dns&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;servers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;https+local://1.1.1.1/dns-query&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Prefer 1.1.1.1 DoH query, sacrificing speed but preventing ISP snooping</span>
			<span class="token string">&quot;localhost&quot;</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 3*Diversion settings</span>
	<span class="token property">&quot;routing&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;domainStrategy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IPIfNonMatch&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token comment">// 3.1 Prevent local server flow problems: such as intranet attacks or abuse, incorrect local loopbacks, etc.</span>
			<span class="token punctuation">{</span>
				<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
					<span class="token string">&quot;geoip:private&quot;</span> <span class="token comment">// Diversion condition: In the geoip file, the rule named &quot;private&quot; (local)</span>
				<span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token property">&quot;outboundTag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;block&quot;</span> <span class="token comment">// Diversion strategy: Hand over to the outbound &quot;block&quot; for processing (black hole shielding)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{</span>
				<span class="token comment">// 3.2 Prevent the server from connecting directly to China</span>
				<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;geoip:cn&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token property">&quot;outboundTag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;block&quot;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token comment">// 3.3 Block ads</span>
			<span class="token punctuation">{</span>
				<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;domain&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
					<span class="token string">&quot;geosite:category-ads-all&quot;</span> <span class="token comment">// Diversion conditions: In the geosite file, the rule named &quot;category-ads-all&quot; (various advertising domain names)</span>
				<span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token property">&quot;outboundTag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;block&quot;</span> <span class="token comment">// Diversion strategy: Hand it over to the outbound &quot;block&quot; for processing (black hole shielding)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 4* Inbound settings</span>
	<span class="token comment">// 4.1 Here is only the simplest vless+xtls inbound, because this is the most powerful mode of Xray. If you need other, please add it according to the template.</span>
	<span class="token property">&quot;inbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
		<span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">443</span><span class="token punctuation">,</span>
		<span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vless&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;clients&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
				<span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Fill in your UUID</span>
				<span class="token property">&quot;flow&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xtls-rprx-vision&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;level&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
				<span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vpsadmin@yourdomain.com&quot;</span>
			<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token property">&quot;decryption&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;fallbacks&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
				<span class="token property">&quot;dest&quot;</span><span class="token operator">:</span> <span class="token number">80</span> <span class="token comment">// Fall back to anti-detection proxy by default</span>
			<span class="token punctuation">}</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token property">&quot;streamSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tcp&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;security&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tls&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;tlsSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token property">&quot;alpn&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http/1.1&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;certificates&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
					<span class="token property">&quot;certificateFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/home/vpsadmin/xray_cert/xray.crt&quot;</span><span class="token punctuation">,</span>
					<span class="token property">&quot;keyFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/home/vpsadmin/xray_cert/xray.key&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">]</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token comment">// 5*Outbound settings</span>
	<span class="token property">&quot;outbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token comment">// 5.1 The first outbound is the default rule, freedom is a direct connection to the outside (vps is already an external network, so it is a direct connection)</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;direct&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;freedom&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// 5.2 Blocking rules, blackhole protocol is to import traffic into the black hole (blocking)</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;blackhole&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>The complete process is demonstrated as follows: <img src="/assets/ch07-img04-xray-log-and-config-BP5ccZ8k.gif" alt="Create log file and  configuration file"></li></ol><h2 id="_7-5-start-xray-service-and-check-the-service-status" tabindex="-1"><a class="header-anchor" href="#_7-5-start-xray-service-and-check-the-service-status"><span>7.5 Start Xray service! ! (and check the service status)</span></a></h2><p>If you follow this article step by step, you have actually avoided the two most common pitfalls of <strong>insufficient log file permissions</strong> and <strong>insufficient certificate file permissions</strong>. Now running <code>Xray</code> should be very smooth.</p><ol><li>Enter the following command and enjoy the historic moment of starting <code>Xray</code>! ! !</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start xray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>Just <code>start</code> does not determine whether the Xray service has been successfully started. To determine its status, use the following command.</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl status xray

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Do you see the green, pleasant <code>active (running)</code>? It means that <code>Xray</code> is running correctly</p><ol start="3"><li>The complete process is demonstrated as follows:</li></ol><p><img src="/assets/ch07-img05-xray-start-and-status-Cl6yKbrT.gif" alt="Start and check the running status of Xray"></p><h2 id="_7-6-review-systemd-for-basic-service-management" tabindex="-1"><a class="header-anchor" href="#_7-6-review-systemd-for-basic-service-management"><span>7.6 Review <code>systemd</code> for basic service management</span></a></h2><p>So far, we have used <code>systemctl</code> related commands such as <code>start</code>, <code>status</code>, <code>reload</code>, etc. These are general commands based on the <code>systemd</code> management module to manage various services in the Linux system. Now it is a good time to get familiar with several other related commands.</p><ol><li>If you need to temporarily shut down the <code>Xray</code> service, use the <code>stop</code> command</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl stop xray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>If you need to restart the <code>Xray</code> service, use the <code>restart</code> command</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl restart xray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>If you need to disable the <code>Xray</code> service (disable Xray from running automatically after the computer is restarted), use the <code>disable</code> command</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl disable xray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>If you need to enable the <code>Xray</code> service (ensure that Xray runs automatically after the computer is restarted), use the <code>enable</code> command</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> xray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_7-7-server-optimization-1-enable-bbr" tabindex="-1"><a class="header-anchor" href="#_7-7-server-optimization-1-enable-bbr"><span>7.7 Server Optimization 1: Enable BBR</span></a></h2><ol><li>The legendary <code>BBR</code></li></ol><p>I believe that when you search for various scientific Internet technologies, you must have heard of the thing <code>bbr</code> more than once. With the exaggeration of various blogs, people feel that it is magical. There are also a lot of derivatives such as <code>bbrplus</code>, <code>bbr2</code>, <code>magic bbr</code>, etc. It&#39;s like a magic, which can turn a poorly routed lines become dedicated connections.</p><p>So, what is this thing? Is it useful? Which version should I use?</p><ol start="2"><li>The actual <code>BBR</code></li></ol><p><strong>BBR</strong> = <strong>B</strong>ottleneck <strong>B</strong>andwidth and <strong>R</strong>ound-trip propagation time, which is a <strong>congestion control algorithm</strong> of TCP. A simple and rough understanding is <strong>traffic management of data traffic</strong> : When the road is no longer congested, each car can naturally maintain a faster speed.</p><p>So is it useful? Generally speaking, there will be a perceptible difference between <code>with BBR</code> and <code>without BBR</code> (there will be some improvements in speed, stability, and latency), so <strong>[It is highly recommended to turn on <code>BBR</code>]</strong>.</p><p>But after it is enabled, the difference between <code>BBR</code> in <code>4.x</code> and <code>5.x</code> is often subtle and subjective, and the decisive factor that causes the difference in experience is still the line quality. So <strong>[Don&#39;t worry about the version, don&#39;t blindly chase the new, just follow your distribution to update the kernel]</strong></p><ol start="3"><li>Are <code>bbrplus</code>, <code>bbr2</code>, <code>magic bbr</code> and other versions that sound cool better?</li></ol><p>In a word: **No! Don&#39;t use these! These names are just to attract attention! **</p><p>The update and release of <code>BBR</code> are all carried out in accordance with the Linux kernel (<code>Kernel</code>). In other words, as long as you use a relatively new kernel, you will naturally use the new version of <code>BBR</code>.</p><p>And these things with cool names are, to put it bluntly, kernels that have not yet been officially released and are still in the testing stage and their corresponding <code>BBR</code> versions. These scripts are just the first to enable by downloading the preview version of the kernel (even a third-party magic kernel).</p><p>The stability of the kernel is the cornerstone of the stable operation of a server. <strong>The slight performance difference brought by the BBR beta is definitely not worth changing to an unstable Kernel. 】</strong> Please choose the latest kernel supported by your Linux distribution, so as to maximize the long-term stability and compatibility of the server.</p><div class="custom-container warning"><p class="custom-container-title">Warning</p><p>The so-called &quot;leading&quot; of the magic modification <code>bbr</code> is very time-sensitive. For example, many <code>bbrplus</code> scripts, because they have not been updated for several years, will still change your kernel to <code>4.19</code>. You should know that Debian is now stable and it is already the era of <code>5.9</code>. Then this script may be a little ahead in January 2018, but it has lost its meaning when 4.19 is released in October 2018. It can even be said to be completely [downgraded] and [degraded] now.</p><ol start="4"><li>Which of <code>fq</code>, <code>fq_codel</code>, <code>fq_pie</code>, <code>cake</code> and other algorithms is better?</li></ol><p>In one sentence: <strong>If you don&#39;t understand, please keep <code>fq</code>, which is enough and will not degrade your line</strong></p><ol start="5"><li>Ruisu, Finalspeed, LotServer and other &quot;acceleration tools&quot;</li></ol><p>In one sentence: **Don&#39;t use these! Throw them into the trash can of history! **</p><p>It can only solve the problem of packet loss rate. A not very accurate analogy is that you originally used a car to deliver your goods, and sometimes the car broke down halfway (packet loss). After using these, you directly sent out 3 copies of the same goods and let three cars deliver them at the same time. As long as one of them is not broken, it can be delivered. The road is full of your cars, so you can naturally squeeze others out. But it is conceivable that when you squeeze others, others will also squeeze you, and the exit road of the entire computer room is so wide, and it is bound to become a collective traffic jam in the end.</p><div class="custom-container warning"><p class="custom-container-title">description</p><p>Their principle is not algorithm optimization, not speed-up, most of them are simple and crude <strong>multiple packet delivery</strong>. It may be useful for bad lines with very high packet loss rates, but it has no optimization effect on good lines with low packet loss rates. Instead, it will consume your traffic exponentially, causing unnecessary pressure on the server and your neighbors.</p><p>If your line really has a very high packet loss rate, the only reliable solution is to <strong>change the line</strong>.</p></div></div><ol start="6"><li><p>I have said so much because there are too many misconceptions and scam scripts around <code>BBR</code> to fool novices. I hope you now have a relatively clear understanding of <code>BBR</code>. Next, let&#39;s install the latest Debian kernel and enable <code>BBR</code>! (It&#39;s really simple)</p><ol><li><p>Add the official <code>backports</code> source to Debian 10 to get the updated software library</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/apt/sources.list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><div class="custom-container warning"><p class="custom-container-title">description</p><p>This article takes Debian 10 as an example, so there is still no problem using <code>/etc/apt/sources.list</code>, but if you are not starting from scratch according to this article, or using other Linux distributions, it is recommended that you create a <code>/etc/apt/sources.list.d/</code> folder and create your own configuration file in this folder, such as <code>/etc/apt/sources.list.d/vpsadmin.list</code> , to ensure compatibility and avoid the default file being overwritten in unforeseen circumstances and causing configuration loss.</p></div><ol start="2"><li><p>Then add the following item at the end, save and exit.</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>deb http://deb.debian.org/debian buster-backports main
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Refresh the software library and query the latest version of the official Debian kernel and install it. Please be sure to install the version corresponding to your VPS (this article takes the more common [amd64] as an example).</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token parameter variable">-t</span> buster-backports <span class="token function">install</span> linux-image-amd64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><div class="custom-container warning"><p class="custom-container-title">Note</p><p>If your VPS supports it, you can try the [cloud server dedicated kernel] <code>linux-image-cloud-amd64</code>. The advantages are simplicity and low resource usage. The disadvantage is that some students have reported that forced installation on an unsupported system will cause the system to fail to boot (the kernel cannot be recognized).</p><p>To avoid the tragedy of being unable to identify, please make sure:</p><ul><li>Take a system snapshot before trying, or</li><li>You have <code>vnc</code> to save the day (and you know how to use it)</li></ul></div><ol start="4"><li><p>Modify the <code>kernel</code> parameter configuration file <code>sysctl.conf</code> and specify to enable <code>BBR</code></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/sysctl.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><div class="custom-container warning"><p class="custom-container-title">description</p><p>This article takes Debian 10 as an example, so it is still no problem to use <code>/etc/sysctl.conf</code>, but if you are not following this article from scratch, or use other Linux distributions, it is recommended that you create a <code>/etc/sysctl.d/</code> folder and create your own configuration file in this folder, such as <code>/etc/sysctl.d/vpsadmin.conf</code>, to ensure compatibility, because some distributions no longer read parameters from <code>/etc/sysctl.conf</code> after <code>systemd</code> 207 ​​version. Using a custom configuration file can also prevent the default file from being overwritten in unexpected circumstances, resulting in configuration loss.</p></div><ol start="5"><li><p>Add the following content</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>net.core.default_qdisc=fq
net.ipv4.tcp_congestion_control=bbr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Restart the VPS to make the kernel update and <code>BBR</code> settings take effect</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">reboot</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>The complete process is demonstrated as follows:</p></li></ol><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>Because the VPS I am demonstrating supports the cloud server-specific kernel, I used <code>linux-image-cloud-amd64</code> in the animation.</p><p>If you are not sure whether your VPS supports it, please follow the command in step 3 and use the regular kernel <code>linux-image-amd64</code>.</p></div><p><img src="/assets/ch07-img06-bbr-proper-BpzfpFMr.gif" alt="Update Debian kernel and enable "></p><ol start="8"><li>Confirm that <code>BBR</code> is enabled</li></ol></li></ol><p>If you want to confirm whether <code>BBR</code> is enabled correctly, you can use the following command: <code>shell lsmod | grep bbr </code> This should return the following result: <code> tcp_bbr </code> If you want to confirm whether the <code>fq</code> algorithm is enabled correctly, you can use the following command: <code>shell lsmod | grep fq </code> This should return the following result: <code> sch_fq </code></p><h2 id="_7-8-server-optimization-2-enable-http-to-automatically-redirect-to-https" tabindex="-1"><a class="header-anchor" href="#_7-8-server-optimization-2-enable-http-to-automatically-redirect-to-https"><span>7.8 Server Optimization 2: Enable HTTP to automatically redirect to HTTPS</span></a></h2><ol><li>We have previously built an <code>http</code> webpage on port <code>80</code> and applied for a TLS certificate.</li></ol><p>But if you try to access our interface with a browser, you will find that <code>http</code> access will not automatically upgrade to <code>https</code> access like most websites. In other words, under our current settings, <code>http(80)</code> and <code>https(443)</code> are completely independent. If you want to solve this problem, you need to make some changes.</p><ol start="2"><li>Edit the Nginx configuration file</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/nginx/nginx.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>Add the following statement to the 80 port server we set, save and exit (you can delete the <code>root</code> and <code>index</code> lines at the same time)</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>return 301 https://$http_host$request_uri;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>Add a local port listener at the same level as the <code>80</code> port to provide web page display. This article uses the <code>8080</code> port for demonstration. (Can be any port)</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>server {
listen 127.0.0.1:8080;
root /home/vpsadmin/www/webpage;
index index.html;
add_header Strict-Transport-Security &quot;max-age=63072000&quot; always;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>Restart Nginx service</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl restart nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="6"><li>Modify the fallback settings of Xray, changing the fallback from <code>80</code> port to <code>8080</code> port. (Find <code>&quot;dest&quot;: 80</code>, and change it to <code>&quot;dest&quot;: 8080</code>)</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /usr/local/etc/xray/config.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="7"><li>Restart the <code>Xray</code> service to complete the configuration</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl restart xray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="8"><li>The complete process is demonstrated as follows:</li></ol><p><img src="/assets/ch07-img07-http-to-https-QYIcd_gO.gif" alt="http automatically jumps to https"></p><ol start="9"><li>When you enter <code>http://a-name.yourdomain.com</code>, it should automatically jump to https</li></ol><p><img src="/assets/ch07-img08-http-to-https-check-7ZPa5fw-.png" alt="http automatically jumps to https"></p><h2 id="_7-9-server-optimization-3-more-fallbacks" tabindex="-1"><a class="header-anchor" href="#_7-9-server-optimization-3-more-fallbacks"><span>7.9 Server Optimization 3: More Fallbacks</span></a></h2><p>If you need more fallback functions, please refer to <a href="/en/document/level-1/fallbacks-lv1/" class="">《Fallbacks (fallbacks) Functional Analysis》</a></p><h2 id="_7-10-your-progress" tabindex="-1"><a class="header-anchor" href="#_7-10-your-progress"><span>7.10 Your progress</span></a></h2><p>Congratulations!! At this point, you already have a server that can access the Internet normally and scientifically, and also have a disguised website that can prevent active detection attacks. Next, just install the appropriate software on your client and you can enjoy a smooth network!</p><blockquote><p>⬛⬛⬛⬛⬛⬛⬛⬜ 87.5%</p></blockquote><h2 id="_7-11-important-errata" tabindex="-1"><a class="header-anchor" href="#_7-11-important-errata"><span>7.11 Important errata</span></a></h2><ol><li>The folder location of the <code>Xray</code> configuration file <code>config.json</code> in the first version is wrong. If you have already operated according to the previous location, <code>Xray</code> will not start correctly. Therefore, the errata is explained here, please check it yourself, and I am very sorry for the inconvenience!</li></ol><ul><li>Correct location: <code>/usr/local/etc/xray/config.json</code></li><li>Wrong location: <code>/usr/local/etc/config.json</code></li></ul><p>Affected sections:</p><ul><li>7.4 Configure <code>Xray</code> - 3. Use <code>nano</code> to create <code>Xray</code> configuration file</li><li>7.8 Server Optimization 2 - 6. Modify <code>Xray</code> fallback settings</li></ul><ol start="2"><li>In the first version, the content of the <code>Nginx</code> configuration file <code>nginx.conf</code> was modified incorrectly (the webpage folder location was incorrect). If you have already performed the operation according to the previous location, <code>Nginx</code> will not be able to find the correct website. Please check it yourself. Sorry for the inconvenience!</li></ol><ul><li>Correct folder location: <code>root /home/vpsadmin/www/webpage;</code></li><li>Wrong folder location: <code>root /var/www/website/html</code></li></ul><p>Affected sections:</p><ul><li>7.8 Server Optimization 2 - 4. Add a local port listener at the same level as the <code>80</code> port to provide web page display</li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/xtls/Xray-docs-next/edit/main/docs/en/document/level-0/ch07-xray-server.md" rel="noopener noreferrer" target="_blank" aria-label="Help us improve this page on GitHub！"><!--[--><!--]--> Help us improve this page on GitHub！ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new tag</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1588741+yuhan6665@users.noreply.github.com">yuhan6665</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 69567735+caikun233@users.noreply.github.com">caikun233</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 82594500+hmol233@users.noreply.github.com">hmol233</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav" aria-label="page navigation"><p class="inner"><span class="prev"><a href="/en/document/level-0/ch06-certificates.html" class="" aria-label="[Chapter 6] Certificate Management"><!--[--><!--]--> [Chapter 6] Certificate Management <!--[--><!--]--></a></span><span class="next"><a href="/en/document/level-0/ch08-xray-clients.html" class="" aria-label="【第 8 章】Xray 客户端篇"><!--[--><!--]--> 【第 8 章】Xray 客户端篇 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-D0UrkztD.js" defer></script>
  </body>
</html>
