<!doctype html><html><head><title>Routing :: Project X</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=revised content="2021-01-19T07:12:43 UTC"><meta name=description content="Project X Documents"><meta name=author content="Project X"><title>Routing :: Project X</title><link rel="shortcut icon" href=/images/favicon.png type=image/x-icon><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css integrity=sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script><link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/layout.css><link rel=stylesheet type=text/css href=https://xtls.github.io/css/style.main.css><link rel=stylesheet type=text/css href=https://xtls.github.io/css/style.menu.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/notice.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/tabs.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/panel.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/columns.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/children.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/attachments.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/alert.css><link rel=stylesheet type=text/css href=/css/docport.css><script src=/js/docport.js></script><script type=text/javascript>var baseurl="https:\/\/xtls.github.io";</script><link rel=stylesheet href=/css/custom.css></head><body data-url=/en/config/base/routing/><style type=text/css>#debug{display:-webkit-box;display:-ms-flexbox;display:flex;line-height:3.5rem;margin-bottom:.35rem;padding:0 2rem;position:fixed;left:0;right:0;top:0;top:0;min-height:150px;background-color:#fff;border:3px solid red;z-index:10000;word-wrap:all;overflow:auto}</style><header><div><div class=burger><a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')">&#9776;</a></div><div><a class=baselink href=https://xtls.github.io>Project X</a></div><nav class=shortcuts><li role><a href=/about/new rel=noopener>What's New</a></li><li role><a href=https://github.com/XTLS rel=noopener>GitHub</a></li><li role><a href=https://github.com/XTLS/Xray-core/releases rel=noopener>Download</a></li><li role><a href=https://xtls.github.io/ rel=noopener>Documentation</a></li></nav></div></header><article><aside><center><a class=github-button href=https://github.com/XTLS/Xray-core/releases data-icon=octicon-cloud-download aria-label="Download vjeantet/hugo-theme-docport on GitHub">Download</a>
<a class=github-button href=https://github.com/XTLS/Xray-core data-icon=octicon-star data-show-count=false aria-label="Star vjeantet/hugo-theme-docport on GitHub">Star</a>
<a class=github-button href=https://github.com/XTLS/Xray-core/fork data-icon=octicon-repo-forked data-show-count=true aria-label="Fork vjeantet/hugo-theme-docport on GitHub">Fork</a></center>
<script async defer src=https://buttons.github.io/buttons.js></script><div id=close_menu><a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')"><i class="fa fa-lg fa-times"></i></a></div><ul class=menu><hr><li data-nav-id=https://xtls.github.io/en/about/ class="dd-item haschildren
item_level_$level"><i class="fas fa-chevron-right ddexp"></i><a href=/en/about/>Project X&nbsp;‚ö°</a><ul><li data-nav-id=https://xtls.github.io/en/about/new/ class="dd-item
item_level_$level"><a href=/en/about/new/>The Great History&nbsp;</a></li></ul></li><hr><li data-nav-id=https://xtls.github.io/en/guide/ class="dd-item alwaysopen
item_level_$level"><a href=/en/guide/>Quick start&nbsp;</a></li><li data-nav-id=https://xtls.github.io/en/config/ class="dd-item parent haschildren
item_level_$level"><i class="fas fa-chevron-down ddexp"></i><a href=/en/config/>Configuration files&nbsp;üìú</a><ul><li data-nav-id=https://xtls.github.io/en/config/base/ class="dd-item parent haschildren
item_level_$level"><a href=/en/config/base/>Basic configuration module&nbsp;</a>
<i class="fas fa-chevron-down ddexp"></i><ul><li data-nav-id=https://xtls.github.io/en/config/base/log/ class="dd-item
item_level_$level"><a href=/en/config/base/log/>Êó•ÂøóÈÖçÁΩÆ</a></li><li data-nav-id=https://xtls.github.io/en/config/base/api/ class="dd-item
item_level_$level"><a href=/en/config/base/api/>API interfaces</a></li><li data-nav-id=https://xtls.github.io/en/config/base/dns/ class="dd-item
item_level_$level"><a href=/en/config/base/dns/>Built-in dns server</a></li><li data-nav-id=https://xtls.github.io/en/config/base/routing/ class="dd-item parent active
item_level_$level"><a href=/en/config/base/routing/>Routing</a></li><li data-nav-id=https://xtls.github.io/en/config/base/policy/ class="dd-item
item_level_$level"><a href=/en/config/base/policy/>Êú¨Âú∞Á≠ñÁï•</a></li><li data-nav-id=https://xtls.github.io/en/config/base/inbounds/ class="dd-item
item_level_$level"><a href=/en/config/base/inbounds/>Inbounds</a></li><li data-nav-id=https://xtls.github.io/en/config/base/outbounds/ class="dd-item
item_level_$level"><a href=/en/config/base/outbounds/>Outbounds</a></li><li data-nav-id=https://xtls.github.io/en/config/base/transport/ class="dd-item
item_level_$level"><a href=/en/config/base/transport/>‰º†ËæìÊñπÂºè</a></li><li data-nav-id=https://xtls.github.io/en/config/base/stats/ class="dd-item
item_level_$level"><a href=/en/config/base/stats/>ÁªüËÆ°‰ø°ÊÅØ</a></li><li data-nav-id=https://xtls.github.io/en/config/base/reverse/ class="dd-item
item_level_$level"><a href=/en/config/base/reverse/>ÂèçÂêë‰ª£ÁêÜ</a></li></ul></li><li data-nav-id=https://xtls.github.io/en/config/inbound-protocols/ class="dd-item
item_level_$level"><a href=/en/config/inbound-protocols/>Inbounds ÂèØÁî®ÂçèËÆÆÂàóË°®</a></li><li data-nav-id=https://xtls.github.io/en/config/outbound-protocols/ class="dd-item
item_level_$level"><a href=/en/config/outbound-protocols/>Outbounds ÂèØÁî®ÂçèËÆÆÂàóË°®</a></li><li data-nav-id=https://xtls.github.io/en/config/transports/ class="dd-item
item_level_$level"><a href=/en/config/transports/>‰º†ËæìÊñπÂºèÂàóË°®</a></li><li data-nav-id=https://xtls.github.io/en/config/fallback/ class="dd-item
item_level_$level"><a href=/en/config/fallback/>Fallbacks</a></li><li data-nav-id=https://xtls.github.io/en/config/xtls/ class="dd-item
item_level_$level"><a href=/en/config/xtls/>XTLS</a></li><li data-nav-id=https://xtls.github.io/en/config/env/ class="dd-item
item_level_$level"><a href=/en/config/env/>Environment Variables</a></li><li data-nav-id=https://xtls.github.io/en/config/multiple_config/ class="dd-item alwaysopen
item_level_$level"><a href=/en/config/multiple_config/>Â§öÊñá‰ª∂ÈÖçÁΩÆ</a></li></ul></li><li data-nav-id=https://xtls.github.io/en/documents/ class="dd-item haschildren
item_level_$level"><i class="fas fa-chevron-right ddexp"></i><a href=/en/documents/>Using Experiences&nbsp;üìö</a><ul><li data-nav-id=https://xtls.github.io/en/documents/level-0/ class="dd-item alwaysopen
item_level_$level"><a href=/en/documents/level-0/>Â∞èÂ∞èÁôΩÁôΩËØùÊñá&nbsp;üìô</a></li><li data-nav-id=https://xtls.github.io/en/documents/level-1/ class="dd-item alwaysopen
item_level_$level"><a href=/en/documents/level-1/>Getting Started Skills&nbsp;</a></li><li data-nav-id=https://xtls.github.io/en/documents/level-2/ class="dd-item alwaysopen
item_level_$level"><a href=/en/documents/level-2/>Advanced Documentation&nbsp;üìò</a></li></ul></li><li data-nav-id=https://xtls.github.io/en/develop/ class="dd-item haschildren
item_level_$level"><i class="fas fa-chevron-right ddexp"></i><a href=/en/develop/>ÂºÄÂèëÊåáÂçó&nbsp;üñ•Ô∏è</a><ul><li data-nav-id=https://xtls.github.io/en/develop/intro/ class="dd-item alwaysopen
item_level_$level"><a href=/en/develop/intro/>ÂºÄÂèëÊâãÂÜå</a></li><li data-nav-id=https://xtls.github.io/en/develop/protocols/ class="dd-item alwaysopen
item_level_$level"><a href=/en/develop/protocols/>ÂçèËÆÆËØ¶Ëß£</a></li></ul></li><li data-nav-id=https://xtls.github.io/en/faq/ class="dd-item alwaysopen
item_level_$level"><a href=/en/faq/>Â∏∏ËßÅÈóÆÁ≠î&nbsp;üí¨</a></li><li data-nav-id=https://xtls.github.io/en/caseslip/ class="dd-item alwaysopen
item_level_$level"><a href=/en/caseslip/>Â§ßÊ°àÁâçÊúØ&nbsp;</a></li><hr><li data-nav-id=https://xtls.github.io/en/links/ class="dd-item alwaysopen
item_level_$level"><a href=/en/links/>Â∏∏Áî®ÈìæÊé•&nbsp;ü§ù</a></li></ul></aside><section class=page><nav id=ariane aria-label=breadcrumb><ol class=ariane><li><a class=text-link href=https://xtls.github.io>Home</a></li><li><a class=text-link href=/en/config/>Configuration files</a></li><li><a class=text-link href=/en/config/base/>Basic configuration module</a></li><li class=active>Routing</li></ol></nav><h1>Routing</h1><div class=jump-to-section><span onclick="$h=$(this);$h.next('nav').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('nav').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right';});});"><span class="fas fa-align-right"></span>Jump to Section
<i class="fas fa-chevron-right"></i></span><nav id=TableOfContents><ul><li><a href=#routingobject>RoutingObject</a><ul><li><a href=#ruleobject>RuleObject</a></li><li><a href=#balancerobject>BalancerObject</a></li><li><a href=#list-of-predefined-domains>List of predefined domains</a></li></ul></li></ul></nav></div><div class=content><p>The routing function module allows inbound data to be sent out by different outbound connections according to different rules for the purpose of on-demand proxying.</p><p>For example, in a common use of splitting domestic and international traffic, xray can use internal mechanisms to determine traffic from different regions and send them to different outbound proxies.</p><h2 ref=routingobject>RoutingObject</h2><a class=anchor id=routingobject></a><hr><p><code>RoutingObject</code> corresponds to the <code>routing</code> entry in the configuration file.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;routing&#34;</span>: {
    <span style=color:#f92672>&#34;domainStrategy&#34;</span>: <span style=color:#e6db74>&#34;AsIs&#34;</span>,
    <span style=color:#f92672>&#34;rules&#34;</span>: [],
    <span style=color:#f92672>&#34;balancers&#34;</span>: []
  }
}
</code></pre></div><div class="notices dark"><p><code>domainStrategy</code>: &ldquo;AsIs&rdquo; | &ldquo;IPIfNonMatch&rdquo; | &ldquo;IPOnDemand&rdquo;</p></div><p>Domain name resolution policies, using different policies depending on the settings.</p><ul><li><code>"AsIs"</code>: Use only domain names for routing. Default value.</li><li><code>"IPIfNonMatch"</code>: resolves the domain name to an IP (A record or AAAA record) to be matched again when the domain name does not match any rules.<ul><li>When a domain name has multiple A records, attempts to match all of them until one of them matches a rule.</li><li>the resolved IP only works for routing purposes, the original domain name is still used in forwarded packets.</li></ul></li><li><code>"IPOnDemand"</code>: when any IP-based rule is encountered during matching, the domain name is immediately resolved to IP for matching.</li></ul><div class="notices dark"><p><code>rules</code>: [<a href=#ruleobject>RuleObject</a>]</p></div><p>Corresponds to an array, each element of which is a rule.</p><p>For each connection, the route will be judged against these rules in turn, and when a rule is in effect, the connection will be forwarded to the <code>outboundTag</code> or <code>balancerTag</code> it specifies.</p><div class="notices info"><p><strong>TIP</strong><br>When no rule is matched, traffic is sent by default from the first outbound.</p></div><div class="notices dark"><p><code>balancers</code>: [ <a href=#balancerobject>BalancerObject</a> ]</p></div><p>An array, each element of which is a configuration of a load balancer.</p><p>When a rule points to a load balancer, xray will select an outbound through this load balancer, which will then forward the traffic.</p><p><br></p><h3 ref=ruleobject>RuleObject</h3><a class=anchor id=ruleobject></a><hr><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;field&#34;</span>,
    <span style=color:#f92672>&#34;domain&#34;</span>: [
        <span style=color:#e6db74>&#34;baidu.com&#34;</span>,
        <span style=color:#e6db74>&#34;qq.com&#34;</span>,
        <span style=color:#e6db74>&#34;geosite:cn&#34;</span>
    ],
    <span style=color:#f92672>&#34;ip&#34;</span>: [
        <span style=color:#e6db74>&#34;0.0.0.0/8&#34;</span>,
        <span style=color:#e6db74>&#34;10.0.0.0/8&#34;</span>,
        <span style=color:#e6db74>&#34;fc00::/7&#34;</span>,
        <span style=color:#e6db74>&#34;fe80::/10&#34;</span>,
        <span style=color:#e6db74>&#34;geoip:cn&#34;</span>
    ],
    <span style=color:#f92672>&#34;port&#34;</span>: <span style=color:#e6db74>&#34;53,443,1000-2000&#34;</span>,
    <span style=color:#f92672>&#34;sourcePort&#34;</span>: <span style=color:#e6db74>&#34;53,443,1000-2000&#34;</span>,
    <span style=color:#f92672>&#34;network&#34;</span>: <span style=color:#e6db74>&#34;tcp&#34;</span>,
    <span style=color:#f92672>&#34;source&#34;</span>: [
        <span style=color:#e6db74>&#34;10.0.0.1&#34;</span>
    ],
    <span style=color:#f92672>&#34;user&#34;</span>: [
        <span style=color:#e6db74>&#34;love@xray.com&#34;</span>
    ],
    <span style=color:#f92672>&#34;inboundTag&#34;</span>: [
        <span style=color:#e6db74>&#34;tag-vmess&#34;</span>
    ],
    <span style=color:#f92672>&#34;protocol&#34;</span>: [
        <span style=color:#e6db74>&#34;http&#34;</span>,
        <span style=color:#e6db74>&#34;tls&#34;</span>,
        <span style=color:#e6db74>&#34;bittorrent&#34;</span>
    ],
    <span style=color:#f92672>&#34;attrs&#34;</span>: <span style=color:#e6db74>&#34;attrs[&#39;:method&#39;] == &#39;GET&#39;&#34;</span>,
    <span style=color:#f92672>&#34;outboundTag&#34;</span>: <span style=color:#e6db74>&#34;direct&#34;</span>,
    <span style=color:#f92672>&#34;balancerTag&#34;</span>: <span style=color:#e6db74>&#34;balancer&#34;</span>
}
</code></pre></div><p><br><div class="notices danger"><label>important</label><p>When multiple attributes are specified at the same time, these attributes need to be <strong>satisfied at the same time</strong> for the current rule to take effect.</p></div><br></p><div class="notices dark"><p><code>type</code>: &ldquo;field&rdquo;</p></div><p>Currently only the option <code>"field"</code> is supported.</p><div class="notices dark"><p><code>domain</code>: [string]</p></div><p>An array where each item of the array is a match for a domain name. There are several forms.</p><ul><li>Plain string: The rule takes effect when this string matches any part of the target domain name. For example, &ldquo;sina.com&rdquo; can match &ldquo;sina.com&rdquo;, &ldquo;sina.com.cn&rdquo; and &ldquo;<a href=http://www.sina.com>www.sina.com</a>&rdquo;, but not &ldquo;sina.cn&rdquo;.</li><li>Regular expression: starts with <code>"regexp:"</code> and the rest is a regular expression. The rule takes effect when this regular expression matches the target domain name. For example &ldquo;regexp:\\.goo.*\\.com$&rdquo; matches &ldquo;<a href=http://www.google.com>www.google.com</a>&rdquo; or &ldquo;fonts.googleapis.com&rdquo;, but not &ldquo;google.com&rdquo;.</li><li>Subdomain (recommended): starts with <code>"domain:"</code> and the remainder is a domain name. This rule takes effect when this domain name is the target domain or a subdomain of it. For example, <code>domain:xray.com</code> matches <code>www.xray.com</code>, <code>xray.com</code>, but not <code>wxray.com</code>.</li><li>Full match: starts with <code>"full:"</code> and the rest is a domain name. The rule takes effect when this domain name matches the target domain name in full. For example, &ldquo;full:xray.com&rdquo; matches &ldquo;xray.com&rdquo; but not &ldquo;<a href=http://www.xray.com>www.xray.com</a>&rdquo;.</li><li>Predefined domain name list: starts with <code>"geosite:"</code> and the rest is a name, e.g. <code>geosite:google</code> or <code>geosite:cn</code>. See [list of predefined domains](# list of predefined domains) for a list of names and domains.</li><li>Load the domain name from a file: in the form of <code>"ext:file:tag"</code>, must start with <code>ext:</code> (lowercase) followed by the file name and tag, the file is stored in [resource directory](. /env#resource file path) in the same format as <code>geosite.dat</code>, and the tag must be present in the file.<div class="notices info"><p><strong>TIP</strong><br><code>"ext:geoip.dat:cn"</code> is equivalent to <code>"geoip:cn"</code></p></div></li></ul><div class="notices dark"><p><code>ip</code>: [string]</p></div><p>An array where each element of the array represents an IP range. This rule takes effect when an element matches the target IP. There are several forms.</p><ul><li>IP: in the form of <code>"127.0.0.1"</code>.</li><li><a href=https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing>CIDR</a>: in the form of <code>"10.0.0.0/8"</code>.</li><li>Predefined IP list: This list is preconfigured in each Xray installation package and is named <code>geoip.dat</code>. It is used as <code>"geoip:cn"</code> and must start with <code>geoip:</code> (lower case) followed by a two-character country code to support almost any country with internet access.<ul><li>Special value: <code>"geoip:private"</code>, contains all private addresses, e.g. <code>127.0.0.1</code>.</li></ul></li><li>Load IP from file: shaped like <code>"ext:file:tag"</code>, must start with <code>ext:</code> (lowercase) followed by the file name and tag, file is stored in [resource directory](../env#resource file path) in the same format as <code>geoip.dat</code> The tag must be present in the file.</li></ul><div class="notices dark"><p><code>port</code>Ôºönumber | string</p></div><p>The target port range, which has three forms.</p><ul><li><code>"a-b"</code>: both a and b are positive integers and less than 65536. this range is a back-and-forth closed interval, and this rule takes effect when the target port falls within this range.</li><li><code>a</code>: a is a positive integer and is less than 65536. this rule takes effect when the target port is a.</li><li>A mixture of the above two forms, separated by a comma &ldquo;,&rdquo;. For example: <code>"53,443,1000-2000"</code>.</li></ul><div class="notices dark"><p><code>sourcePort</code>Ôºönumber | string</p></div><p>Source port, in three forms.</p><ul><li><code>"a-b"</code>: both a and b are positive integers and less than 65536. this range is a back-and-forth closed interval, and this rule takes effect when the target port falls within this range.</li><li><code>a</code>: a is a positive integer and is less than 65536. this rule takes effect when the target port is a.</li><li>A mixture of the above two forms, separated by a comma &ldquo;,&rdquo;. For example: <code>"53,443,1000-2000"</code>.</li></ul><div class="notices dark"><p><code>network</code>: &ldquo;tcp&rdquo; | &ldquo;udp&rdquo; | &ldquo;tcp,udp&rdquo;</p></div><p>The available values are &ldquo;tcp&rdquo;, &ldquo;udp&rdquo; or &ldquo;tcp,udp&rdquo;. This rule takes effect when the connection method is the specified method.</p><div class="notices dark"><p><code>source</code>: [string]</p></div><p>An array where each element of the array represents an IP range. This rule takes effect when an element matches the target IP. There are several forms.</p><ul><li>IP: in the form of <code>"127.0.0.1"</code>.</li><li><a href=https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing>CIDR</a>: in the form of <code>"10.0.0.0/8"</code>.</li><li>Predefined IP list: This list is preconfigured in each Xray installation package and is named <code>geoip.dat</code>. It is used as <code>"geoip:cn"</code> and must start with <code>geoip:</code> (lower case) followed by a two-character country code to support almost any country with internet access.<ul><li>Special value: <code>"geoip:private"</code>, contains all private addresses, e.g. <code>127.0.0.1</code>.</li></ul></li><li>Load IP from file: shaped like <code>"ext:file:tag"</code>, must start with <code>ext:</code> (lowercase) followed by the file name and tag, file is stored in [resource directory](../env#resource file path) in the same format as <code>geoip.dat</code> The tag must be present in the file.</li></ul><div class="notices dark"><p><code>user</code>: [string]</p></div><p>An array, where each element of the array is an email address. This rule takes effect when an element matches the source user.</p><div class="notices dark"><p><code>inboundTag</code>: [string]</p></div><p>An array, each element of which is an identifier. This rule takes effect when an element matches the identifier of an inbound protocol.</p><div class="notices dark"><p><code>protocol</code>: [ &ldquo;http&rdquo; | &ldquo;tls&rdquo; | &ldquo;bittorrent&rdquo; ]</p></div><p>An array, each element of which represents a protocol. This rule takes effect when a protocol matches the protocol type of the current connection.<div class="notices info"><p><strong>TIP</strong><br>The <code>sniffing</code> option in the inbound proxy must be enabled to sniff out the protocol type used by the connection.</p></div></p><div class="notices dark"><p><code>attrs</code>: string</p></div><p>A script that detects the value of an attribute of the traffic. This rule takes effect when this script returns a true value.</p><p>The script language is <a href=https://github.com/bazelbuild/starlark>Starlark</a> and its syntax is a subset of Python. The script accepts a global variable <code>attrs</code>, which contains traffic-related attributes.</p><p>Currently only http inbound proxies will set this attribute.</p><p>Examples.</p><ul><li>Detecting HTTP GET: <code>"attrs[':method'] == 'GET'"</code></li><li>Detect HTTP Path: <code>"attrs[':path'].startswith('/test')"</code></li><li>Detect Content Type: <code>"attrs['accept'].index('text/html') >= 0"</code></li></ul><div class="notices dark"><p><code>outboundTag</code>: string</p></div><p>Corresponds to an outbound tag.</p><div class="notices dark"><p><code>balancerTag</code>: string</p></div><p>Corresponds to a balancer tag.</p><div class="notices info"><p><strong>TIP</strong><br><code>balancerTag</code> and <code>outboundTag</code> must be either. When both are specified, <code>outboundTag</code> takes effect.</p></div><p><br></p><h3 ref=balancerobject>BalancerObject</h3><a class=anchor id=balancerobject></a><hr><p>Load Balancer Configuration. When a load balancer is in effect, it will select the most appropriate outbound for traffic forwarding from the specified outbound, as configured.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;tag&#34;</span>: <span style=color:#e6db74>&#34;balancer&#34;</span>,
    <span style=color:#f92672>&#34;selector&#34;</span>: []
}
</code></pre></div><div class="notices dark"><p><code>tag</code>: string</p></div><p>The identifier of this load balancer to match the <code>balancerTag</code> in the <code>RuleObject</code>.</p><div class="notices dark"><p><code>selector</code>: [ string ]</p></div><p>An array of strings, each of which will be used to match against the prefix of the outbound identifier. Of the following outbound identifiers: <code>[ "a", "ab", "c", "ba" ]</code>, <code>"selector": ["a"]</code> will match to <code>[ "a", "ab" ]</code>.</p><p>If more than one outbound is matched, the load balancer will now randomly select one of them as the final outbound.</p><p><br></p><h3 ref=list-of-predefined-domains>List of predefined domains</h3><a class=anchor id=list-of-predefined-domains></a><hr><p>This list is pre-populated in every xray installation package with the file name <code>geosite.dat</code>. This file contains a number of common domain names, used as: <code>geosite:filename</code>, e.g. <code>geosite:google</code> indicates a route filter or DNS filter for domains within the file that match those contained within <code>google</code>.</p><p>Common domain names are.</p><ul><li><code>category-ads</code>: Contains common advertising domains.</li><li><code>category-ads-all</code>: contains common ad domains, as well as the ad provider&rsquo;s domain name.</li><li><code>cn</code>: equivalent to a combination of <code>geolocation-cn</code> and <code>tld-cn</code>.</li><li><code>apple</code>: contains most of the domains owned by Apple.</li><li><code>google</code>: Contains most of the domain names under the Google umbrella.</li><li><code>microsoft</code>: Contains most of the domain names under the Microsoft umbrella.</li><li><code>facebook</code>: Includes most of the domain names owned by Facebook.</li><li><code>twitter</code>: Contains most of the domains owned by Twitter.</li><li><code>telegram</code>: contains most of Telegram&rsquo;s domain names.</li><li><code>geolocation-cn</code>: Contains common mainland site domains.</li><li><code>geolocation-!cn</code>: Includes common non-continental domain names, also includes <code>tld-!cn</code>.</li><li><code>tld-cn</code>: contains the top-level domain names managed by CNNIC for mainland China, such as those ending in <code>.cn</code>, <code>. China</code>.</li><li><code>tld-!cn</code>: contains top-level domain names not used in mainland China, such as those ending with <code>.hk</code> (Hong Kong), <code>.tw</code> (Taiwan), <code>.jp</code> (Japan), <code>.sg</code> (Singapore), <code>.us</code> (USA), <code>.ca</code> (Canada), etc.</li></ul></div><div class=chevrons></div></section><section class=right-menu><div class=TableOfContents><label><i class="fas fa-align-right"></i>&nbsp;&nbsp;What's on this page</label><nav><ul><li><a href=/en/config/base/routing/>Routing</a></li></ul></nav><nav id=TableOfContents><ul><li><a href=#routingobject>RoutingObject</a><ul><li><a href=#ruleobject>RuleObject</a></li><li><a href=#balancerobject>BalancerObject</a></li><li><a href=#list-of-predefined-domains>List of predefined domains</a></li></ul></li></ul></nav></div><div class=Actions><nav><ul><li><a href=https://github.com/XTLS/XTLS.github.io/tree/main/content/config/base/routing/_index.md target=blank><i class="fab fa-github"></i>Improve this page</a></li><li><i class="fas fa-calendar"></i>Last update on 23 December 2020</li></ul></nav></div></section></article><footer><footer><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank rel="noopener noreferrer" href=https://example.org/mail><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://example.org/twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel="noopener noreferrer" href=https://example.org/stack><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/XTLS><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel="noopener noreferrer" href=https://example.org/slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel="noopener noreferrer" href=https://example.org/mail><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2020-2021 ProjectX Community All Rights Reserved</small></div></div></div></footer></footer></body></html>