import{_ as s,r as a,o as e,c as o,a as p,e as t}from"./app-B8wEWs2i.js";const c={},l=t(`<h1 id="локальные-политики" tabindex="-1"><a class="header-anchor" href="#локальные-политики"><span>Локальные политики</span></a></h1><p>Локальные политики позволяют настраивать различные уровни пользователей и соответствующие им политики, например, настройки тайм-аута подключения.<br> Каждое соединение, обрабатываемое Xray, соответствует определенному пользователю, и к нему применяются политики в соответствии с уровнем пользователя (level).</p><h2 id="policyobject" tabindex="-1"><a class="header-anchor" href="#policyobject"><span>PolicyObject</span></a></h2><p><code>PolicyObject</code> соответствует полю <code>policy</code> в конфигурационном файле.</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;policy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;levels&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;0&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;handshake&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token property">&quot;connIdle&quot;</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
        <span class="token property">&quot;uplinkOnly&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;downlinkOnly&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token property">&quot;statsUserUplink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;statsUserDownlink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;bufferSize&quot;</span><span class="token operator">:</span> <span class="token number">4</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;system&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;statsInboundUplink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;statsInboundDownlink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;statsOutboundUplink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;statsOutboundDownlink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>level</code>: map{string: <a href="#levelpolicyobject">LevelPolicyObject</a>}</p></blockquote><p>Набор пар ключ-значение, где каждый ключ - это число в виде строки (требование JSON), например <code>&quot;0&quot;</code>, <code>&quot;1&quot;</code> и т.д. (кавычки обязательны).<br> Это число соответствует уровню пользователя.<br> Каждое значение - это <a href="#levelpolicyobject">LevelPolicyObject</a>.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Теперь можно настроить уровень пользователя для каждого входящего и исходящего подключения.<br> Xray будет применять различные локальные политики в соответствии с фактическим уровнем пользователя.</p></div><blockquote><p><code>system</code>: <a href="#systempolicyobject">SystemPolicyObject</a></p></blockquote><p>Политики уровня системы Xray.</p><h3 id="levelpolicyobject" tabindex="-1"><a class="header-anchor" href="#levelpolicyobject"><span>LevelPolicyObject</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;handshake&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  <span class="token property">&quot;connIdle&quot;</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  <span class="token property">&quot;uplinkOnly&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;downlinkOnly&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token property">&quot;statsUserUplink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;statsUserDownlink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bufferSize&quot;</span><span class="token operator">:</span> <span class="token number">10240</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>handshake</code>: number</p></blockquote><p>Ограничение времени на установление соединения (рукопожатие).<br> Измеряется в секундах.<br> Значение по умолчанию - <code>4</code>.<br> При обработке нового соединения входящим прокси, если время, затраченное на рукопожатие, превышает это значение, соединение разрывается.</p><blockquote><p><code>connIdle</code>: number</p></blockquote><p>Ограничение времени простоя соединения.<br> Измеряется в секундах.<br> Значение по умолчанию - <code>300</code>.<br> При обработке соединения входящим или исходящим прокси, если в течение времени <code>connIdle</code> не было передано никаких данных (включая исходящие и входящие данные), соединение разрывается.</p><blockquote><p><code>uplinkOnly</code>: number</p></blockquote><p>Ограничение времени ожидания после закрытия исходящего канала соединения.<br> Измеряется в секундах.<br> Значение по умолчанию - <code>2</code>.<br> Когда сервер (например, удаленный веб-сайт) закрывает исходящее соединение, исходящий прокси разрывает соединение через <code>uplinkOnly</code> секунд.</p><blockquote><p><code>downlinkOnly</code>: number</p></blockquote><p>Ограничение времени ожидания после закрытия входящего канала соединения.<br> Измеряется в секундах.<br> Значение по умолчанию - <code>5</code>.<br> Когда клиент (например, браузер) закрывает входящее соединение, входящий прокси разрывает соединение через <code>downlinkOnly</code> секунд.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>При просмотре веб-страниц можно установить <code>uplinkOnly</code> и <code>downlinkOnly</code> в <code>0</code>, чтобы ускорить закрытие соединений.</p></div><blockquote><p><code>statsUserUplink</code>: true | false</p></blockquote><p>Если значение равно <code>true</code>, включить учет исходящего трафика для всех пользователей текущего уровня.</p><blockquote><p><code>statsUserDownlink</code>: true | false</p></blockquote><p>Если значение равно <code>true</code>, включить учет входящего трафика для всех пользователей текущего уровня.</p><blockquote><p><code>bufferSize</code>: number</p></blockquote><p>Размер внутреннего буфера для каждого соединения.<br> Измеряется в килобайтах.<br> Если значение равно <code>0</code>, внутренний буфер отключается.</p><p>Значение по умолчанию:</p><ul><li>На платформах ARM, MIPS, MIPSLE значение по умолчанию - <code>0</code>.</li><li>На платформах ARM64, MIPS64, MIPS64LE значение по умолчанию - <code>4</code>.</li><li>На других платформах значение по умолчанию - <code>512</code>.</li></ul><h3 id="systempolicyobject" tabindex="-1"><a class="header-anchor" href="#systempolicyobject"><span>SystemPolicyObject</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;statsInboundUplink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;statsInboundDownlink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;statsOutboundUplink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;statsOutboundDownlink&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>statsInboundUplink</code>: true | false</p></blockquote><p>Если значение равно <code>true</code>, включить учет исходящего трафика для всех входящих подключений.</p><blockquote><p><code>statsInboundDownlink</code>: true | false</p></blockquote><p>Если значение равно <code>true</code>, включить учет входящего трафика для всех входящих подключений.</p><blockquote><p><code>statsOutboundUplink</code>: true | false</p></blockquote><p>Если значение равно <code>true</code>, включить учет исходящего трафика для всех исходящих подключений.</p><blockquote><p><code>statsOutboundDownlink</code>: true | false</p></blockquote><p>Если значение равно <code>true</code>, включить учет входящего трафика для всех исходящих подключений.</p>`,39);function u(i,r){const n=a("I18nTip");return e(),o("div",null,[p(n),l])}const k=s(c,[["render",u],["__file","policy.html.vue"]]);export{k as default};
