import{_ as r,r as s,o as l,c as d,a as t,b as o,d as e,w as i,e as n}from"./app-C01R1QYn.js";const u={},k=n(`<h1 id="websocket" tabindex="-1"><a class="header-anchor" href="#websocket"><span>WebSocket</span></a></h1><p>Использует стандартный WebSocket для передачи данных.</p><p>Подключение WebSocket может быть проксировано другими HTTP-серверами (например, Nginx) и VLESS fallbacks path.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>WebSocket распознает заголовок X-Forwarded-For в HTTP-запросе для перезаписи исходного адреса трафика, приоритет выше, чем у PROXY protocol.</p></div><h2 id="websocketobject" tabindex="-1"><a class="header-anchor" href="#websocketobject"><span>WebSocketObject</span></a></h2><p><code>WebSocketObject</code> соответствует элементу <code>wsSettings</code> в конфигурации транспорта.</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;acceptProxyProtocol&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xray.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;headers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>acceptProxyProtocol</code>: true | false</p></blockquote><p>Только для входящих подключений, указывает, следует ли принимать PROXY protocol.</p>`,9),b={href:"https://www.haproxy.org/download/2.2/doc/proxy-protocol.txt",target:"_blank",rel:"noopener noreferrer"},h=o("strong",null,"если вы не знаете, что это такое, проигнорируйте этот параметр",-1),v=n('<p>Распространенные программы-обработчики обратного прокси (например, HAProxy, Nginx) можно настроить на его отправку, VLESS fallbacks xver также может его отправлять.</p><p>Если установлено значение <code>true</code>, то после установления TCP-соединения на самом нижнем уровне запрашивающая сторона должна сначала отправить PROXY protocol v1 или v2, иначе соединение будет закрыто.</p><blockquote><p><code>path</code>: string</p></blockquote><p>Путь, используемый WebSocket в HTTP-протоколе, значение по умолчанию — <code>&quot;/&quot;</code>.</p><p>Если в пути клиента есть параметр <code>ed</code> (например, <code>/mypath?ed=2560</code>), будет активирован <code>Early Data</code> для уменьшения задержки.</p><blockquote><p><code>host</code>: string</p></blockquote><p>Хост, отправляемый в HTTP-запросе WebSocket, значение по умолчанию — пустое. Если значение на стороне сервера пустое, значение хоста, отправленное клиентом, не проверяется.</p><p>Если это значение указано на стороне сервера или <code>host</code> указан в <code>headers</code>, то проверяется соответствие хоста запроса клиента.</p><p>Приоритет выбора хоста для отправки клиентом: <code>host</code> &gt; <code>headers</code> &gt; <code>address</code>.</p><blockquote><p><code>headers</code>: map {string: string}</p></blockquote><p>Пользовательские HTTP-заголовки, пары ключ-значение, где каждый ключ представляет имя HTTP-заголовка, а соответствующее значение является строкой.</p><p>Значение по умолчанию: пустое.</p><h2 id="browser-dialer" tabindex="-1"><a class="header-anchor" href="#browser-dialer"><span>Browser Dialer</span></a></h2>',13);function _(m,q){const a=s("I18nTip"),c=s("ExternalLinkIcon"),p=s("RouterLink");return l(),d("div",null,[t(a),k,o("p",null,[o("a",b,[e("PROXY protocol"),t(c)]),e(" используется для передачи реального исходного IP-адреса и порта запроса, "),h,e(".")]),v,o("p",null,[e("Использует браузер для обработки TLS, подробнее см. в "),t(p,{to:"/ru/config/features/browser_dialer.html"},{default:i(()=>[e("Browser Dialer")]),_:1}),e(".")])])}const g=r(u,[["render",_],["__file","websocket.html.vue"]]);export{g as default};
