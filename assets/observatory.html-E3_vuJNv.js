import{_ as n,r as e,o as s,c as t,a,e as c}from"./app-Ba6EM3HH.js";const p={},u=c(`<h1 id="连接观测" tabindex="-1"><a class="header-anchor" href="#连接观测"><span>连接观测</span></a></h1><p>连接观测组件使用 HTTPing 的方式探测出站代理的连接状态。观测结果可以被其他组件使用，如负载均衡器。目前有 <a href="#observatoryobject">observatory</a> （后台连接观测）和 <a href="#burstobservatoryobject">burstObservatory</a> （并发连接观测）两种。按需选择其中之一就行。</p><h2 id="observatoryobject" tabindex="-1"><a class="header-anchor" href="#observatoryobject"><span>ObservatoryObject</span></a></h2><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;subjectSelector&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token string">&quot;outbound&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;probeUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://www.google.com/generate_204&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;probeInterval&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10s&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;enableConcurrency&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>subjectSelector</code>: [ string ]</p></blockquote><p>一个字符串数组，其中每一个字符串将用于和出站代理标识的前缀匹配。在以下几个出站代理标识中：<code>[ &quot;a&quot;, &quot;ab&quot;, &quot;c&quot;, &quot;ba&quot; ]</code>，<code>&quot;subjectSelector&quot;: [&quot;a&quot;]</code> 将匹配到 <code>[ &quot;a&quot;, &quot;ab&quot; ]</code>。</p><blockquote><p><code>probeUrl</code>: string</p></blockquote><p>用于探测出站代理连接状态的网址。</p><blockquote><p><code>probeInterval</code>: string</p></blockquote><p>发起探测的间隔。时间格式为数字 + 单位，比如 <code>&quot;10s&quot;</code>, <code>&quot;2h45m&quot;</code>，支持的时间单位有 <code>ns</code>, <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code>, <code>h</code>， 分别对应纳秒、微秒、毫秒、秒、分、时。</p><blockquote><p><code>enableConcurrency</code>: true | false</p></blockquote><ul><li><code>true</code> 并发探测全部匹配的出站代理，全部完成后暂停 <code>probeInterval</code> 设定的时间。</li><li><code>false</code> 逐个探测匹配的出站代理，每探测一个出站代理后暂停 <code>probeInterval</code> 设定的时间。</li></ul><h2 id="burstobservatoryobject" tabindex="-1"><a class="header-anchor" href="#burstobservatoryobject"><span>BurstObservatoryObject</span></a></h2><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;subjectSelector&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token string">&quot;outbound&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pingConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>subjectSelector</code>: [ string ]</p></blockquote><p>一个字符串数组，其中每一个字符串将用于和出站代理标识的前缀匹配。在以下几个出站代理标识中：<code>[ &quot;a&quot;, &quot;ab&quot;, &quot;c&quot;, &quot;ba&quot; ]</code>，<code>&quot;subjectSelector&quot;: [&quot;a&quot;]</code> 将匹配到 <code>[ &quot;a&quot;, &quot;ab&quot; ]</code>。</p><blockquote><p><code>pingConfig</code>: <a href="#PingConfigObject">PingConfigObject</a></p></blockquote><h3 id="pingconfigobject" tabindex="-1"><a class="header-anchor" href="#pingconfigobject"><span>PingConfigObject</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;destination&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://connectivitycheck.gstatic.com/generate_204&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;connectivity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;interval&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1h&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sampling&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timeout&quot;</span><span class="token operator">:</span> <span class="token string">&quot;30s&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>destination</code>: string</p></blockquote><p>用于探测出站代理连接状态的网址。这个网址应该返回 HTTP 204 成功状态码。</p><blockquote><p><code>connectivity</code>: string</p></blockquote><p>用于检测本地网络连通性的网址。空字符串表示不检测本地网络连通性。</p><blockquote><p><code>interval</code>: string</p></blockquote><p>在指定时间内探测全部匹配的出站代理，每个出站代理探测 sampling + 1 次。时间格式为数字 + 单位，比如 <code>&quot;10s&quot;</code>, <code>&quot;2h45m&quot;</code>，支持的时间单位有 <code>ns</code>, <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code>, <code>h</code>， 分别对应纳秒、微秒、毫秒、秒、分、时。</p><blockquote><p><code>sampling</code>: number</p></blockquote><p>保留最近探测结果的数量。</p><blockquote><p><code>timeout</code>: string</p></blockquote><p>探测超时时间。格式和上面的 <code>interval</code> 相同。</p>`,29);function r(l,i){const o=e("I18nTip");return s(),t("div",null,[a(o),u])}const b=n(p,[["render",r],["__file","observatory.html.vue"]]);export{b as default};
