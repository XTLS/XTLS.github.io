import{_ as u,r as c,o as i,c as r,a as o,b as n,d as s,w as p,e as t}from"./app-DKM7qopr.js";const d={},k=t(`<h1 id="транспорт" tabindex="-1"><a class="header-anchor" href="#транспорт"><span>Транспорт</span></a></h1><p>Транспорт (transport) - это способ, которым текущий узел Xray взаимодействует с другими узлами.</p><p>Транспорт определяет способ передачи данных. Обычно оба конца сетевого подключения должны использовать одинаковый транспорт.<br> Например, если один конец использует WebSocket, то другой конец также должен использовать WebSocket, иначе соединение не будет установлено.</p><h2 id="streamsettingsobject" tabindex="-1"><a class="header-anchor" href="#streamsettingsobject"><span>StreamSettingsObject</span></a></h2><p><code>StreamSettingsObject</code> соответствует полю <code>streamSettings</code> во входящем или исходящем подключении.<br> Каждое входящее или исходящее подключение может иметь свои собственные настройки транспорта.</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tcp&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;security&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tlsSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;kcpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;wsSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;grpcSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpupgradeSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;splithttpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sockopt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;mark&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpMaxSeg&quot;</span><span class="token operator">:</span> <span class="token number">1440</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpFastOpen&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tproxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;domainStrategy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AsIs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dialerProxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;acceptProxyProtocol&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpKeepAliveInterval&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpKeepAliveIdle&quot;</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpUserTimeout&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpCongestion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bbr&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;interface&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wg0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;v6only&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpWindowClamp&quot;</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpMptcp&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpNoDelay&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;customSockopt&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>network</code>: &quot;tcp&quot; | &quot;ws&quot; | &quot;h2&quot; | &quot;grpc&quot; | &quot;kcp&quot; | &quot;httpupgrade&quot; | &quot;splithttp&quot;</p></blockquote><p>Тип транспорта, используемый для передачи данных.<br> Значение по умолчанию - <code>&quot;tcp&quot;</code>.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>&quot;h2&quot; можно записать как &quot;http&quot;, &quot;grpc&quot; - как &quot;gun&quot;, &quot;kcp&quot; - как &quot;mkcp&quot;.</p></div><blockquote><p><code>security</code>: &quot;none&quot; | &quot;tls&quot; | &quot;reality&quot;</p></blockquote><p>Включить шифрование транспортного уровня.<br> Доступные значения:</p>`,11),q=n("li",null,[n("code",null,'"none"'),s(" - без шифрования (значение по умолчанию).")],-1),b=n("code",null,'"tls"',-1),v={href:"https://ru.wikipedia.org/wiki/Transport_Layer_Security",target:"_blank",rel:"noopener noreferrer"},m=n("li",null,[n("code",null,'"reality"'),s(" - использовать REALITY.")],-1),g=t('<blockquote><p><code>tlsSettings</code>: <a href="#tlsobject">TLSObject</a></p></blockquote><p>Настройки TLS.<br> TLS предоставляется Golang.<br> Обычно в результате согласования TLS используется TLS 1.3, DTLS не поддерживается.</p><blockquote><p><code>realitySettings</code>: <a href="#realityobject">RealityObject</a></p></blockquote><p>Настройки Reality.<br> Reality - это оригинальная технология Xray.<br> Reality обеспечивает более высокий уровень безопасности, чем TLS, и настраивается аналогично TLS.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Reality - это самый безопасный на данный момент способ шифрования транспорта, и внешний трафик выглядит как обычный интернет-трафик.<br> Включение Reality и настройка правильного режима управления потоком XTLS Vision может привести к увеличению производительности в несколько раз.</p></div>',5),h=n("code",null,"tcpSettings",-1),_=n("p",null,[s("Настройки TCP для текущего подключения, действуют только при использовании TCP."),n("br"),s(" Настройки аналогичны глобальным настройкам, описанным выше.")],-1),y=n("code",null,"kcpSettings",-1),f=n("p",null,[s("Настройки mKCP для текущего подключения, действуют только при использовании mKCP."),n("br"),s(" Настройки аналогичны глобальным настройкам, описанным выше.")],-1),S=n("code",null,"wsSettings",-1),x=n("p",null,[s("Настройки WebSocket для текущего подключения, действуют только при использовании WebSocket."),n("br"),s(" Настройки аналогичны глобальным настройкам, описанным выше.")],-1),I=n("code",null,"httpSettings",-1),T=n("p",null,[s("Настройки HTTP/2 для текущего подключения, действуют только при использовании HTTP/2."),n("br"),s(" Настройки аналогичны глобальным настройкам, описанным выше.")],-1),P=n("code",null,"grpcSettings",-1),A=n("p",null,[s("Настройки gRPC для текущего подключения, действуют только при использовании gRPC."),n("br"),s(" Настройки аналогичны глобальным настройкам, описанным выше.")],-1),L=n("code",null,"httpupgradeSettings",-1),w=n("p",null,[s("Настройки HTTPUpgrade для текущего подключения, действуют только при использовании HTTPUpgrade."),n("br"),s(" Настройки аналогичны глобальным настройкам, описанным выше.")],-1),C=n("code",null,"splithttpSettings",-1),j=t(`<p>Настройки SplitHTTP для текущего подключения, действуют только при использовании SplitHTTP.<br> Настройки аналогичны глобальным настройкам, описанным выше.</p><blockquote><p><code>sockopt</code>: <a href="#sockoptobject">SockoptObject</a></p></blockquote><p>Настройки прозрачного прокси.</p><h3 id="tlsobject" tabindex="-1"><a class="header-anchor" href="#tlsobject"><span>TLSObject</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;serverName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xray.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rejectUnknownSni&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;allowInsecure&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;alpn&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http/1.1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;minVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.2&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;maxVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.3&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cipherSuites&quot;</span><span class="token operator">:</span> <span class="token string">&quot;список наборов шифров, разделенных двоеточиями&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;certificates&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;disableSystemRoot&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;enableSessionResumption&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fingerprint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pinnedPeerCertificateChainSha256&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;masterKeyLog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>serverName</code>: string</p></blockquote><p>Доменное имя сертификата сервера.<br> Используется, если соединение установлено по IP-адресу.</p><p>Если этот параметр не указан, автоматически используется значение из <code>address</code> (если это доменное имя).<br> Это значение также используется для проверки действительности сертификата сервера.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Как упомянуто выше, поскольку это значение также используется для проверки действительности сертификата сервера, если по какой-либо причине вам нужно указать значение, отличное от доменного имени в сертификате сервера, необходимо включить параметр <code>allowInsecure</code>, иначе проверка сертификата завершится неудачей.<br> Из соображений безопасности мы не рекомендуем использовать этот метод постоянно.<br> Если вам нужно безопасно подменить SNI, рассмотрите возможность использования REALITY.</p><p>В частности, если на клиенте указан IP-адрес, Xray не будет отправлять SNI.<br> Чтобы использовать эту функцию, также необходимо включить <code>allowInsecure</code>.</p></div><blockquote><p><code>rejectUnknownSni</code>: bool</p></blockquote><p>Если значение равно <code>true</code>, сервер отклонит рукопожатие TLS, если полученный SNI не совпадает с доменным именем в сертификате.<br> Значение по умолчанию - <code>false</code>.</p><blockquote><p><code>alpn</code>: [ string ]</p></blockquote><p>Массив строк, указывающий значения ALPN, используемые при рукопожатии TLS.<br> Значение по умолчанию - <code>[&quot;h2&quot;, &quot;http/1.1&quot;]</code>.</p><blockquote><p><code>minVersion</code>: string</p></blockquote><p>Минимальная допустимая версия TLS.</p><blockquote><p><code>maxVersion</code>: string</p></blockquote><p>Максимальная допустимая версия TLS.</p><blockquote><p><code>cipherSuites</code>: string</p></blockquote><p>Список поддерживаемых наборов шифров, разделенных двоеточиями.</p>`,19),O={href:"https://golang.org/src/crypto/tls/cipher_suites.go#L500",target:"_blank",rel:"noopener noreferrer"},N={href:"https://golang.org/src/crypto/tls/cipher_suites.go#L44",target:"_blank",rel:"noopener noreferrer"},E=t('<div class="custom-container danger"><p class="custom-container-title">Предупреждение</p><p>Эти два параметра не являются обязательными и обычно не влияют на безопасность.<br> Если они не настроены, Golang автоматически выбирает их в зависимости от устройства.<br> Если вы не знакомы с этими параметрами, не настраивайте их.<br> Вы несете ответственность за любые проблемы, вызванные неправильной настройкой.</p></div><blockquote><p><code>allowInsecure</code>: true | false</p></blockquote><p>Разрешить небезопасные соединения (только для клиентов).<br> Значение по умолчанию - <code>false</code>.</p><p>Если значение равно <code>true</code>, Xray не будет проверять действительность сертификата TLS, предоставленного удаленным хостом.</p><div class="custom-container danger"><p class="custom-container-title">Предупреждение</p><p>Из соображений безопасности не рекомендуется устанавливать этот параметр в <code>true</code> в реальных сценариях, так как это может сделать вас уязвимыми для атак типа &quot;человек посередине&quot;.</p></div><blockquote><p><code>disableSystemRoot</code>: true | false</p></blockquote><p>Отключить использование корневых сертификатов, предоставляемых операционной системой.<br> Значение по умолчанию - <code>false</code>.</p><p>Если значение равно <code>true</code>, Xray будет использовать только сертификаты, указанные в <code>certificates</code>, для рукопожатия TLS.<br> Если значение равно <code>false</code>, Xray будет использовать только корневые сертификаты, предоставляемые операционной системой, для рукопожатия TLS.</p><blockquote><p><code>enableSessionResumption</code>: true | false</p></blockquote><p>Если этот параметр установлен в <code>false</code>, расширение <code>session_ticket</code> не будет включено в ClientHello.<br> Обычно программы на Golang не используют это расширение в ClientHello, поэтому рекомендуется оставить значение по умолчанию.<br> Значение по умолчанию - <code>false</code>.</p><blockquote><p><code>fingerprint</code>: string</p></blockquote><p>Этот параметр используется для настройки отпечатка <code>TLS Client Hello</code>.<br> Если значение пустое, эта функция отключена.<br> Если эта функция включена, Xray будет <strong>эмулировать</strong> отпечаток <code>TLS</code> с помощью библиотеки uTLS или генерировать его случайным образом.<br> Поддерживаются три способа настройки:</p><ol><li>Отпечатки TLS последних версий популярных браузеров, включая:</li></ol><ul><li><code>&quot;chrome&quot;</code></li><li><code>&quot;firefox&quot;</code></li><li><code>&quot;safari&quot;</code></li><li><code>&quot;ios&quot;</code></li><li><code>&quot;android&quot;</code></li><li><code>&quot;edge&quot;</code></li><li><code>&quot;360&quot;</code></li><li><code>&quot;qq&quot;</code></li></ul><ol start="2"><li>Автоматическая генерация отпечатка при запуске Xray:</li></ol><ul><li><code>&quot;random&quot;</code>: случайный выбор из отпечатков последних версий браузеров.</li><li><code>&quot;randomized&quot;</code>: генерация полностью случайного уникального отпечатка (100% поддержка TLS 1.3 с использованием X25519).</li></ul>',16),F={start:"3"},R=n("code",null,'"HelloRandomizedNoALPN"',-1),D=n("code",null,'"HelloChrome_106_Shuffle"',-1),X=n("br",null,null,-1),V={href:"https://github.com/refraction-networking/utls/blob/master/u_common.go#L434",target:"_blank",rel:"noopener noreferrer"},B={class:"custom-container tip"},U=n("p",{class:"custom-container-title"},"Подсказка",-1),M=n("strong",null,"эмулирует",-1),K=n("code",null,"TLS Client Hello",-1),G=n("br",null,null,-1),Y=n("code",null,"TLS",-1),Q=t('<blockquote><p><code>pinnedPeerCertificateChainSha256</code>: [string]</p></blockquote><p>SHA256-хэш цепочки сертификатов удаленного сервера в стандартном формате кодировки.<br> Соединение TLS будет успешно установлено, только если хэш цепочки сертификатов сервера совпадает с одним из значений в этом списке.</p><p>Если соединение не удалось установить из-за этой настройки, будет показан хэш цепочки сертификатов удаленного сервера.</p><div class="custom-container danger"><p class="custom-container-title">Предупреждение</p><p>Не рекомендуется использовать этот способ для получения хэша цепочки сертификатов, так как в этом случае у вас не будет возможности проверить, является ли сертификат, предоставленный сервером, подлинным, и поэтому вы не можете гарантировать, что полученный хэш сертификата будет ожидаемым.</p></div><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Если вам нужно получить хэш сертификата, запустите команду <code>xray tls certChainHash --cert &lt;cert.pem&gt;</code> в командной строке, где <code>&lt;cert.pem&gt;</code> - это путь к файлу сертификата.</p></div><blockquote><p><code>certificates</code>: [ <a href="#certificateobject">CertificateObject</a> ]</p></blockquote><p>Список сертификатов, каждый элемент которого представляет собой сертификат (рекомендуется использовать fullchain).</p>',7),W={class:"custom-container tip"},H=n("p",{class:"custom-container-title"},"Подсказка",-1),J={href:"https://github.com/XTLS/Xray-core/discussions/56#discussioncomment-215600",target:"_blank",rel:"noopener noreferrer"},z=t(`<blockquote><p><code>masterKeyLog</code> : string</p></blockquote><p>Путь к файлу журнала (pre)-master-secret, который можно использовать для расшифровки TLS-соединений, отправляемых Xray, в таких программах, как Wireshark.<br> Пока не поддерживается совместное использование с utls.<br> Требуется Xray-Core v1.8.7.</p><h3 id="realityobject" tabindex="-1"><a class="header-anchor" href="#realityobject"><span>RealityObject</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;show&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example.com:443&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;xver&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;serverNames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;example.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;www.example.com&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;privateKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;minClientVer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;maxClientVer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;maxTimeDiff&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;shortIds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;0123456789abcdef&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fingerprint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;chrome&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;serverName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;publicKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;shortId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;spiderX&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),Z={class:"custom-container tip"},$=n("p",{class:"custom-container-title"},"Подсказка",-1),nn={href:"https://github.com/XTLS/REALITY",target:"_blank",rel:"noopener noreferrer"},sn=t('<blockquote><p><code>show</code>: true | false</p></blockquote><p>Если значение равно <code>true</code>, выводить отладочную информацию.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Настройки для <strong>входящего</strong> подключения (<strong>сервер</strong>).</p></div><blockquote><p><code>dest</code>: string</p></blockquote>',4),on=n("code",null,"dest",-1),tn=n("code",null,"fallbacks",-1),en=t('<div class="custom-container warning"><p class="custom-container-title">Внимание</p><p>Для лучшей маскировки Xray <strong>напрямую перенаправляет</strong> трафик, не прошедший аутентификацию Reality (незаконные запросы Reality), на <code>dest</code>.<br> Если IP-адрес сайта <code>dest</code> является особенным (например, сайт использует CDN CloudFlare), то ваш сервер будет действовать как переадресатор портов для CloudFlare, что может привести к утечке трафика после сканирования.<br> Чтобы избежать этого, можно использовать Nginx или другие средства для фильтрации нежелательных SNI.</p></div><blockquote><p><code>xver</code>: number</p></blockquote>',2),an=n("code",null,"xver",-1),pn=n("code",null,"fallbacks",-1),cn=n("blockquote",null,[n("p",null,[n("code",null,"serverNames"),s(": [string]")])],-1),ln=n("p",null,[s("Обязательный параметр, список допустимых "),n("code",null,"serverName"),s(" для клиентов."),n("br"),s(" Пока не поддерживаются подстановочные знаки *.")],-1),un=n("code",null,"dest",-1),rn=n("br",null,null,-1),dn=n("code",null,"dest",-1),kn=n("br",null,null,-1),qn={href:"https://ru.wikipedia.org/wiki/Subject_Alternative_Name",target:"_blank",rel:"noopener noreferrer"},bn=t(`<p>Может содержать пустое значение <code>&quot;&quot;</code>, что означает прием подключений без SNI.</p><blockquote><p><code>privateKey</code>: string</p></blockquote><p>Обязательный параметр, сгенерируйте его, выполнив команду <code>./xray x25519</code>.</p><blockquote><p><code>minClientVer</code>: string</p></blockquote><p>Необязательный параметр, минимальная версия Xray на клиенте, формат: <code>x.y.z</code>.</p><blockquote><p><code>maxClientVer</code>: string</p></blockquote><p>Необязательный параметр, максимальная версия Xray на клиенте, формат: <code>x.y.z</code>.</p><blockquote><p><code>maxTimeDiff</code>: number</p></blockquote><p>Необязательный параметр, максимально допустимая разница во времени в миллисекундах.</p><blockquote><p><code>shortIds</code>: [string]</p></blockquote><p>Обязательный параметр, список допустимых <code>shortId</code> для клиентов, которые можно использовать для различения разных клиентов.</p><p>Состоит из символов от 0 до f, длина должна быть кратна 2, максимальная длина - 16.</p><p>Если список содержит пустое значение, <code>shortId</code> на клиенте может быть пустым.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Настройки для <strong>исходящего</strong> подключения (<strong>клиент</strong>).</p></div><blockquote><p><code>serverName</code>: string</p></blockquote><p>Одно из значений <code>serverNames</code> на сервере.</p><p>Если <code>serverNames</code> на сервере содержит пустое значение, на клиенте можно использовать <code>&quot;serverName&quot;: &quot;0.0.0.0&quot;</code>, как и в TLS, для установления соединения без SNI.<br> В отличие от TLS, в REALITY для использования этой функции не нужно включать параметр <code>allowInsecure</code>.<br> При использовании этой функции убедитесь, что <code>dest</code> возвращает сертификат по умолчанию при приеме соединений без SNI.</p><blockquote><p><code>fingerprint</code>: string</p></blockquote><p>Обязательный параметр, такой же, как в <a href="#tlsobject">TLSObject</a>.</p><blockquote><p><code>shortId</code>: string</p></blockquote><p>Одно из значений <code>shortIds</code> на сервере.</p><p>Состоит из символов от 0 до f, длина должна быть кратна 2, максимальная длина - 16.</p><p>Если <code>shordIDs</code> на сервере содержит пустое значение, этот параметр на клиенте может быть пустым.</p><blockquote><p><code>publicKey</code>: string</p></blockquote><p>Обязательный параметр, открытый ключ, соответствующий закрытому ключу сервера.<br> Сгенерируйте его с помощью команды <code>./xray x25519 -i &quot;закрытый ключ сервера&quot;</code>.</p><blockquote><p><code>spiderX</code>: string</p></blockquote><p>Начальный путь и параметры для краулера, рекомендуется использовать разные значения для каждого клиента.</p><h4 id="certificateobject" tabindex="-1"><a class="header-anchor" href="#certificateobject"><span>CertificateObject</span></a></h4><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;ocspStapling&quot;</span><span class="token operator">:</span> <span class="token number">3600</span><span class="token punctuation">,</span>
  <span class="token property">&quot;oneTimeLoading&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;usage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;encipherment&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;certificateFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/path/to/certificate.crt&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keyFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/path/to/key.key&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;certificate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;--BEGIN CERTIFICATE--&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MIICwDCCAaigAwIBAgIRAO16JMdESAuHidFYJAR/7kAwDQYJKoZIhvcNAQELBQAw&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ADAeFw0xODA0MTAxMzU1MTdaFw0xODA0MTAxNTU1MTdaMAAwggEiMA0GCSqGSIb3&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DQEBAQUAA4IBDwAwggEKAoIBAQCs2PX0fFSCjOemmdm9UbOvcLctF94Ox4BpSfJ+&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;3lJHwZbvnOFuo56WhQJWrclKoImp/c9veL1J4Bbtam3sW3APkZVEK9UxRQ57HQuw&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;OzhV0FD20/0YELou85TwnkTw5l9GVCXT02NG+pGlYsFrxesUHpojdl8tIcn113M5&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pypgDPVmPeeORRf7nseMC6GhvXYM4txJPyenohwegl8DZ6OE5FkSVR5wFQtAhbON&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;OAkIVVmw002K2J6pitPuJGOka9PxcCVWhko/W+JCGapcC7O74palwBUuXE1iH+Jp&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;noPjGp4qE2ognW3WH/sgQ+rvo20eXb9Um1steaYY8xlxgBsXAgMBAAGjNTAzMA4G&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;A1UdDwEB/wQEAwIFoDATBgNVHSUEDDAKBggrBgEFBQcDATAMBgNVHRMBAf8EAjAA&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MA0GCSqGSIb3DQEBCwUAA4IBAQBUd9sGKYemzwPnxtw/vzkV8Q32NILEMlPVqeJU&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;7UxVgIODBV6A1b3tOUoktuhmgSSaQxjhYbFAVTD+LUglMUCxNbj56luBRlLLQWo+&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;9BUhC/ow393tLmqKcB59qNcwbZER6XT5POYwcaKM75QVqhCJVHJNb1zSEE7Co7iO&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;6wIan3lFyjBfYlBEz5vyRWQNIwKfdh5cK1yAu13xGENwmtlSTHiwbjBLXfk+0A/8&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;r/2s+sCYUkGZHhj8xY7bJ1zg0FRalP5LrqY+r6BckT1QPDIQKYy615j1LpOtwZe/&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;d4q7MD/dkzRDsch7t2cIjM/PYeMuzh87admSyL6hdtK0Nm/Q&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;--END CERTIFICATE--&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;--BEGIN RSA PRIVATE KEY--&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MIIEowIBAAKCAQEArNj19HxUgoznppnZvVGzr3C3LRfeDseAaUnyft5SR8GW75zh&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bqOeloUCVq3JSqCJqf3Pb3i9SeAW7Wpt7FtwD5GVRCvVMUUOex0LsDs4VdBQ9tP9&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;GBC6LvOU8J5E8OZfRlQl09NjRvqRpWLBa8XrFB6aI3ZfLSHJ9ddzOacqYAz1Zj3n&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;jkUX+57HjAuhob12DOLcST8np6IcHoJfA2ejhORZElUecBULQIWzjTgJCFVZsNNN&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;itieqYrT7iRjpGvT8XAlVoZKP1viQhmqXAuzu+KWpcAVLlxNYh/iaZ6D4xqeKhNq&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;IJ1t1h/7IEPq76NtHl2/VJtbLXmmGPMZcYAbFwIDAQABAoIBAFCgG4phfGIxK9Uw&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;qrp+o9xQLYGhQnmOYb27OpwnRCYojSlT+mvLcqwvevnHsr9WxyA+PkZ3AYS2PLue&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;C4xW0pzQgdn8wENtPOX8lHkuBocw1rNsCwDwvIguIuliSjI8o3CAy+xVDFgNhWap&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/CMzfQYziB7GlnrM6hH838iiy0dlv4I/HKk+3/YlSYQEvnFokTf7HxbDDmznkJTM&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;aPKZ5qbnV+4AcQfcLYJ8QE0ViJ8dVZ7RLwIf7+SG0b0bqloti4+oQXqGtiESUwEW&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/Wzi7oyCbFJoPsFWp1P5+wD7jAGpAd9lPIwPahdr1wl6VwIx9W0XYjoZn71AEaw4&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bK4xUXECgYEA3g2o9WqyrhYSax3pGEdvV2qN0VQhw7Xe+jyy98CELOO2DNbB9QNJ&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;8cSSU/PjkxQlgbOJc8DEprdMldN5xI/srlsbQWCj72wXxXnVnh991bI2clwt7oYi&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pcGZwzCrJyFL+QaZmYzLxkxYl1tCiiuqLm+EkjxCWKTX/kKEFb6rtnMCgYEAx0WR&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;L8Uue3lXxhXRdBS5QRTBNklkSxtU+2yyXRpvFa7Qam+GghJs5RKfJ9lTvjfM/PxG&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;3vhuBliWQOKQbm1ZGLbgGBM505EOP7DikUmH/kzKxIeRo4l64mioKdDwK/4CZtS7&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;az0Lq3eS6bq11qL4mEdE6Gn/Y+sqB83GHZYju80CgYABFm4KbbBcW+1RKv9WSBtK&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gVIagV/89moWLa/uuLmtApyEqZSfn5mAHqdc0+f8c2/Pl9KHh50u99zfKv8AsHfH&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TtjuVAvZg10GcZdTQ/I41ruficYL0gpfZ3haVWWxNl+J47di4iapXPxeGWtVA+u8&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eH1cvgDRMFWCgE7nUFzE8wKBgGndUomfZtdgGrp4ouLZk6W4ogD2MpsYNSixkXyW&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;64cIbV7uSvZVVZbJMtaXxb6bpIKOgBQ6xTEH5SMpenPAEgJoPVts816rhHdfwK5Q&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;8zetklegckYAZtFbqmM0xjOI6bu5rqwFLWr1xo33jF0wDYPQ8RHMJkruB1FIB8V2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;GxvNAoGBAM4g2z8NTPMqX+8IBGkGgqmcYuRQxd3cs7LOSEjF9hPy1it2ZFe/yUKq&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ePa2E8osffK5LBkFzhyQb0WrGC9ijM9E6rv10gyuNjlwXdFJcdqVamxwPUBtxRJR&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;cYTY2HRkJXDdtT0Bkc3josE6UUDvwMpO0CfAETQPto1tjNEDhQhT&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;--END RSA PRIVATE KEY--&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>ocspStapling</code>: number</p></blockquote><p>Интервал обновления OCSP-стейплинга.<br> Совпадает с интервалом перезагрузки сертификата.<br> Единица измерения: секунды.<br> Значение по умолчанию - <code>3600</code> (1 час).</p><blockquote><p><code>oneTimeLoading</code>: true | false</p></blockquote><p>Загрузить только один раз.<br> Если значение равно <code>true</code>, функция перезагрузки сертификата и OCSP-стейплинга отключаются.</p><div class="custom-container warning"><p class="custom-container-title">Внимание</p><p>Если значение равно <code>true</code>, OCSP-стейплинг будет отключен.</p></div><blockquote><p><code>usage</code>: &quot;encipherment&quot; | &quot;verify&quot; | &quot;issue&quot;</p></blockquote><p>Назначение сертификата.<br> Значение по умолчанию - <code>&quot;encipherment&quot;</code>.</p><ul><li><code>&quot;encipherment&quot;</code>: сертификат используется для аутентификации и шифрования TLS.</li><li><code>&quot;verify&quot;</code>: сертификат используется для проверки сертификата удаленного TLS-сервера.<br> При использовании этого значения текущий сертификат должен быть сертификатом ЦС.</li><li><code>&quot;issue&quot;</code>: сертификат используется для выпуска других сертификатов.<br> При использовании этого значения текущий сертификат должен быть сертификатом ЦС.</li></ul><div class="custom-container tip"><p class="custom-container-title">Совет 1</p><p>В Windows можно установить самозаверяющий сертификат ЦС в систему, чтобы проверять сертификаты удаленных TLS-серверов.</p></div><div class="custom-container tip"><p class="custom-container-title">Совет 2</p><p>При получении нового запроса от клиента, если указанный <code>serverName</code> равен <code>&quot;xray.com&quot;</code>, Xray сначала ищет в списке сертификатов сертификат, который можно использовать для <code>&quot;xray.com&quot;</code>.<br> Если подходящий сертификат не найден, Xray использует любой сертификат с <code>usage</code> = <code>&quot;issue&quot;</code> для выпуска нового сертификата для <code>&quot;xray.com&quot;</code> со сроком действия один час.<br> Новый сертификат добавляется в список сертификатов для последующего использования.</p></div><div class="custom-container tip"><p class="custom-container-title">Совет 3</p><p>Если указаны и <code>certificateFile</code>, и <code>certificate</code>, Xray использует <code>certificateFile</code>.<br> То же самое относится к <code>keyFile</code> и <code>key</code>.</p></div><div class="custom-container tip"><p class="custom-container-title">Совет 4</p><p>Если <code>usage</code> равен <code>&quot;verify&quot;</code>, <code>keyFile</code> и <code>key</code> могут быть пустыми.</p></div><div class="custom-container tip"><p class="custom-container-title">Совет 5</p><p>Можно сгенерировать самозаверяющий сертификат ЦС с помощью команды <code>xray tls cert</code>.</p></div>`,42),vn={class:"custom-container tip"},mn=n("p",{class:"custom-container-title"},"Совет 6",-1),gn={href:"https://github.com/acmesh-official/acme.sh",target:"_blank",rel:"noopener noreferrer"},hn=t(`<blockquote><p><code>certificateFile</code>: string</p></blockquote><p>Путь к файлу сертификата, например, сертификат, сгенерированный OpenSSL, с расширением .crt.</p><blockquote><p><code>certificate</code>: [ string ]</p></blockquote><p>Массив строк, представляющий содержимое сертификата, как показано в примере.<br><code>certificate</code> и <code>certificateFile</code> - взаимоисключающие параметры.</p><blockquote><p><code>keyFile</code>: string</p></blockquote><p>Путь к файлу ключа, например, ключ, сгенерированный OpenSSL, с расширением .key.<br> В настоящее время не поддерживаются файлы ключей, защищенные паролем.</p><blockquote><p><code>key</code>: [ string ]</p></blockquote><p>Массив строк, представляющий содержимое ключа, как показано в примере.<br><code>key</code> и <code>keyFile</code> - взаимоисключающие параметры.</p><h3 id="sockoptobject" tabindex="-1"><a class="header-anchor" href="#sockoptobject"><span>SockoptObject</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;mark&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpMaxSeg&quot;</span><span class="token operator">:</span> <span class="token number">1440</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpFastOpen&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tproxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;domainStrategy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AsIs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dialerProxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;acceptProxyProtocol&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpKeepAliveInterval&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpKeepAliveIdle&quot;</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpUserTimeout&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpcongestion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bbr&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;interface&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wg0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;V6Only&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpWindowClamp&quot;</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpMptcp&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpNoDelay&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;customSockopt&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>mark</code>: number</p></blockquote><p>Целое число.<br> Если значение не равно нулю, исходящее соединение будет помечено этим значением SO_MARK.</p><ul><li>Работает только в Linux.</li><li>Требуются права CAP_NET_ADMIN.</li></ul><blockquote><p><code>tcpMaxSeg</code>: number</p></blockquote><p>Устанавливает максимальный размер сегмента TCP (MSS).</p><blockquote><p><code>tcpFastOpen</code>: true | false | number</p></blockquote>`,16),_n={href:"https://ru.wikipedia.org/wiki/TCP_Fast_Open",target:"_blank",rel:"noopener noreferrer"},yn=t("<p>Если значение равно <code>true</code> или <strong>положительному целому числу</strong>, TFO включен.<br> Если значение равно <code>false</code> или <strong>отрицательному числу</strong>, TFO принудительно отключен.<br> Если этот параметр не указан или равен <code>0</code>, используются настройки системы по умолчанию.<br> Может использоваться как для входящих, так и для исходящих подключений.</p>",1),fn=t("<li><p>Доступно только в следующих (или более поздних) версиях операционных систем:</p><ul><li>Linux 3.16: требуется настроить параметр ядра <code>net.ipv4.tcp_fastopen</code>.<br> Этот параметр представляет собой битовую маску, где <code>0x1</code> означает, что TFO разрешен для клиентов, а <code>0x2</code> - для серверов.<br> Значение по умолчанию - <code>0x1</code>.<br> Если вы хотите включить TFO на сервере, установите значение этого параметра ядра в <code>0x3</code>.</li><li><s>Windows 10 (1607)</s> (неправильная реализация).</li><li>Mac OS 10.11 / iOS 9 (требуется тестирование).</li><li>FreeBSD 10.3 (сервер) / 12.0 (клиент): необходимо установить параметры ядра <code>net.inet.tcp.fastopen.server_enabled</code> и <code>net.inet.tcp.fastopen.client_enabled</code> в <code>1</code>.<br> (Требуется тестирование.)</li></ul></li>",1),Sn=n("strong",null,"положительное целое число",-1),xn={href:"https://tools.ietf.org/html/rfc7413#section-5.1",target:"_blank",rel:"noopener noreferrer"},In=n("br",null,null,-1),Tn=n("strong",null,"Обратите внимание, что не все операционные системы поддерживают эту настройку:",-1),Pn=t("<ul><li>Linux / FreeBSD: указанное здесь <strong>положительное целое число</strong> представляет собой максимальное значение, максимальное допустимое значение - 2147483647.<br> Если значение равно <code>true</code>, используется значение <code>256</code>.<br> Обратите внимание, что в Linux параметр <code>net.core.somaxconn</code> ограничивает максимальное значение этого параметра.<br> Если значение превышает <code>somaxconn</code>, увеличьте <code>somaxconn</code>.</li><li>Mac OS: если значение равно <code>true</code> или <strong>положительному целому числу</strong>, это означает только, что TFO включен.<br> Максимальное значение нужно настроить отдельно с помощью параметра ядра <code>net.inet.tcp.fastopen_backlog</code>.</li><li>Windows: если значение равно <code>true</code> или <strong>положительному целому числу</strong>, это означает только, что TFO включен.</li></ul>",1),An=n("li",null,[n("p",null,[s("Для исходящих подключений значение "),n("code",null,"true"),s(" или "),n("strong",null,"положительное целое число"),s(" означает только, что TFO включен, во всех операционных системах.")])],-1),Ln=t("<blockquote><p><code>tproxy</code>: &quot;redirect&quot; | &quot;tproxy&quot; | &quot;off&quot;</p></blockquote><p>Включить прозрачное проксирование (только для Linux).</p><ul><li><code>&quot;redirect&quot;</code>: использовать прозрачное проксирование в режиме Redirect.<br> Поддерживаются все TCP-соединения на основе IPv4/6.</li><li><code>&quot;tproxy&quot;</code>: использовать прозрачное проксирование в режиме TProxy.<br> Поддерживаются все TCP- и UDP-соединения на основе IPv4/6.</li><li><code>&quot;off&quot;</code>: отключить прозрачное проксирование.</li></ul><p>Для прозрачного проксирования требуются права root или <code>CAP\\_NET\\_ADMIN</code>.</p>",4),wn={class:"custom-container danger"},Cn=n("p",{class:"custom-container-title"},"Предупреждение",-1),jn=n("code",null,"followRedirect",-1),On=n("code",null,"true",-1),Nn=n("code",null,"tproxy",-1),En=n("code",null,"tproxy",-1),Fn=n("code",null,'"redirect"',-1),Rn=n("blockquote",null,[n("p",null,[n("code",null,"domainStrategy"),s(': "AsIs"'),n("br"),s(' "UseIP" | "UseIPv6v4" | "UseIPv6" | "UseIPv4v6" | "UseIPv4"'),n("br"),s(' "ForceIP" | "ForceIPv6v4" | "ForceIPv6" | "ForceIPv4v6" | "ForceIPv4"')])],-1),Dn=n("br",null,null,-1),Xn={href:"https://github.com/v2ray/v2ray-core/issues/1909",target:"_blank",rel:"noopener noreferrer"},Vn=n("br",null,null,-1),Bn=n("code",null,"domainStrategy",-1),Un=n("p",null,[s("Значение по умолчанию - "),n("code",null,'"AsIs"'),s(".")],-1),Mn=n("p",null,"При использовании доменного имени в качестве целевого адреса поведение Freedom зависит от значения этого параметра:",-1),Kn=n("li",null,[n("code",null,'"AsIs"'),s(": Xray будет использовать системный стек для установления соединения, приоритет и выбор IP-адреса зависят от настроек системы.")],-1),Gn=n("br",null,null,-1),Yn=n("code",null,"DnsObject",-1),Qn=n("br",null,null,-1),Wn=t("<li><code>&quot;IPv4&quot;</code> - попытаться использовать только IPv4 для подключения, <code>&quot;IPv4v6&quot;</code> - попытаться использовать IPv4 или IPv6, но для доменов с двумя стеками отдать предпочтение IPv4.<br> (То же самое относится к <code>IPv6v4</code>, не будем повторяться.)</li><li>Если в настройках встроенного DNS указан параметр <code>&quot;queryStrategy&quot;</code>, фактическое поведение будет определяться пересечением этих двух параметров, будут разрешены только IP-адреса тех типов, которые указаны в обоих параметрах.<br> Например, если <code>&quot;queryStrategy&quot;: &quot;UseIPv4&quot;</code> и <code>&quot;domainStrategy&quot;: &quot;UseIP&quot;</code>, это фактически эквивалентно <code>&quot;domainStrategy&quot;: &quot;UseIPv4&quot;</code>.</li><li>Если используется значение, начинающееся с <code>&quot;Use&quot;</code>, и результат разрешения не соответствует требованиям (например, у домена есть только IPv4-адрес, но используется <code>UseIPv6</code>), Xray переключится на <code>AsIs</code>.</li><li>Если используется значение, начинающееся с <code>&quot;Force&quot;</code>, и результат разрешения не соответствует требованиям, соединение не будет установлено.</li>",4),Hn={class:"custom-container tip"},Jn=n("p",{class:"custom-container-title"},"Совет",-1),zn=n("code",null,'"UseIP"',-1),Zn=n("code",null,'"ForceIP"',-1),$n=n("code",null,"sendThrough",-1),ns=n("code",null,"sendThrough",-1),ss=n("br",null,null,-1),os=n("code",null,"UseIPv4",-1),ts=n("code",null,"sendThrough",-1),es=t('<div class="custom-container danger"><p class="custom-container-title">Предупреждение</p><p>Неправильная настройка этой функции может привести к бесконечному циклу.</p><p>Коротко говоря: для подключения к серверу нужно дождаться результата DNS-запроса, а для завершения DNS-запроса нужно подключиться к серверу.</p><blockquote><p>Тони: Что было раньше, курица или яйцо?</p></blockquote><p>Подробное объяснение:</p><ol><li>Условия возникновения: прокси-сервер (proxy.com), встроенный DNS-сервер, не локальный режим.</li><li><strong>Перед</strong> установлением TCP-соединения с proxy.com Xray пытается разрешить proxy.com с помощью встроенного DNS-сервера.</li><li>Встроенный DNS-сервер устанавливает соединение с dns.com и отправляет запрос для получения IP-адреса proxy.com.</li><li><strong>Неправильные</strong> правила маршрутизации приводят к тому, что proxy.com проксирует запрос, отправленный на шаге 3.</li><li>Xray пытается установить еще одно TCP-соединение с proxy.com.</li><li>Перед установлением соединения Xray пытается разрешить proxy.com с помощью встроенного DNS-сервера.</li><li>Встроенный DNS-сервер повторно использует соединение, установленное на шаге 3, и отправляет запрос.</li><li>Возникает проблема: установление соединения на шаге 3 ожидает результата запроса на шаге 7, а завершение запроса на шаге 7 ожидает полного установления соединения на шаге 3.</li><li>Игра окончена!</li></ol><p>Решения:</p><ul><li>Изменить правила разделения трафика для встроенного DNS-сервера.</li><li>Использовать Hosts.</li><li><s>Если вы все еще не знаете, как решить эту проблему, не используйте эту функцию.</s></li></ul><p>Поэтому <strong>не рекомендуется</strong> неопытным пользователям использовать эту функцию без необходимости.</p></div><blockquote><p><code>dialerProxy</code>: &quot;&quot;</p></blockquote><p>Тег исходящего прокси.<br> Если значение не пустое, исходящие соединения будут устанавливаться через указанное исходящее подключение.<br> Этот параметр можно использовать для цепочечной пересылки с поддержкой транспорта.</p><div class="custom-container danger"><p class="custom-container-title">Предупреждение</p><p>Этот параметр несовместим с <code>ProxySettingsObject.Tag</code>.</p></div><blockquote><p><code>acceptProxyProtocol</code>: true | false</p></blockquote><p>Только для входящих подключений.<br> Указывает, следует ли принимать PROXY protocol.</p>',6),as={href:"https://www.haproxy.org/download/2.2/doc/proxy-protocol.txt",target:"_blank",rel:"noopener noreferrer"},ps=n("br",null,null,-1),cs=n("strong",null,"Если вы не знакомы с ним, пропустите этот параметр.",-1),ls=t('<p>Распространенные обратные прокси (например, HAProxy, Nginx) можно настроить на отправку PROXY protocol, VLESS fallbacks xver также может отправлять его.</p><p>Если значение равно <code>true</code>, то после установления TCP-соединения на самом нижнем уровне отправитель запроса должен сначала отправить PROXY protocol v1 или v2, иначе соединение будет разорвано.</p><blockquote><p><code>tcpKeepAliveInterval</code>: number</p></blockquote><p>Интервал между отправкой пакетов TCP keep-alive в секундах. <s>Работает только в Linux.</s></p><p>Это keep-alive-пакеты, отправляемые при ненормальном состоянии соединения (не получен ACK).</p><p>Если этот параметр не указан или равен 0, используется значение по умолчанию Golang.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Если указать отрицательное значение, например <code>-1</code>, TCP keep-alive будет отключен.</p></div><blockquote><p><code>tcpKeepAliveIdle</code>: number</p></blockquote><p>Порог простоя TCP-соединения в секундах.<br> Keep-alive-пакеты будут отправляться, когда время простоя TCP-соединения достигнет этого порога.</p><p>Это keep-alive-пакеты, отправляемые при нормальном состоянии соединения.</p><p>Если этот параметр не указан или равен 0, используется значение по умолчанию Golang.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Если указать отрицательное значение, например <code>-1</code>, TCP keep-alive будет отключен.</p></div><blockquote><p><code>tcpUserTimeout</code>: number</p></blockquote><p>Измеряется в миллисекундах.<br> Подробнее: https://github.com/grpc/proposal/blob/master/A18-tcp-user-timeout.md</p><blockquote><p><code>tcpcongestion</code>: &quot;&quot;</p></blockquote><p>Алгоритм управления перегрузкой TCP.<br> Поддерживается только в Linux.<br> Если этот параметр не указан, используется значение по умолчанию системы.</p><div class="custom-container tip"><p class="custom-container-title">Распространенные алгоритмы</p><ul><li>bbr (рекомендуется)</li><li>cubic</li><li>reno</li></ul></div><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Выполните команду <code>sysctl net.ipv4.tcp_congestion_control</code>, чтобы узнать значение по умолчанию системы.</p></div><blockquote><p><code>interface</code>: &quot;&quot;</p></blockquote><p>Имя сетевого интерфейса, к которому нужно привязаться.<br> Поддерживается в Linux / iOS / Mac OS / Windows.<br> Для iOS / Mac OS требуется Xray-core v1.8.6 или более поздней версии.<br> Для Windows требуется Xray-core v1.8.7 или более поздней версии.</p><blockquote><p><code>V6Only</code>: true | false</p></blockquote><p>Если значение равно <code>true</code>, адрес <code>::</code> будет принимать только IPv6-соединения.<br> Поддерживается только в Linux.</p><blockquote><p><code>tcpWindowClamp</code>: number</p></blockquote><p>Привязать размер рекламируемого окна к этому значению.<br> Ядро выберет максимальное значение между этим значением и SOCK_MIN_RCVBUF/2.</p><blockquote><p><code>tcpMptcp</code>: true | false</p></blockquote>',25),us=n("br",null,null,-1),is=n("code",null,"false",-1),rs=n("br",null,null,-1),ds=n("code",null,"true",-1),ks={href:"https://ru.wikipedia.org/wiki/Multipath_TCP",target:"_blank",rel:"noopener noreferrer"},qs=n("br",null,null,-1),bs=n("br",null,null,-1),vs=t(`<blockquote><p><code>tcpNoDelay</code>: true | false</p></blockquote><p>Значение по умолчанию - <code>false</code>.<br> Рекомендуется включать вместе с <code>&quot;tcpMptcp&quot;: true</code>.</p><blockquote><p><code>customSockopt</code>: []</p></blockquote><p>Массив, позволяющий опытным пользователям указать любые необходимые параметры sockopt.<br> Теоретически все настройки, связанные с подключением, описанные выше, можно настроить с помощью этого параметра.<br> Вы также можете настроить другие параметры, доступные в Linux, но не добавленные в ядро, например, следующий пример эквивалентен <code>&quot;tcpcongestion&quot;: &quot;bbr&quot;</code> в ядре.</p><p>Перед использованием убедитесь, что вы понимаете принципы программирования сокетов в Linux.</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token property">&quot;customSockopt&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;level&quot;</span><span class="token operator">:</span><span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;opt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bbr&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>type</code>: &quot;&quot;</p></blockquote><p>Обязательный параметр, тип настройки, в настоящее время доступны <code>int</code> и <code>str</code>.</p><blockquote><p><code>level</code>: &quot;&quot;</p></blockquote><p>Необязательный параметр, уровень протокола, используемый для указания области действия.<br> Значение по умолчанию - <code>6</code> (TCP).</p><blockquote><p><code>opt</code>: &quot;&quot;</p></blockquote><p>Название настраиваемого параметра в десятичном формате (в этом примере используется значение TCP_CONGESTION, которое равно 0xd в шестнадцатеричном формате и 13 в десятичном формате).</p><blockquote><p><code>value</code>: &quot;&quot;</p></blockquote><p>Значение, которое нужно установить.<br> В этом примере используется значение <code>bbr</code>.</p><p>Если <code>type</code> равен <code>int</code>, значение должно быть десятичным числом.</p>`,15);function ms(gs,hs){const l=c("I18nTip"),e=c("ExternalLinkIcon"),a=c("RouterLink");return i(),r("div",null,[o(l),k,n("ul",null,[q,n("li",null,[b,s(" - использовать "),n("a",v,[s("TLS"),o(e)]),s(".")]),m]),g,n("blockquote",null,[n("p",null,[h,s(": "),o(a,{to:"/ru/config/transports/tcp.html"},{default:p(()=>[s("TcpObject")]),_:1})])]),_,n("blockquote",null,[n("p",null,[y,s(": "),o(a,{to:"/ru/config/transports/mkcp.html"},{default:p(()=>[s("KcpObject")]),_:1})])]),f,n("blockquote",null,[n("p",null,[S,s(": "),o(a,{to:"/ru/config/transports/websocket.html"},{default:p(()=>[s("WebSocketObject")]),_:1})])]),x,n("blockquote",null,[n("p",null,[I,s(": "),o(a,{to:"/ru/config/transports/h2.html"},{default:p(()=>[s("HttpObject")]),_:1})])]),T,n("blockquote",null,[n("p",null,[P,s(": "),o(a,{to:"/ru/config/transports/grpc.html"},{default:p(()=>[s("GRPCObject")]),_:1})])]),A,n("blockquote",null,[n("p",null,[L,s(": "),o(a,{to:"/ru/config/transports/httpupgrade.html"},{default:p(()=>[s("HttpUpgradeObject")]),_:1})])]),w,n("blockquote",null,[n("p",null,[C,s(": "),o(a,{to:"/ru/config/transports/splithttp.html"},{default:p(()=>[s("SplitHttpObject")]),_:1})])]),j,n("p",null,[s("Список наборов шифров Golang и их описания можно найти "),n("a",O,[s("здесь"),o(e)]),s(" или "),n("a",N,[s("здесь"),o(e)]),s(".")]),E,n("ol",F,[n("li",null,[s("Использование имен переменных отпечатков uTLS, например, "),R,s(", "),D,s("."),X,s(" Полный список см. в "),n("a",V,[s("библиотеке uTLS"),o(e)]),s(".")])]),n("div",B,[U,n("p",null,[s("Эта функция только "),M,s(" отпечаток "),K,s(", поведение и другие отпечатки такие же, как у Golang."),G,s(" Если вам нужно более полно эмулировать отпечаток "),Y,s(" и поведение браузера, используйте "),o(a,{to:"/ru/config/transports/websocket.html#browser-dialer"},{default:p(()=>[s("Browser Dialer")]),_:1}),s(".")])]),Q,n("div",W,[H,n("p",null,[s("Если вам нужно получить оценку A/A+ в ssllibs или myssl, см. "),n("a",J,[s("здесь"),o(e)]),s(".")])]),z,n("div",Z,[$,n("p",null,[s("Дополнительную информацию см. в проекте "),n("a",nn,[s("REALITY"),o(e)]),s(".")])]),sn,n("p",null,[s("Обязательный параметр, формат такой же, как у "),on,s(" в "),tn,s(" для VLESS "),o(a,{to:"/ru/config/features/fallback.html#fallbackobject"},{default:p(()=>[s("dest")]),_:1}),s(".")]),en,n("p",null,[s("Необязательный параметр, формат такой же, как у "),an,s(" в "),pn,s(" для VLESS "),o(a,{to:"/ru/config/features/fallback.html#fallbackobject"},{default:p(()=>[s("xver")]),_:1}),s(".")]),cn,ln,n("p",null,[s("Обычно это значение совпадает с "),un,s("."),rn,s(" Фактически допустимыми значениями являются любые SNI, принимаемые сервером (в зависимости от конфигурации "),dn,s(")."),kn,s(" В качестве ориентира можно использовать "),n("a",qn,[s("SAN"),o(e)]),s(" возвращаемого сертификата.")]),bn,n("div",vn,[mn,n("p",null,[s("Если у вас есть доменное имя, вы можете легко получить бесплатный сторонний сертификат с помощью таких инструментов, как "),n("a",gn,[s("acme.sh"),o(e)]),s(".")])]),hn,n("p",null,[s("Включить "),n("a",_n,[s("TCP Fast Open"),o(e)]),s(" (TFO).")]),yn,n("ul",null,[fn,n("li",null,[n("p",null,[s("Для входящих подключений указанное здесь "),Sn,s(" представляет собой "),n("a",xn,[s("максимальное количество ожидающих запросов на подключение TFO"),o(e)]),s("."),In,Tn]),Pn]),An]),Ln,n("div",wn,[Cn,n("p",null,[s("Если в "),o(a,{to:"/ru/config/inbounds/dokodemo.html"},{default:p(()=>[s("Dokodemo-door")]),_:1}),s(" параметр "),jn,s(" установлен в "),On,s(", а параметр "),Nn,s(" в Sockopt не указан, значение "),En,s(" в Sockopt будет установлено в "),Fn,s(".")])]),Rn,n("p",null,[s("В предыдущих версиях, когда Xray пытался установить системное соединение с использованием доменного имени, разрешение доменного имени выполнялось системой и не контролировалось Xray."),Dn,s(" Это приводило к таким проблемам, как "),n("a",Xn,[s("невозможность разрешения доменных имен в нестандартных средах Linux"),o(e)]),s("."),Vn,s(" Чтобы решить эту проблему, в Xray 1.3.1 был добавлен параметр "),Bn,s(" в Sockopt, аналогичный параметру в Freedom.")]),Un,Mn,n("ul",null,[Kn,n("li",null,[s("При указании других значений будет использоваться "),o(a,{to:"/ru/dns.html"},{default:p(()=>[s("встроенный DNS-сервер")]),_:1}),s(" Xray-core для разрешения доменного имени."),Gn,s(" Если "),Yn,s(" не настроен, будет использоваться системный DNS."),Qn,s(" Если для домена найдено несколько подходящих IP-адресов, ядро случайным образом выберет один из них в качестве целевого IP-адреса.")]),Wn]),n("div",Hn,[Jn,n("p",null,[s("При использовании режимов "),zn,s(" и "),Zn,s(" и указании "),$n,s(" в "),o(a,{to:"/ru/outbound.html#outboundobject"},{default:p(()=>[s("настройках исходящего подключения")]),_:1}),s(" Freedom автоматически определит необходимый тип IP-адреса (IPv4 или IPv6) на основе значения "),ns,s("."),ss,s(" Если вручную указан один тип IP-адреса (например, "),os,s("), но он не совпадает с локальным адресом, указанным в "),ts,s(", соединение не будет установлено.")])]),es,n("p",null,[n("a",as,[s("PROXY protocol"),o(e)]),s(" используется для передачи реального IP-адреса и порта источника запроса."),ps,cs]),ls,n("p",null,[s("Новый параметр в Xray-core v1.8.6."),us,s(" Значение по умолчанию - "),is,s("."),rs,s(" Если значение равно "),ds,s(", включить "),n("a",ks,[s("Multipath TCP"),o(e)]),s("."),qs,s(" Этот параметр нужно включить как на сервере, так и на клиенте."),bs,s(" В настоящее время поддерживается только в Linux, требуется ядро Linux версии 5.6 или выше.")]),vs])}const ys=u(d,[["render",ms],["__file","transport.html.vue"]]);export{ys as default};
