import{_ as l,r as t,o as r,c as u,a as o,b as s,d as n,w as e,e as p}from"./app-B8wEWs2i.js";const d={},i=p(`<h1 id="dokodemo-door" tabindex="-1"><a class="header-anchor" href="#dokodemo-door"><span>Dokodemo-Door</span></a></h1><p>Dokodemo door может прослушивать локальный порт и отправлять все данные, поступающие на этот порт, на порт указанного сервера, тем самым реализуя перенаправление портов.</p><h2 id="inboundconfigurationobject" tabindex="-1"><a class="header-anchor" href="#inboundconfigurationobject"><span>InboundConfigurationObject</span></a></h2><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8.8.8.8&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">53</span><span class="token punctuation">,</span>
  <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tcp&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timeout&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;followRedirect&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;userLevel&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>address</code>: address</p></blockquote><p>Перенаправлять трафик на этот адрес. Может быть IP-адресом, например, <code>&quot;1.2.3.4&quot;</code>, или доменным именем, например, <code>&quot;xray.com&quot;</code>. Тип данных: строка.</p><p>Если <code>followRedirect</code> (см. ниже) равно <code>true</code>, то <code>address</code> может быть пустым.</p><blockquote><p><code>port</code>: number</p></blockquote><p>Перенаправлять трафик на указанный порт целевого адреса, диапазон [1, 65535], тип данных: число. Обязательный параметр.</p><blockquote><p><code>network</code>: &quot;tcp&quot; | &quot;udp&quot; | &quot;tcp,udp&quot;</p></blockquote><p>Поддерживаемые типы сетевых протоколов. Например, если указано <code>&quot;tcp&quot;</code>, то будет приниматься только трафик TCP. Значение по умолчанию: <code>&quot;tcp&quot;</code>.</p><blockquote><p><code>timeout</code>: number</p></blockquote><p>Ограничение времени простоя соединения. Измеряется в секундах. Значение по умолчанию: <code>300</code>. Если во время обработки соединения в течение <code>timeout</code> секунд не передается никаких данных, соединение разрывается.</p><blockquote><p><code>followRedirect</code>: true | false</p></blockquote><p>Если значение равно <code>true</code>, dokodemo-door будет распознавать данные, перенаправленные iptables, и пересылать их на соответствующий целевой адрес.</p>`,15),k=s("code",null,"tproxy",-1),q=s("blockquote",null,[s("p",null,[s("code",null,"userLevel"),n(": number")])],-1),m=s("code",null,"level",-1),b=p(`<h2 id="использование" tabindex="-1"><a class="header-anchor" href="#использование"><span>Использование</span></a></h2><p>У Dokodemo door есть два основных варианта использования: прозрачное проксирование (см. ниже) и перенаправление портов.</p><p>Иногда некоторые сервисы не поддерживают прямое проксирование, такое как Socks5, а использование Tun или Tproxy является излишним, и эти сервисы взаимодействуют только с одним IP-адресом и одним портом (например: iperf, сервер Minecraft, конечная точка Wireguard), тогда можно использовать произвольную дверь.</p><p>Например, следующая конфигурация (предполагается, что исходящее соединение по умолчанию является допустимым прокси):</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;listen&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">25565</span><span class="token punctuation">,</span>
  <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dokodemo-door&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mc.hypixel.net&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">25565</span><span class="token punctuation">,</span>
    <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tcp&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timeout&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;followRedirect&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;userLevel&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mc&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>В этом случае ядро будет прослушивать 127.0.0.1:25565 и перенаправлять трафик через исходящее соединение по умолчанию на mc.hypixel.net:25565 (сервер MC). При подключении клиента Minecraft к 127.0.0.1:25565 будет осуществлено подключение к серверу Hypixel через прокси.</p><h2 id="пример-настроики-прозрачного-прокси" tabindex="-1"><a class="header-anchor" href="#пример-настроики-прозрачного-прокси"><span>Пример настройки прозрачного прокси</span></a></h2><p>Эту часть см. в разделе <a href="../../document/level-2/tproxy">Руководство по настройке прозрачного прокси (TProxy)</a>.</p>`,8);function v(h,f){const c=t("I18nTip"),a=t("RouterLink");return r(),u("div",null,[o(c),i,s("p",null,[n("См. настройку "),k,n(" в разделе "),o(a,{to:"/ru/config/transport.html#sockoptobject"},{default:e(()=>[n("Конфигурация транспорта")]),_:1}),n(".")]),q,s("p",null,[n("Уровень пользователя, для соединения будет использоваться "),o(a,{to:"/ru/config/policy.html#levelpolicyobject"},{default:e(()=>[n("локальная политика")]),_:1}),n(", соответствующая этому уровню пользователя.")]),s("p",null,[n("Значение userLevel соответствует значению "),m,n(" в разделе "),o(a,{to:"/ru/config/policy.html#policyobject"},{default:e(()=>[n("policy")]),_:1}),n(". Если не указано, используется значение по умолчанию - 0.")]),b])}const _=l(d,[["render",v],["__file","dokodemo.html.vue"]]);export{_ as default};
