import{_ as u,r as c,o as i,c as r,a as t,b as n,d as s,w as p,e as o}from"./app-g_phVvJE.js";const d={},k=o(`<h1 id="способы-передачи-utls-reality" tabindex="-1"><a class="header-anchor" href="#способы-передачи-utls-reality"><span>Способы передачи (uTLS, REALITY)</span></a></h1><p>Способ передачи (transport) — это способ взаимодействия текущего узла Xray с другими узлами.</p><p>Транспорт определяет способ передачи данных. Обычно оба конца сетевого подключения должны использовать одинаковый транспорт. Например, если один конец использует WebSocket, то другой конец также должен использовать WebSocket, иначе соединение не будет установлено.</p><h2 id="streamsettingsobject" tabindex="-1"><a class="header-anchor" href="#streamsettingsobject"><span>StreamSettingsObject</span></a></h2><p><code>StreamSettingsObject</code> соответствует элементу <code>streamSettings</code> во входящем или исходящем подключении. Для каждого входящего или исходящего подключения можно настроить различные параметры передачи, и можно использовать <code>streamSettings</code> для настройки некоторых параметров передачи.</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;raw&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;security&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tlsSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;realitySettings&quot;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rawSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;kcpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;wsSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;grpcSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpupgradeSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;splithttpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sockopt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;mark&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpMaxSeg&quot;</span><span class="token operator">:</span> <span class="token number">1440</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpFastOpen&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tproxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;domainStrategy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AsIs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dialerProxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;acceptProxyProtocol&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpKeepAliveInterval&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpKeepAliveIdle&quot;</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpUserTimeout&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpCongestion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bbr&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;interface&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wg0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;v6only&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpWindowClamp&quot;</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpMptcp&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpNoDelay&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>network</code>: &quot;raw&quot; | &quot;ws&quot; | &quot;h2&quot; | &quot;grpc&quot; | &quot;kcp&quot; | &quot;httpupgrade&quot; | &quot;splithttp&quot;</p></blockquote><p>Тип способа передачи, используемого потоком данных соединения, по умолчанию <code>&quot;raw&quot;</code></p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p><strong>Начиная с версии v24.9.30</strong>, для более точного отражения фактического поведения, тип передачи <code>tcp</code> был переименован в <code>raw</code>. Для обеспечения совместимости <code>&quot;network&quot;: &quot;raw&quot;</code> и <code>&quot;network&quot;: &quot;tcp&quot;</code>, <code>rawSettings</code> и <code>tcpSettings</code> являются синонимами.</p></div><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>&quot;h2&quot; можно записать как &quot;http&quot;, &quot;grpc&quot; можно записать как &quot;gun&quot;, &quot;kcp&quot; можно записать как &quot;mkcp&quot;.</p></div><blockquote><p><code>security</code>: &quot;none&quot; | &quot;tls&quot; | &quot;reality&quot;</p></blockquote><p>Включено ли шифрование транспортного уровня, поддерживаемые опции:</p>`,12),q=n("li",null,[n("code",null,'"none"'),s(" означает отсутствие шифрования (значение по умолчанию)")],-1),b=n("code",null,'"tls"',-1),v={href:"https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB_%D0%B7%D0%B0%D1%89%D0%B8%D1%82%D1%8B_%D1%82%D1%80%D0%B0%D0%BD%D1%81%D0%BF%D0%BE%D1%80%D1%82%D0%BD%D0%BE%D0%B3%D0%BE_%D1%83%D1%80%D0%BE%D0%B2%D0%BD%D1%8F",target:"_blank",rel:"noopener noreferrer"},m=n("li",null,[n("code",null,'"reality"'),s(" означает использование REALITY.")],-1),g=o('<blockquote><p><code>tlsSettings</code>: <a href="#tlsobject">TLSObject</a></p></blockquote><p>Конфигурация TLS. TLS предоставляется Golang, обычно результатом согласования TLS является использование TLS 1.3, DTLS не поддерживается.</p><blockquote><p><code>realitySettings</code>: <a href="#realityobject">RealityObject</a></p></blockquote><p>Конфигурация Reality. Reality — это оригинальная технология Xray. Reality обеспечивает более высокий уровень безопасности, чем TLS, и настраивается так же, как TLS.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Reality — это самое безопасное на данный момент решение для шифрования передачи данных, и внешний вид трафика такой же, как и при обычном просмотре веб-страниц. Включение Reality и настройка подходящего режима управления потоком XTLS Vision может повысить производительность в несколько раз или даже в десятки раз.</p></div>',5),h=n("code",null,"rawSettings",-1),_=n("p",null,"Конфигурация TCP для текущего соединения, действительна только если это соединение использует TCP.",-1),y=n("code",null,"kcpSettings",-1),f=n("p",null,"Конфигурация mKCP для текущего соединения, действительна только если это соединение использует mKCP.",-1),S=n("code",null,"wsSettings",-1),x=n("p",null,"Конфигурация WebSocket для текущего соединения, действительна только если это соединение использует WebSocket.",-1),T=n("code",null,"httpSettings",-1),A=n("p",null,"Конфигурация HTTP для текущего соединения, действительна только если это соединение использует HTTP.",-1),L=n("code",null,"grpcSettings",-1),w=n("p",null,"Конфигурация gRPC для текущего соединения, действительна только если это соединение использует gRPC.",-1),I=n("code",null,"httpupgradeSettings",-1),j=n("p",null,"Конфигурация HTTPUpgrade для текущего соединения, действительна только если это соединение использует HTTPUpgrade.",-1),C=n("code",null,"splithttpSettings",-1),P=o(`<p>Конфигурация SplitHTTP для текущего соединения, действительна только если это соединение использует SplitHTTP.</p><blockquote><p><code>sockopt</code>: <a href="#sockoptobject">SockoptObject</a></p></blockquote><p>Конкретные настройки, связанные с прозрачным проксированием.</p><h3 id="tlsobject" tabindex="-1"><a class="header-anchor" href="#tlsobject"><span>TLSObject</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;serverName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xray.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rejectUnknownSni&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;allowInsecure&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;alpn&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http/1.1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;minVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.2&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;maxVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.3&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cipherSuites&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Здесь укажите названия необходимых вам наборов шифров, разделяя их двоеточиями&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;certificates&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;disableSystemRoot&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;enableSessionResumption&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fingerprint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pinnedPeerCertificateChainSha256&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;masterKeyLog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>serverName</code>: string</p></blockquote><p>Указывает доменное имя сертификата сервера, полезно, когда соединение устанавливается по IP-адресу.</p><p>Если оставить пустым, автоматически используется значение из адреса (если это доменное имя), это значение также используется для проверки действительности сертификата сервера.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Как упоминалось выше, поскольку это значение также используется для проверки действительности сертификата сервера, если вы измените его на доменное имя, отличное от доменного имени сертификата сервера, необходимо включить <code>allowInsecure</code>, иначе произойдет сбой проверки сертификата. Из соображений безопасности мы не рекомендуем использовать этот метод в течение длительного времени. Если вам нужно безопасно подделать SNI, рассмотрите возможность использования REALITY.</p><p>В частности, если клиент устанавливает его в IP-адрес, Xray не будет отправлять SNI, и для использования этой функции также необходимо включить <code>allowInsecure</code>.</p></div><blockquote><p><code>rejectUnknownSni</code>: bool</p></blockquote><p>Если значение равно <code>true</code>, то сервер отклонит рукопожатие TLS, если полученный SNI не соответствует доменному имени сертификата. По умолчанию равно <code>false</code>.</p><blockquote><p><code>alpn</code>: [ string ]</p></blockquote><p>Массив строк, указывающий значения ALPN, указанные во время рукопожатия TLS. Значение по умолчанию: <code>[&quot;h2&quot;, &quot;http/1.1&quot;]</code>.</p><blockquote><p><code>minVersion</code>: string</p></blockquote><p><code>minVersion</code> — это минимально допустимая версия TLS.</p><blockquote><p><code>maxVersion</code>: string</p></blockquote><p><code>maxVersion</code> — это максимально допустимая версия TLS.</p><blockquote><p><code>cipherSuites</code>: string</p></blockquote><p><code>CipherSuites</code> используется для настройки списка поддерживаемых наборов шифров, разделенных двоеточиями.</p>`,19),D={href:"https://golang.org/src/crypto/tls/cipher_suites.go#L500",target:"_blank",rel:"noopener noreferrer"},E={href:"https://golang.org/src/crypto/tls/cipher_suites.go#L44",target:"_blank",rel:"noopener noreferrer"},B=o('<div class="custom-container danger"><p class="custom-container-title">Предупреждение</p><p>Эти два параметра конфигурации не являются обязательными и обычно не влияют на безопасность. Если они не настроены, Golang автоматически выберет их в зависимости от устройства. Если вы не знакомы с ними, пожалуйста, не настраивайте эти параметры, вы несете ответственность за проблемы, вызванные неправильным заполнением.</p></div><blockquote><p><code>allowInsecure</code>: true | false</p></blockquote><p>Разрешить ли небезопасные соединения (только для клиента). Значение по умолчанию: <code>false</code>.</p><p>Если значение равно <code>true</code>, то Xray не будет проверять действительность сертификата TLS, предоставленного удаленным хостом.</p><div class="custom-container danger"><p class="custom-container-title">Предупреждение</p><p>Из соображений безопасности этот параметр не следует устанавливать в значение <code>true</code> в реальных сценариях, иначе вы можете подвергнуться атаке типа «человек посередине».</p></div><blockquote><p><code>disableSystemRoot</code>: true | false</p></blockquote><p>Отключить ли корневые сертификаты операционной системы. Значение по умолчанию: <code>false</code>.</p><p>Если значение равно <code>true</code>, то Xray будет использовать только сертификаты, указанные в <code>certificates</code>, для рукопожатия TLS. Если значение равно <code>false</code>, то Xray будет использовать только корневые сертификаты операционной системы для рукопожатия TLS.</p><blockquote><p><code>enableSessionResumption</code>: true | false</p></blockquote><p>Если этот параметр установлен в <code>false</code>, то в ClientHello не будет расширения <code>session_ticket</code>. Как правило, программы на языке Go не используют это расширение в ClientHello, поэтому рекомендуется оставить значение по умолчанию. Значение по умолчанию: <code>false</code>.</p><blockquote><p><code>fingerprint</code> : string</p></blockquote><p>Этот параметр используется для настройки указанного отпечатка <code>TLS Client Hello</code>. Если значение пустое, эта функция отключена. При включении Xray будет <strong>эмулировать</strong> отпечаток <code>TLS</code> через библиотеку uTLS или генерировать его случайным образом. Поддерживаются три режима настройки:</p><ol><li>Отпечатки TLS последних версий популярных браузеров, включая:</li></ol><ul><li><code>&quot;chrome&quot;</code></li><li><code>&quot;firefox&quot;</code></li><li><code>&quot;safari&quot;</code></li><li><code>&quot;ios&quot;</code></li><li><code>&quot;android&quot;</code></li><li><code>&quot;edge&quot;</code></li><li><code>&quot;360&quot;</code></li><li><code>&quot;qq&quot;</code></li></ul><ol start="2"><li>Автоматическая генерация отпечатка при запуске Xray:</li></ol><ul><li><code>&quot;random&quot;</code>: случайный выбор из новых версий браузеров.</li><li><code>&quot;randomized&quot;</code>: полная случайная генерация уникального отпечатка (100% поддержка TLS 1.3 с использованием X25519)</li></ul>',16),O={start:"3"},N=n("code",null,'"HelloRandomizedNoALPN"',-1),F=n("code",null,'"HelloChrome_106_Shuffle"',-1),R={href:"https://github.com/refraction-networking/utls/blob/master/u_common.go#L434",target:"_blank",rel:"noopener noreferrer"},V={class:"custom-container tip"},K=n("p",{class:"custom-container-title"},"Подсказка",-1),M=n("strong",null,"эмулирует",-1),G=n("code",null,"TLS Client Hello",-1),Q=n("code",null,"TLS",-1),U=o('<div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>При использовании этой функции некоторые параметры TLS, влияющие на отпечаток TLS, будут переопределены библиотекой utls и не будут действовать, например, ALPN. Передаваемые параметры: <code>&quot;serverName&quot; &quot;allowInsecure&quot; &quot;disableSystemRoot&quot; &quot;pinnedPeerCertificateChainSha256&quot; &quot;masterKeyLog&quot;</code></p></div><blockquote><p><code>pinnedPeerCertificateChainSha256</code>: [string]</p></blockquote><p>Используется для указания хэша SHA256 цепочки сертификатов удаленного сервера с использованием стандартного формата кодировки. Соединение TLS может быть успешно установлено только в том случае, если хэш цепочки сертификатов сервера соответствует одному из значений, указанных в настройке.</p><p>Если соединение не удалось установить из-за этой конфигурации, будет отображен хэш сертификата удаленного сервера.</p><div class="custom-container danger"><p class="custom-container-title">Предупреждение</p><p>Не рекомендуется использовать этот способ для получения хэша цепочки сертификатов, так как в этом случае не будет возможности проверить, является ли сертификат, предоставленный сервером в данный момент, подлинным, и, следовательно, не гарантируется, что полученный хэш сертификата является ожидаемым.</p></div><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Если вам нужно получить хэш сертификата, запустите <code>xray tls certChainHash --cert &lt;cert.pem&gt;</code> из командной строки, где <code>&lt;cert.pem&gt;</code> следует заменить на фактический путь к файлу сертификата.</p></div><blockquote><p><code>certificates</code>: [ <a href="#certificateobject">CertificateObject</a> ]</p></blockquote><p>Список сертификатов, каждый элемент которого представляет собой сертификат (рекомендуется fullchain).</p>',8),X={class:"custom-container tip"},Y=n("p",{class:"custom-container-title"},"Подсказка",-1),H={href:"https://github.com/XTLS/Xray-core/discussions/56#discussioncomment-215600",target:"_blank",rel:"noopener noreferrer"},W=o(`<blockquote><p><code>masterKeyLog</code> : string</p></blockquote><p>Путь к файлу журнала (Pre)-Master-Secret, который можно использовать для расшифровки TLS-соединений, отправляемых Xray, с помощью Wireshark и других программ, пока не поддерживается для использования с utls.</p><h3 id="realityobject" tabindex="-1"><a class="header-anchor" href="#realityobject"><span>RealityObject</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;show&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example.com:443&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;xver&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;serverNames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;example.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;www.example.com&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;privateKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;minClientVer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;maxClientVer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;maxTimeDiff&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;shortIds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;0123456789abcdef&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fingerprint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;chrome&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;serverName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;publicKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;shortId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;spiderX&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),J={class:"custom-container tip"},z=n("p",{class:"custom-container-title"},"Подсказка",-1),Z={href:"https://github.com/XTLS/REALITY",target:"_blank",rel:"noopener noreferrer"},$=o('<blockquote><p><code>show</code> : true | false</p></blockquote><p>Если значение равно <code>true</code>, выводить отладочную информацию.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Ниже приведена конфигурация для <strong>входящего</strong> подключения (<strong>сервера</strong>).</p></div><blockquote><p><code>dest</code> : string</p></blockquote>',4),nn=n("code",null,"fallbacks",-1),sn=n("div",{class:"custom-container warning"},[n("p",{class:"custom-container-title"},"Внимание"),n("p",null,[s("Из соображений маскировки Xray будет "),n("strong",null,"непосредственно перенаправлять"),s(" трафик с неудачной аутентификацией (недопустимый запрос REALITY) на "),n("code",null,"dest"),s(". Если IP-адрес сайта "),n("code",null,"dest"),s(" особый (например, сайт использует CloudFlare CDN), это равносильно тому, что ваш сервер действует как port forward для CloudFlare, что может привести к злоупотреблению. Чтобы этого избежать, можно рассмотреть возможность использования Nginx и других методов для фильтрации нежелательных SNI.")])],-1),tn=n("blockquote",null,[n("p",null,[n("code",null,"xver"),s(" : number")])],-1),on=n("code",null,"fallbacks",-1),an=n("blockquote",null,[n("p",null,[n("code",null,"serverNames"),s(" : [string]")])],-1),en=n("p",null,[s("Обязательный параметр, список доступных "),n("code",null,"serverName"),s(" для клиента, подстановочные знаки * пока не поддерживаются.")],-1),pn=n("code",null,"dest",-1),cn=n("code",null,"dest",-1),ln={href:"https://ru.wikipedia.org/wiki/Subject_Alternative_Name",target:"_blank",rel:"noopener noreferrer"},un=o(`<p>Может содержать пустое значение <code>&quot;&quot;</code>, что означает принятие соединений без SNI.</p><blockquote><p><code>privateKey</code> : string</p></blockquote><p>Обязательный параметр, генерируется с помощью команды <code>./xray x25519</code>.</p><blockquote><p><code>minClientVer</code> : string</p></blockquote><p>Необязательный параметр, минимальная версия Xray клиента, формат: <code>x.y.z</code>.</p><blockquote><p><code>maxClientVer</code> : string</p></blockquote><p>Необязательный параметр, максимальная версия Xray клиента, формат: <code>x.y.z</code>.</p><blockquote><p><code>maxTimeDiff</code> : number</p></blockquote><p>Необязательный параметр, максимально допустимая разница во времени в миллисекундах.</p><blockquote><p><code>shortIds</code> : [string]</p></blockquote><p>Обязательный параметр, список доступных <code>shortId</code> для клиента, можно использовать для различения разных клиентов.</p><p>Требования к формату см. в <code>shortId</code>.</p><p>Если содержит пустое значение, <code>shortId</code> клиента может быть пустым.</p><div class="custom-container tip"><p class="custom-container-title">Подсказка</p><p>Ниже приведена конфигурация для <strong>исходящего</strong> подключения (<strong>клиента</strong>).</p></div><blockquote><p><code>serverName</code> : string</p></blockquote><p>Один из <code>serverNames</code> сервера.</p><p>Если <code>serverNames</code> сервера содержит пустое значение, то, как и в случае с TLS, клиент может использовать <code>&quot;serverName&quot;: &quot;0.0.0.0&quot;</code> для установления соединения без SNI. В отличие от TLS, REALITY не требует и не имеет опции разрешения небезопасных соединений для этой функции. При использовании этой функции убедитесь, что <code>dest</code> возвращает сертификат по умолчанию при принятии соединений без SNI.</p><blockquote><p><code>fingerprint</code> : string</p></blockquote><p>Обязательный параметр, такой же, как в <a href="#tlsobject">TLSObject</a>.</p><blockquote><p><code>shortId</code> : string</p></blockquote><p>Один из <code>shortIds</code> сервера.</p><p>Длина — 8 байт, то есть 16 шестнадцатеричных цифр (0-f), может быть меньше 16, ядро автоматически добавит 0 в конец, но количество цифр должно быть <strong>четным</strong> (потому что один байт состоит из 2 шестнадцатеричных цифр).</p><p>Например, <code>aa1234</code> будет автоматически дополнено до <code>aa12340000000000</code>, а <code>aaa1234</code> приведет к ошибке.</p><p>0 также является четным числом, поэтому, если <code>shordIDs</code> сервера содержит пустое значение <code>&quot;&quot;</code>, клиент также может быть пустым.</p><blockquote><p><code>publicKey</code> : string</p></blockquote><p>Обязательный параметр, открытый ключ, соответствующий закрытому ключу сервера. Генерируется с помощью команды <code>./xray x25519 -i &quot;закрытый_ключ_сервера&quot;</code>.</p><blockquote><p><code>spiderX</code> : string</p></blockquote><p>Начальный путь и параметры для краулера, рекомендуется использовать разные для каждого клиента.</p><h4 id="certificateobject" tabindex="-1"><a class="header-anchor" href="#certificateobject"><span>CertificateObject</span></a></h4><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;ocspStapling&quot;</span><span class="token operator">:</span> <span class="token number">3600</span><span class="token punctuation">,</span>
  <span class="token property">&quot;oneTimeLoading&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;usage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;encipherment&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;buildChain&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;certificateFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/path/to/certificate.crt&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keyFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/path/to/key.key&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;certificate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;--BEGIN CERTIFICATE--&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MIICwDCCAaigAwIBAgIRAO16JMdESAuHidFYJAR/7kAwDQYJKoZIhvcNAQELBQAw&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ADAeFw0xODA0MTAxMzU1MTdaFw0xODA0MTAxNTU1MTdaMAAwggEiMA0GCSqGSIb3&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DQEBAQUAA4IBDwAwggEKAoIBAQCs2PX0fFSCjOemmdm9UbOvcLctF94Ox4BpSfJ+&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;3lJHwZbvnOFuo56WhQJWrclKoImp/c9veL1J4Bbtam3sW3APkZVEK9UxRQ57HQuw&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;OzhV0FD20/0YELou85TwnkTw5l9GVCXT02NG+pGlYsFrxesUHpojdl8tIcn113M5&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pypgDPVmPeeORRf7nseMC6GhvXYM4txJPyenohwegl8DZ6OE5FkSVR5wFQtAhbON&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;OAkIVVmw002K2J6pitPuJGOka9PxcCVWhko/W+JCGapcC7O74palwBUuXE1iH+Jp&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;noPjGp4qE2ognW3WH/sgQ+rvo20eXb9Um1steaYY8xlxgBsXAgMBAAGjNTAzMA4G&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;A1UdDwEB/wQEAwIFoDATBgNVHSUEDDAKBggrBgEFBQcDATAMBgNVHRMBAf8EAjAA&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MA0GCSqGSIb3DQEBCwUAA4IBAQBUd9sGKYemzwPnxtw/vzkV8Q32NILEMlPVqeJU&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;7UxVgIODBV6A1b3tOUoktuhmgSSaQxjhYbFAVTD+LUglMUCxNbj56luBRlLLQWo+&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;9BUhC/ow393tLmqKcB59qNcwbZER6XT5POYwcaKM75QVqhCJVHJNb1zSEE7Co7iO&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;6wIan3lFyjBfYlBEz5vyRWQNIwKfdh5cK1yAu13xGENwmtlSTHiwbjBLXfk+0A/8&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;r/2s+sCYUkGZHhj8xY7bJ1zg0FRalP5LrqY+r6BckT1QPDIQKYy615j1LpOtwZe/&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;d4q7MD/dkzRDsch7t2cIjM/PYeMuzh87admSyL6hdtK0Nm/Q&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;--END CERTIFICATE--&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;--BEGIN RSA PRIVATE KEY--&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MIIEowIBAAKCAQEArNj19HxUgoznppnZvVGzr3C3LRfeDseAaUnyft5SR8GW75zh&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bqOeloUCVq3JSqCJqf3Pb3i9SeAW7Wpt7FtwD5GVRCvVMUUOex0LsDs4VdBQ9tP9&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;GBC6LvOU8J5E8OZfRlQl09NjRvqRpWLBa8XrFB6aI3ZfLSHJ9ddzOacqYAz1Zj3n&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;jkUX+57HjAuhob12DOLcST8np6IcHoJfA2ejhORZElUecBULQIWzjTgJCFVZsNNN&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;itieqYrT7iRjpGvT8XAlVoZKP1viQhmqXAuzu+KWpcAVLlxNYh/iaZ6D4xqeKhNq&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;IJ1t1h/7IEPq76NtHl2/VJtbLXmmGPMZcYAbFwIDAQABAoIBAFCgG4phfGIxK9Uw&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;qrp+o9xQLYGhQnmOYb27OpwnRCYojSlT+mvLcqwvevnHsr9WxyA+PkZ3AYS2PLue&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;C4xW0pzQgdn8wENtPOX8lHkuBocw1rNsCwDwvIguIuliSjI8o3CAy+xVDFgNhWap&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/CMzfQYziB7GlnrM6hH838iiy0dlv4I/HKk+3/YlSYQEvnFokTf7HxbDDmznkJTM&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;aPKZ5qbnV+4AcQfcLYJ8QE0ViJ8dVZ7RLwIf7+SG0b0bqloti4+oQXqGtiESUwEW&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/Wzi7oyCbFJoPsFWp1P5+wD7jAGpAd9lPIwPahdr1wl6VwIx9W0XYjoZn71AEaw4&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bK4xUXECgYEA3g2o9WqyrhYSax3pGEdvV2qN0VQhw7Xe+jyy98CELOO2DNbB9QNJ&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;8cSSU/PjkxQlgbOJc8DEprdMldN5xI/srlsbQWCj72wXxXnVnh991bI2clwt7oYi&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pcGZwzCrJyFL+QaZmYzLxkxYl1tCiiuqLm+EkjxCWKTX/kKEFb6rtnMCgYEAx0WR&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;L8Uue3lXxhXRdBS5QRTBNklkSxtU+2yyXRpvFa7Qam+GghJs5RKfJ9lTvjfM/PxG&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;3vhuBliWQOKQbm1ZGLbgGBM505EOP7DikUmH/kzKxIeRo4l64mioKdDwK/4CZtS7&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;az0Lq3eS6bq11qL4mEdE6Gn/Y+sqB83GHZYju80CgYABFm4KbbBcW+1RKv9WSBtK&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gVIagV/89moWLa/uuLmtApyEqZSfn5mAHqdc0+f8c2/Pl9KHh50u99zfKv8AsHfH&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TtjuVAvZg10GcZdTQ/I41ruficYL0gpfZ3haVWWxNl+J47di4iapXPxeGWtVA+u8&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eH1cvgDRMFWCgE7nUFzE8wKBgGndUomfZtdgGrp4ouLZk6W4ogD2MpsYNSixkXyW&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;64cIbV7uSvZVVZbJMtaXxb6bpIKOgBQ6xTEH5SMpenPAEgJoPVts816rhHdfwK5Q&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;8zetklegckYAZtFbqmM0xjOI6bu5rqwFLWr1xo33jF0wDYPQ8RHMJkruB1FIB8V2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;GxvNAoGBAM4g2z8NTPMqX+8IBGkGgqmcYuRQxd3cs7LOSEjF9hPy1it2ZFe/yUKq&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ePa2E8osffK5LBkFzhyQb0WrGC9ijM9E6rv10gyuNjlwXdFJcdqVamxwPUBtxRJR&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;cYTY2HRkJXDdtT0Bkc3josE6UUDvwMpO0CfAETQPto1tjNEDhQhT&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;--END RSA PRIVATE KEY--&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>ocspStapling</code>: number</p></blockquote><p>Интервал обновления OCSP-скрепления, совпадает с интервалом перезагрузки сертификата. Единица измерения: секунды. Значение по умолчанию: <code>3600</code>, то есть один час.</p><blockquote><p><code>oneTimeLoading</code>: true | false</p></blockquote><p>Загружать только один раз. Если значение равно <code>true</code>, то функция горячей перезагрузки сертификата и функция OCSP-скрепления будут отключены.</p><div class="custom-container warning"><p class="custom-container-title">Внимание</p><p>Если значение равно <code>true</code>, то OCSP-скрепление будет отключено.</p></div><blockquote><p><code>usage</code>: &quot;encipherment&quot; | &quot;verify&quot; | &quot;issue&quot;</p></blockquote><p>Использование сертификата, значение по умолчанию: <code>&quot;encipherment&quot;</code>.</p><ul><li><code>&quot;encipherment&quot;</code>: сертификат используется для аутентификации и шифрования TLS.</li><li><code>&quot;verify&quot;</code>: сертификат используется для проверки сертификата удаленного TLS. При использовании этого значения текущий сертификат должен быть сертификатом ЦС.</li><li><code>&quot;issue&quot;</code>: сертификат используется для выпуска других сертификатов. При использовании этого значения текущий сертификат должен быть сертификатом ЦС.</li></ul><div class="custom-container tip"><p class="custom-container-title">СОВЕТ 1</p><p>В Windows вы можете установить самоподписанный сертификат ЦС в систему, чтобы проверить сертификат удаленного TLS.</p></div><div class="custom-container tip"><p class="custom-container-title">СОВЕТ 2</p><p>Когда поступает новый запрос от клиента, предполагая, что указанный <code>serverName</code> равен <code>&quot;xray.com&quot;</code>, Xray сначала ищет в списке сертификатов сертификат, который можно использовать для <code>&quot;xray.com&quot;</code>, и, если он не найден, использует любой сертификат с <code>usage</code>, равным <code>&quot;issue&quot;</code>, для выпуска сертификата, подходящего для <code>&quot;xray.com&quot;</code>, со сроком действия один час. Новый сертификат будет добавлен в список сертификатов для последующего использования.</p></div><div class="custom-container tip"><p class="custom-container-title">СОВЕТ 3</p><p>Если одновременно указаны <code>certificateFile</code> и <code>certificate</code>, Xray отдает приоритет <code>certificateFile</code>. То же самое касается <code>keyFile</code> и <code>key</code>.</p></div><div class="custom-container tip"><p class="custom-container-title">СОВЕТ 4</p><p>Когда <code>usage</code> равно <code>&quot;verify&quot;</code>, то <code>keyFile</code> и <code>key</code> могут быть пустыми.</p></div><div class="custom-container tip"><p class="custom-container-title">СОВЕТ 5</p><p>Используйте <code>xray tls cert</code> для генерации самоподписанного сертификата ЦС.</p></div>`,43),rn={class:"custom-container tip"},dn=n("p",{class:"custom-container-title"},"СОВЕТ 6",-1),kn={href:"https://github.com/acmesh-official/acme.sh",target:"_blank",rel:"noopener noreferrer"},qn=o(`<blockquote><p><code>buildChain</code>: true | false</p></blockquote><p>Вступает в силу только при использовании сертификата <code>&quot;issue&quot;</code>, если значение равно <code>true</code>, то сертификат ЦС будет встроен в цепочку сертификатов при выпуске сертификата.</p><div class="custom-container tip"><p class="custom-container-title">СОВЕТ 1</p><p>Не следует встраивать корневой сертификат в цепочку сертификатов. Этот параметр следует включать только при подписании сертификата ЦС в качестве промежуточного сертификата.</p></div><blockquote><p><code>certificateFile</code>: string</p></blockquote><p>Путь к файлу сертификата, например, сгенерированному с помощью OpenSSL, с расширением .crt.</p><blockquote><p><code>certificate</code>: [ string ]</p></blockquote><p>Массив строк, представляющий содержимое сертификата, формат см. в примере. Используйте либо <code>certificate</code>, либо <code>certificateFile</code>.</p><blockquote><p><code>keyFile</code>: string</p></blockquote><p>Путь к файлу ключа, например, сгенерированному с помощью OpenSSL, с расширением .key. В настоящее время не поддерживаются файлы ключей, защищенные паролем.</p><blockquote><p><code>key</code>: [ string ]</p></blockquote><p>Массив строк, представляющий содержимое ключа, формат см. в примере. Используйте либо <code>key</code>, либо <code>keyFile</code>.</p><h3 id="sockoptobject" tabindex="-1"><a class="header-anchor" href="#sockoptobject"><span>SockoptObject</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;mark&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpMaxSeg&quot;</span><span class="token operator">:</span> <span class="token number">1440</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpFastOpen&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tproxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;domainStrategy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AsIs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dialerProxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;acceptProxyProtocol&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpKeepAliveInterval&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpKeepAliveIdle&quot;</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpUserTimeout&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpcongestion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bbr&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;interface&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wg0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;V6Only&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpWindowClamp&quot;</span><span class="token operator">:</span> <span class="token number">600</span>
  <span class="token property">&quot;tcpMptcp&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tcpNoDelay&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;customSockopt&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>mark</code>: number</p></blockquote><p>Целое число. Если значение не равно нулю, то исходящее соединение помечается этим значением с помощью SO_MARK.</p><ul><li>Работает только в Linux.</li><li>Требуются права CAP_NET_ADMIN.</li></ul><blockquote><p><code>tcpMaxSeg</code>: number</p></blockquote><p>Используется для установки максимального сегмента TCP-пакета (Maximum Segment Size).</p><blockquote><p><code>tcpFastOpen</code>: true | false | number</p></blockquote>`,19),bn={href:"https://ru.wikipedia.org/wiki/TCP_Fast_Open",target:"_blank",rel:"noopener noreferrer"},vn=n("p",null,[s("Если значение равно "),n("code",null,"true"),s(" или "),n("strong",null,"положительному целому числу"),s(", то TFO включается; если значение равно "),n("code",null,"false"),s(" или "),n("strong",null,"отрицательному числу"),s(", то TFO принудительно отключается; если параметр отсутствует или равен "),n("code",null,"0"),s(", то используются настройки системы по умолчанию. Можно использовать как для входящих, так и для исходящих подключений.")],-1),mn=o("<li><p>Доступно только в следующих (или более новых) версиях операционных систем:</p><ul><li>Linux 3.16: требуется настройка параметра ядра <code>net.ipv4.tcp_fastopen</code>, который представляет собой битовую маску, где <code>0x1</code> означает, что клиент может включать TFO, а <code>0x2</code> означает, что сервер может включать TFO; значение по умолчанию — <code>0x1</code>, если серверу необходимо включить TFO, установите значение этого параметра ядра в <code>0x3</code>.</li><li><s>Windows 10 (1607)</s> (реализовано неправильно)</li><li>Mac OS 10.11 / iOS 9 (требуется тестирование)</li><li>FreeBSD 10.3 (Server) / 12.0 (Client): необходимо установить параметры ядра <code>net.inet.tcp.fastopen.server_enabled</code> и <code>net.inet.tcp.fastopen.client_enabled</code> в значение <code>1</code>. (Требуется тестирование)</li></ul></li>",1),gn=n("strong",null,"положительное целое число",-1),hn={href:"https://tools.ietf.org/html/rfc7413#section-5.1",target:"_blank",rel:"noopener noreferrer"},_n=n("strong",null,"обратите внимание, что не все операционные системы поддерживают эту настройку",-1),yn=o("<ul><li>Linux / FreeBSD: установленное здесь <strong>положительное целое число</strong> представляет собой максимальное значение, максимально допустимое значение — 2147483647, если установлено значение <code>true</code>, то используется значение <code>256</code>; обратите внимание, что в Linux <code>net.core.somaxconn</code> ограничивает максимальное значение, если оно превышает <code>somaxconn</code>, то необходимо также увеличить <code>somaxconn</code>.</li><li>Mac OS: если здесь установлено значение <code>true</code> или <strong>положительное целое число</strong>, это означает только включение TFO, максимальное значение необходимо установить отдельно с помощью параметра ядра <code>net.inet.tcp.fastopen_backlog</code>.</li><li>Windows: если здесь установлено значение <code>true</code> или <strong>положительное целое число</strong>, это означает только включение TFO.</li></ul>",1),fn=n("li",null,[n("p",null,[s("Для исходящих подключений установка значения "),n("code",null,"true"),s(" или "),n("strong",null,"положительного целого числа"),s(" в любой операционной системе означает только включение TFO.")])],-1),Sn=o("<blockquote><p><code>tproxy</code>: &quot;redirect&quot; | &quot;tproxy&quot; | &quot;off&quot;</p></blockquote><p>Включить ли прозрачное проксирование (только для Linux).</p><ul><li><code>&quot;redirect&quot;</code>: использовать прозрачное проксирование в режиме перенаправления. Поддерживаются все TCP-соединения на основе IPv4/6.</li><li><code>&quot;tproxy&quot;</code>: использовать прозрачное проксирование в режиме TProxy. Поддерживаются все TCP- и UDP-соединения на основе IPv4/6.</li><li><code>&quot;off&quot;</code>: отключить прозрачное проксирование.</li></ul><p>Для прозрачного проксирования требуются права root или <code>CAP\\_NET\\_ADMIN</code>.</p>",4),xn={class:"custom-container danger"},Tn=n("p",{class:"custom-container-title"},"Предупреждение",-1),An=n("code",null,"followRedirect: true",-1),Ln=n("code",null,"tproxy",-1),wn=n("code",null,"tproxy",-1),In=n("code",null,'"redirect"',-1),jn=n("blockquote",null,[n("p",null,[n("code",null,"domainStrategy"),s(': "AsIs"'),n("br"),s(' "UseIP" | "UseIPv6v4" | "UseIPv6" | "UseIPv4v6" | "UseIPv4"'),n("br"),s(' "ForceIP" | "ForceIPv6v4" | "ForceIPv6" | "ForceIPv4v6" | "ForceIPv4"')])],-1),Cn={href:"https://github.com/v2ray/v2ray-core/issues/1909",target:"_blank",rel:"noopener noreferrer"};function Pn(Dn,En){const l=c("I18nTip"),a=c("ExternalLinkIcon"),e=c("RouterLink");return i(),r("div",null,[t(l),k,n("ul",null,[q,n("li",null,[b,s(" означает использование "),n("a",v,[s("TLS"),t(a)]),s(".")]),m]),g,n("blockquote",null,[n("p",null,[h,s(": "),t(e,{to:"/ru/config/transports/raw.html"},{default:p(()=>[s("RawObject")]),_:1})])]),_,n("blockquote",null,[n("p",null,[y,s(": "),t(e,{to:"/ru/config/transports/mkcp.html"},{default:p(()=>[s("KcpObject")]),_:1})])]),f,n("blockquote",null,[n("p",null,[S,s(": "),t(e,{to:"/ru/config/transports/websocket.html"},{default:p(()=>[s("WebSocketObject")]),_:1})])]),x,n("blockquote",null,[n("p",null,[T,s(": "),t(e,{to:"/ru/config/transports/http.html"},{default:p(()=>[s("HttpObject")]),_:1})])]),A,n("blockquote",null,[n("p",null,[L,s(": "),t(e,{to:"/ru/config/transports/grpc.html"},{default:p(()=>[s("GRPCObject")]),_:1})])]),w,n("blockquote",null,[n("p",null,[I,s(": "),t(e,{to:"/ru/config/transports/httpupgrade.html"},{default:p(()=>[s("HttpUpgradeObject")]),_:1})])]),j,n("blockquote",null,[n("p",null,[C,s(": "),t(e,{to:"/ru/config/transports/splithttp.html"},{default:p(()=>[s("SplitHttpObject")]),_:1})])]),P,n("p",null,[s("Вы можете найти список наборов шифров Golang и их описания "),n("a",D,[s("здесь"),t(a)]),s(" или "),n("a",E,[s("здесь"),t(a)]),s(".")]),B,n("ol",O,[n("li",null,[s("Использование имени переменной отпечатка uTLS, например, "),N,s(),F,s(". Полный список см. в "),n("a",R,[s("библиотеке uTLS"),t(a)]),s(".")])]),n("div",V,[K,n("p",null,[s("Эта функция только "),M,s(" отпечаток "),G,s(", поведение и другие отпечатки такие же, как у Golang. Если вам нужна более полная эмуляция отпечатка и поведения браузера "),Q,s(", используйте "),t(e,{to:"/ru/config/transports/websocket.html#browser-dialer"},{default:p(()=>[s("Browser Dialer")]),_:1}),s(".")])]),U,n("div",X,[Y,n("p",null,[s("Если вам нужно получить оценку A/A+ в ssllibs или myssl, пожалуйста, обратитесь к "),n("a",H,[s("этому"),t(a)]),s(".")])]),W,n("div",J,[z,n("p",null,[s("Дополнительную информацию см. в проекте "),n("a",Z,[s("REALITY"),t(a)]),s(".")])]),$,n("p",null,[s("Обязательный параметр, формат такой же, как у "),t(e,{to:"/ru/config/features/fallback.html#fallbackobject"},{default:p(()=>[s("dest")]),_:1}),s(" в VLESS "),nn,s(".")]),sn,tn,n("p",null,[s("Необязательный параметр, формат такой же, как у "),t(e,{to:"/ru/config/features/fallback.html#fallbackobject"},{default:p(()=>[s("xver")]),_:1}),s(" в VLESS "),on,s(".")]),an,en,n("p",null,[s("Обычно он совпадает с "),pn,s(", фактическое допустимое значение — это любой SNI, принимаемый сервером (в зависимости от конфигурации "),cn,s("), в качестве справки можно использовать "),n("a",ln,[s("SAN"),t(a)]),s(" возвращаемого сертификата.")]),un,n("div",rn,[dn,n("p",null,[s("Если у вас уже есть доменное имя, вы можете использовать инструменты для удобного получения бесплатных сторонних сертификатов, например, "),n("a",kn,[s("acme.sh"),t(a)]),s(".")])]),qn,n("p",null,[s("Включить "),n("a",bn,[s("TCP Fast Open"),t(a)]),s(".")]),vn,n("ul",null,[mn,n("li",null,[n("p",null,[s("Для входящих подключений установленное здесь "),gn,s(" представляет собой "),n("a",hn,[s("максимальное количество ожидающих запросов на подключение TFO"),t(a)]),s(", "),_n,s(":")]),yn]),fn]),Sn,n("div",xn,[Tn,n("p",null,[s("Если в "),t(e,{to:"/ru/config/inbounds/dokodemo.html"},{default:p(()=>[s("Dokodemo-door")]),_:1}),s(" указано "),An,s(" и "),Ln,s(" в настройках Sockopt пуст, то значение "),wn,s(" в настройках Sockopt будет установлено в "),In,s(".")])]),jn,n("p",null,[s("В предыдущих версиях, когда Xray пытался установить системное соединение с использованием доменного имени, разрешение доменного имени выполнялось системой и не контролировалось Xray. Это приводило к таким проблемам, как "),n("a",Cn,[s("невозможность разрешить доменные имена в нестандартных средах Linux"),t(a)]),s(". Для решения этой проблемы в X")])])}const On=u(d,[["render",Pn],["__file","transport.html.vue"]]);export{On as default};
