import{_ as a,r as s,o as t,c as e,a as p,e as l}from"./app-DkijezZx.js";const i="/assets/ch05-img01-nginx-default-running-C4PeIKwj.png",o="/assets/ch05-img02-nginx-conf-full-C_TeO_k2.gif",c="/assets/ch05-img03-nginx-http-running-CYGBxUEw.png",d={},u=l(`<h1 id="【глава-5】-создание-веб-саита" tabindex="-1"><a class="header-anchor" href="#【глава-5】-создание-веб-саита"><span>【Глава 5】 Создание веб-сайта</span></a></h1><h2 id="_5-1-зачем-нужен-веб-саит" tabindex="-1"><a class="header-anchor" href="#_5-1-зачем-нужен-веб-саит"><span>5.1 Зачем нужен веб-сайт?</span></a></h2><p>Начинающие пользователи могут задаться вопросом: зачем создавать веб-сайт для обхода блокировок? Я не программист, это же сложно?</p><p>Начнём с первого вопроса. Веб-сайт нужен для того, чтобы:</p><ol><li>Получить действующий SSL-сертификат (это очень важно).</li><li>Обеспечить маскировку трафика (fallback) и защититься от атак, направленных на выявление VPN-серверов.</li><li>Создать сайт-прикрытие (например, блог, облачное хранилище, медиа-портал, игровой сайт), который будет отображаться при прямом доступе к серверу, делая использование VPN менее заметным.</li></ol><p>Теперь ответим на второй вопрос:</p><ol><li>В этой статье мы создадим максимально простой веб-сайт, состоящий из <strong>одного HTML-файла</strong> и работающий на веб-сервере <strong>Nginx</strong>, чтобы решить поставленные выше задачи. Это очень просто.</li><li>Этот веб-сайт не обязательно должен быть просто прикрытием. Вы можете развивать его и превратить в полноценный проект. Всё зависит от ваших желаний и возможностей.</li><li>Создание сайта-прикрытия и его продвижение — это отдельная большая тема, которая выходит за рамки этой статьи. Если вам интересно, вы можете найти информацию об этом в интернете.</li></ol><h2 id="_5-2-подключение-к-vps-и-установка-nginx" tabindex="-1"><a class="header-anchor" href="#_5-2-подключение-к-vps-и-установка-nginx"><span>5.2 Подключение к VPS и установка Nginx</span></a></h2><ol><li><p>В этом разделе мы будем использовать команды, которые уже были подробно рассмотрены ранее. Если вы что-то не понимаете, вернитесь и перечитайте предыдущие главы.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>После завершения установки Nginx запустится автоматически. Откройте браузер на своём компьютере и введите адрес <code>http://100.200.300.400:80</code>. Если вы увидите страницу, как на скриншоте ниже, значит, Nginx работает.</p><p><img src="`+i+`" alt="Стандартная страница Nginx"></p></li><li><p>Если вы не видите страницу Nginx, возможно, вам нужно настроить Uncomplicated Firewall (UFW), стандартный брандмауэр в Debian, чтобы разрешить трафик на портах HTTP (80) и HTTPS (443).</p><p>a. Чтобы проверить, введите:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> ufw status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>b. Если вывод команды такой, как показано ниже, это означает, что порты 80 и 443 закрыты. Выполните действия, описанные в пункте c.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>Status: active
To                         Action      From
--                         ------      ----
<span class="token number">22</span>/tcp                     ALLOW       Anywhere
<span class="token number">22</span>/tcp <span class="token punctuation">(</span>v6<span class="token punctuation">)</span>                ALLOW       Anywhere <span class="token punctuation">(</span>v6<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>c. Чтобы открыть порты 80 и 443 для Nginx в UFW, выполните команду:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> ufw allow <span class="token string">&#39;Nginx Full&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>d. Снова проверьте статус UFW, выполнив команду из пункта a. Если вы видите вывод, как показано ниже, значит, трафик для Nginx разрешён, и вы должны увидеть стандартную страницу Nginx.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>Status: active
To                         Action      From
--                         ------      ----
<span class="token number">22</span>/tcp                     ALLOW       Anywhere
Nginx Full                 ALLOW       Anywhere
<span class="token number">22</span>/tcp <span class="token punctuation">(</span>v6<span class="token punctuation">)</span>                ALLOW       Anywhere <span class="token punctuation">(</span>v6<span class="token punctuation">)</span>
Nginx Full <span class="token punctuation">(</span>v6<span class="token punctuation">)</span>            ALLOW       Anywhere <span class="token punctuation">(</span>v6<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="_5-3-создание-простои-веб-страницы" tabindex="-1"><a class="header-anchor" href="#_5-3-создание-простои-веб-страницы"><span>5.3 Создание простой веб-страницы</span></a></h2><ol><li><p>Базовые команды Linux:</p><table><thead><tr><th style="text-align:center;">Номер</th><th style="text-align:left;">Команда</th><th style="text-align:left;">Описание</th></tr></thead><tbody><tr><td style="text-align:center;"><code>cmd-10</code></td><td style="text-align:left;"><code>mkdir</code></td><td style="text-align:left;">Создание папки</td></tr><tr><td style="text-align:center;"><code>cmd-11</code></td><td style="text-align:left;"><code>systemctl reload</code></td><td style="text-align:left;">Перезагрузка службы</td></tr></tbody></table></li><li><p>Важные файлы конфигурации Linux:</p><table><thead><tr><th style="text-align:left;">Номер</th><th style="text-align:left;">Путь к файлу</th><th style="text-align:left;">Описание</th></tr></thead><tbody><tr><td style="text-align:left;"><code>conf-02</code></td><td style="text-align:left;"><code>/etc/nginx/nginx.conf</code></td><td style="text-align:left;">Настройки Nginx</td></tr></tbody></table></li><li><p>Создайте папку <code>/home/vpsadmin/www/webpage/</code> для вашего сайта и файл <code>index.html</code> внутри неё:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/www/webpage/ <span class="token operator">&amp;&amp;</span> <span class="token function">nano</span> ~/www/webpage/index.html
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><div class="custom-container warning"><p class="custom-container-title">Внимание</p><p>Если вы используете имя пользователя, отличное от <code>vpsadmin</code>, обратите внимание на символ <code>~</code> в этой команде (это важно для 5-го шага):</p><ul><li>Для пользователей, <strong>отличных от <code>root</code></strong>: <code>~</code> эквивалентно <code>/home/имя_пользователя</code>.</li><li>Для пользователя <strong><code>root</code></strong>: <code>~</code> эквивалентно <code>/root</code>.</li></ul></div><ol start="4"><li><p>Скопируйте следующий код в файл <code>index.html</code> и сохраните его (<code>Ctrl+O</code>, <code>Enter</code>), затем выйдите из редактора (<code>Ctrl+X</code>):</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- Text between angle brackets is an HTML tag and is not displayed.
        Most tags, such as the HTML and /HTML tags that surround the contents of
        a page, come in pairs; some tags, like HR, for a horizontal rule, stand
        alone. Comments, such as the text you&#39;re reading, are not displayed when
        the Web page is shown. The information between the HEAD and /HEAD tags is
        not displayed. The information between the BODY and /BODY tags is displayed.--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Enter a title, displayed at the top of the window.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- The information between the BODY and /BODY tags is displayed.--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Enter the main heading, usually the same as the title.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Be <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>bold<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span> in stating your key points. Put them in a list:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>The first item in your list<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>The second item; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>italicize<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> key words<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Improve your image by including an image.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://i.imgur.com/SEBww.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>A Great HTML Resource<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
      Add a link to your favorite
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.dummies.com/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Web site<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>. Break up your page
      with a horizontal rule or two.
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
      Finally, link to <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page2.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>another page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span> in your own Web
      site.
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- And add a copyright notice.--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token entity" title="©">&amp;#169;</span> Wiley Publishing, 2011<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Дайте другим пользователям право на чтение этого файла:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token parameter variable">-R</span> a+r <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Отредактируйте файл <code>nginx.conf</code> и перезапустите Nginx, чтобы он открывал созданную нами страницу <code>index.html</code> при обращении к порту <code>80</code>.</p><ol><li><p>Отредактируйте файл <code>nginx.conf</code>.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/nginx/nginx.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Добавьте следующий блок кода внутрь блока <code>http{}</code> и сохраните изменения (<code>Ctrl+O</code>, <code>Enter</code>), затем выйдите из редактора (<code>Ctrl+X</code>). (Не забудьте заменить доменное имя на ваше реальное доменное имя, включая поддомен).</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>        server {
                listen 80;
                server_name поддомен.ваш_домен.com;
                root /home/vpsadmin/www/webpage;
                index index.html;
        }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">Важно!</p><p>Как уже говорилось в 3-м шаге, убедитесь, что путь <code>/home/vpsadmin/www/webpage</code> соответствует реальному пути к вашему файлу.</p></div></li><li><p>Перезагрузите Nginx, чтобы применить изменения.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl reload nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Весь процесс настройки показан на гифке ниже:</p><p><img src="`+o+'" alt="Настройка веб-сайта"></p></li><li><p>Теперь, если вы откроете в браузере адрес <code>http://поддомен.ваш_домен.com</code>, вы должны увидеть созданную нами страницу:</p><p><img src="'+c+'" alt="Веб-сайт работает"></p></li></ol></li></ol><h2 id="_5-4-распространенные-ошибки" tabindex="-1"><a class="header-anchor" href="#_5-4-распространенные-ошибки"><span>5.4 Распространённые ошибки</span></a></h2><p>Вообще, если вы внимательно следовали инструкциям, ошибок быть не должно. Однако на этом этапе многие пользователи сталкиваются с проблемами. В чём же дело? Ответ прост: <strong>невнимательность</strong>. Здесь возможны только две ошибки, и обе они связаны с невнимательностью.</p><p><strong>Ошибки:</strong></p><ul><li>Путь <code>/home/vpsadmin/www/webpage</code> в файле <code>nginx.conf</code> не соответствует реальному пути к файлу <code>index.html</code>. Nginx не может найти файл.</li><li>Путь указан верно, но у Nginx нет прав на чтение файла.</li></ul><p><strong>Причины:</strong></p><ul><li>Вы работаете не под пользователем <code>root</code>, но скопировали команды из статьи без изменений (как будто списали домашнее задание вместе с именем одноклассника).</li><li>Вы работаете под пользователем <code>root</code>.</li></ul><p>Если у вас возникли проблемы, вернитесь к разделу 5.3 и внимательно перечитайте пункты 3 и 6.2.</p><div class="custom-container warning"><p class="custom-container-title">Внимание</p><p>В предыдущих главах мы много говорили о важности использования пользователя, отличного от <code>root</code>, и вся статья написана с учётом этого. Поэтому проблемы, связанные с использованием <code>root</code>, не рассматриваются в рамках этой статьи.</p><p>Однако я уверен, что те, кто всё-таки работает под <code>root</code>, достаточно опытны и смогут решить эти проблемы самостоятельно.</p></div><h2 id="_5-5-ваш-прогресс" tabindex="-1"><a class="header-anchor" href="#_5-5-ваш-прогресс"><span>5.5 Ваш прогресс</span></a></h2><p>Первый компонент Xray — веб-сайт — готов. Давайте перейдём ко второму компоненту — SSL-сертификату!</p><blockquote><p>⬛⬛⬛⬛⬛⬜⬜⬜ 62.5%</p></blockquote>',24);function r(g,k){const n=s("I18nTip");return t(),e("div",null,[p(n),u])}const m=a(d,[["render",r],["__file","ch05-webpage.html.vue"]]);export{m as default};
